<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>music.asm</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc2 {
	color: #FF8000;
}
.sc4 {
	font-weight: bold;
	color: #000080;
}
.sc5 {
}
.sc6 {
	font-weight: bold;
	color: #0000FF;
}
.sc7 {
	font-weight: bold;
	color: #0080C0;
}
.sc8 {
	font-weight: bold;
	color: #8080FF;
}
.sc9 {
	color: #0080FF;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc12 {
	color: #808000;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc0">
</span><span class="sc1">; MUSIC</span><span class="sc0">
</span><span class="sc1">; ~~~~~</span><span class="sc0">
</span><span class="sc1">; - music effect (play some melody via sb)</span><span class="sc0">

</span><span class="sc9">include</span><span class="sc0">                 </span><span class="sc9">INCLUDE</span><span class="sc0">\</span><span class="sc5">consts.inc</span><span class="sc0">
</span><span class="sc9">include</span><span class="sc0">                 </span><span class="sc9">INCLUDE</span><span class="sc0">\</span><span class="sc5">s2c.inc</span><span class="sc0">
</span><span class="sc9">include</span><span class="sc0">                 </span><span class="sc5">memory.inc</span><span class="sc0">
</span><span class="sc9">include</span><span class="sc0">                 </span><span class="sc5">k32man.inc</span><span class="sc0">

</span><span class="sc9">include</span><span class="sc0">                 </span><span class="sc5">plugin.inc</span><span class="sc0">
                        </span><span class="sc5">PLUGIN_START</span><span class="sc0">    </span><span class="sc5">MUSIC</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">W32R3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">NON_PERMUTABLE</span><span class="sc0">

</span><span class="sc5">handleevent</span><span class="sc4">:</span><span class="sc0">            </span><span class="sc5">hookevent</span><span class="sc0"> </span><span class="sc5">EV_MUSIC_INIT</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">init</span><span class="sc0">
                        </span><span class="sc5">hookevent</span><span class="sc0"> </span><span class="sc5">EV_MUSIC_DONE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">done</span><span class="sc0">
                        </span><span class="sc6">stc</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc1">; output: EDI=memory block to be released</span><span class="sc0">
</span><span class="sc1">;         ECX=music length in milliseconds</span><span class="sc0">

</span><span class="sc5">init</span><span class="sc4">:</span><span class="sc0">                   </span><span class="sc6">pusha</span><span class="sc0">

                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">wavehdrsize</span><span class="sc4">+</span><span class="sc5">wavedatasize</span><span class="sc0">
                        </span><span class="sc5">event</span><span class="sc0">   </span><span class="sc5">EV_MEMORY_MALLOC</span><span class="sc0">
                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">edi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">edx</span><span class="sc0">

                        </span><span class="sc6">pusha</span><span class="sc0">
                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">gen_wavehdr</span><span class="sc0">
                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">gen_wavedata</span><span class="sc0">
                        </span><span class="sc6">popa</span><span class="sc0">

                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">playstop</span><span class="sc0">

                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc5">SND_MEMORY</span><span class="sc4">+</span><span class="sc5">SND_ASYNC</span><span class="sc4">+</span><span class="sc5">SND_LOOP</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc2">0</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">edi</span><span class="sc0">
                        </span><span class="sc5">callMM</span><span class="sc0">  </span><span class="sc5">PlaySound</span><span class="sc0">

                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc5">.popa_edi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">edi</span><span class="sc0">
                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc5">.popa_ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1000</span><span class="sc4">*</span><span class="sc5">WAVE_LENGTH</span><span class="sc0">
                        
                        </span><span class="sc6">popa</span><span class="sc0">
                        </span><span class="sc6">clc</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc1">; input: EDI=memory block to release</span><span class="sc0">

</span><span class="sc5">done</span><span class="sc4">:</span><span class="sc0">                   </span><span class="sc6">pusha</span><span class="sc0">

                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">playstop</span><span class="sc0">

                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">edi</span><span class="sc0">
                        </span><span class="sc5">event</span><span class="sc0">   </span><span class="sc5">EV_MEMORY_MFREE</span><span class="sc0">

                        </span><span class="sc6">popa</span><span class="sc0">
                        </span><span class="sc6">clc</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc5">playstop</span><span class="sc4">:</span><span class="sc0">               </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc5">SND_PURGE</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc2">0</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc2">0</span><span class="sc0">
                        </span><span class="sc5">callMM</span><span class="sc0">  </span><span class="sc5">PlaySound</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc1">; action: generate .WAV header</span><span class="sc0">
</span><span class="sc1">; input: EDI=wavehdr ptr</span><span class="sc0">

</span><span class="sc5">gen_wavehdr</span><span class="sc4">:</span><span class="sc0">            </span><span class="sc5">getofs</span><span class="sc0">  </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">wavehdr</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc5">wavehdrsize</span><span class="sc0">
                        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">ecx</span><span class="sc0">
                        </span><span class="sc6">cld</span><span class="sc0">
                        </span><span class="sc6">rep</span><span class="sc0">     </span><span class="sc6">movsb</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc1">; action: generate single note, waveform=sin(t)</span><span class="sc0">
</span><span class="sc1">; input:  EBX=note frequency [Hz]</span><span class="sc0">
</span><span class="sc1">;         ECX=note length    [ms]</span><span class="sc0">
</span><span class="sc1">;         ESI=amplitude      0..32767</span><span class="sc0">
</span><span class="sc1">;         EDI=data ptr</span><span class="sc0">
</span><span class="sc1">;         EBP.bit0: 0=c1--&gt;c2, 1=c2--&gt;c1</span><span class="sc0">

</span><span class="sc5">gen_note</span><span class="sc4">:</span><span class="sc0">               </span><span class="sc6">pusha</span><span class="sc0">
                        </span><span class="sc7">finit</span><span class="sc0">
</span><span class="sc5">__cycle</span><span class="sc4">:</span><span class="sc0">
</span><span class="sc1">; EAX &lt;-- ECX*freq/WAVE_FREQ*Pi*2</span><span class="sc0">
                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">eax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">ecx</span><span class="sc0">
                        </span><span class="sc6">imul</span><span class="sc0">    </span><span class="sc8">eax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">ebx</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc7">fild</span><span class="sc0">    </span><span class="sc10">dword</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc7">fldpi</span><span class="sc0">
                        </span><span class="sc7">fmul</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc5">WAVE_FREQ</span><span class="sc4">/</span><span class="sc2">2</span><span class="sc0">
                        </span><span class="sc7">fild</span><span class="sc0">    </span><span class="sc10">dword</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc7">fdiv</span><span class="sc0">
</span><span class="sc1">; EAX &lt;-- sin(EAX) * WAVE_AMP</span><span class="sc0">
                        </span><span class="sc7">fsin</span><span class="sc0">
                        </span><span class="sc7">fild</span><span class="sc0">    </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">+</span><span class="sc2">4</span><span class="sc4">]</span><span class="sc5">.pusha_esi</span><span class="sc0">
                        </span><span class="sc7">fmul</span><span class="sc0">
                        </span><span class="sc7">fistp</span><span class="sc0">   </span><span class="sc10">dword</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">eax</span><span class="sc0">
</span><span class="sc9">IFDEF</span><span class="sc0">   </span><span class="sc5">USE_FADE</span><span class="sc0">
</span><span class="sc1">; chan1=EAX*ECX/ECX0,</span><span class="sc0">
</span><span class="sc1">; chan2=EAX*(ECX0-ECX)/EBP</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc6">imul</span><span class="sc0">    </span><span class="sc8">eax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">ecx</span><span class="sc0">
                        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc7">fild</span><span class="sc0">    </span><span class="sc10">dword</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc7">fild</span><span class="sc0">    </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">+</span><span class="sc2">8</span><span class="sc4">]</span><span class="sc5">.pusha_ecx</span><span class="sc0">
                        </span><span class="sc7">fdiv</span><span class="sc0">
                        </span><span class="sc7">fistp</span><span class="sc0">   </span><span class="sc10">dword</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc6">add</span><span class="sc0">     </span><span class="sc8">ax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">stosw</span><span class="sc0">
                        </span><span class="sc6">sub</span><span class="sc0">     </span><span class="sc4">[</span><span class="sc8">esp</span><span class="sc4">],</span><span class="sc0"> </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">eax</span><span class="sc0">
                        </span><span class="sc6">test</span><span class="sc0">    </span><span class="sc8">ebp</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc0">          </span><span class="sc1">; note#</span><span class="sc0">
                        </span><span class="sc6">jnz</span><span class="sc0">     </span><span class="sc5">__skipxchg</span><span class="sc0">
                        </span><span class="sc6">xchg</span><span class="sc0">    </span><span class="sc8">ax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">-</span><span class="sc2">2</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">add</span><span class="sc0">     </span><span class="sc8">ax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">]</span><span class="sc0">
</span><span class="sc5">__skipxchg</span><span class="sc4">:</span><span class="sc0">             </span><span class="sc6">stosw</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
                        </span><span class="sc6">add</span><span class="sc0">     </span><span class="sc8">ax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">stosw</span><span class="sc0">                   </span><span class="sc1">; channel 1</span><span class="sc0">
                        </span><span class="sc6">add</span><span class="sc0">     </span><span class="sc8">ax</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">stosw</span><span class="sc0">                   </span><span class="sc1">; channel 2</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">
                        </span><span class="sc6">loop</span><span class="sc0">    </span><span class="sc5">__cycle</span><span class="sc0">
                        </span><span class="sc6">popa</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc5">wavehdr</span><span class="sc0">                 </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">byte</span><span class="sc0">
                        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc12">'RIFF'</span><span class="sc0">          </span><span class="sc1">; BYTE  riff_sign[4];   // ='RIFF'</span><span class="sc0">
                        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc5">wavehdrsize</span><span class="sc4">+</span><span class="sc5">wavedatasize</span><span class="sc4">-</span><span class="sc2">8</span><span class="sc0">  </span><span class="sc1">; DWORD riff_size;      // filesize-8=datasize+sizeof(wavehdr)-8=datasize+50</span><span class="sc0">
                        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc12">'WAVEfmt '</span><span class="sc0">      </span><span class="sc1">; BYTE  wavefmt_sign[8];// ='WAVEfmt '</span><span class="sc0">
                        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc2">10h</span><span class="sc0">             </span><span class="sc1">; DWORD wavefmt_size;   // sizeof(PCMWAVEFORMAT)=12h</span><span class="sc0">
                        </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc5">WAVE_FORMAT_PCM</span><span class="sc0"> </span><span class="sc1">; WORD  wFormatTag;     // type=WAVE_FORMAT_PCM=1</span><span class="sc0">
                        </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc5">WAVE_CHAN</span><span class="sc0">       </span><span class="sc1">; WORD  nChannels;      // channels=1/2</span><span class="sc0">
                        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc5">WAVE_FREQ</span><span class="sc0">       </span><span class="sc1">; DWORD nSamplesPerSec; // freq=11025/22050/44100</span><span class="sc0">
                        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc5">WAVE_FREQ</span><span class="sc4">*</span><span class="sc5">WAVE_BLOCK</span><span class="sc0">    </span><span class="sc1">; DWORD nBytesPerSec;   // bytespersecond=freq*channels*bitrate/8=176400</span><span class="sc0">
                        </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc5">WAVE_BLOCK</span><span class="sc0">      </span><span class="sc1">; WORD  nBlockAlign;    // =1/2/4</span><span class="sc0">
                        </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc5">WAVE_BITRATE</span><span class="sc0">    </span><span class="sc1">; WORD  wBitsPerSample; // =8/16</span><span class="sc0">
                        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc12">'data'</span><span class="sc0">          </span><span class="sc1">; BYTE  data_sign[4];   // ='data'</span><span class="sc0">
                        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc5">wavedatasize</span><span class="sc0">    </span><span class="sc1">; DWORD data_size;      // =datasize</span><span class="sc0">
</span><span class="sc5">wavehdrsize</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">$</span><span class="sc4">-</span><span class="sc5">wavehdr</span><span class="sc0">

</span><span class="sc1">; action: generate music in PCM format</span><span class="sc0">
</span><span class="sc1">; input:  EDI=data ptr</span><span class="sc0">

</span><span class="sc9">IFDEF</span><span class="sc0">   </span><span class="sc5">USE_USSR</span><span class="sc0">

</span><span class="sc5">gen_wavedata</span><span class="sc4">:</span><span class="sc0">           </span><span class="sc6">xor</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">edx</span><span class="sc0">        </span><span class="sc1">; note#</span><span class="sc0">

</span><span class="sc5">__cycle</span><span class="sc4">:</span><span class="sc0">                </span><span class="sc5">getofs</span><span class="sc0">  </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_index</span><span class="sc0">
                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">cl</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">edx</span><span class="sc4">]</span><span class="sc0">

                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">cl</span><span class="sc0">
                        </span><span class="sc6">shr</span><span class="sc0">     </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc0">
                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">word</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">ebx</span><span class="sc4">*</span><span class="sc2">2</span><span class="sc4">+</span><span class="sc5">snd_freq</span><span class="sc4">-</span><span class="sc5">snd_index</span><span class="sc4">]</span><span class="sc0">

                        </span><span class="sc6">and</span><span class="sc0">     </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">15</span><span class="sc0">
                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">ecx</span><span class="sc4">+</span><span class="sc5">snd_delay</span><span class="sc4">-</span><span class="sc5">snd_index</span><span class="sc4">]</span><span class="sc0">

                        </span><span class="sc6">imul</span><span class="sc0">    </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_delay_mult</span><span class="sc4">*</span><span class="sc5">WAVE_FREQ</span><span class="sc4">/</span><span class="sc2">1000</span><span class="sc0">

                        </span><span class="sc6">or</span><span class="sc0">      </span><span class="sc8">bl</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">bl</span><span class="sc0">
                        </span><span class="sc6">jz</span><span class="sc0">      </span><span class="sc5">__skip1</span><span class="sc0">
                        </span><span class="sc6">inc</span><span class="sc0">     </span><span class="sc8">ebp</span><span class="sc0">                     </span><span class="sc1">; non-zero note#</span><span class="sc0">

                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">WAVE_AMP</span><span class="sc4">*</span><span class="sc2">2</span><span class="sc4">/</span><span class="sc2">3</span><span class="sc0">
                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">gen_note</span><span class="sc0">
                        </span><span class="sc6">shr</span><span class="sc0">     </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc0">
                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">WAVE_AMP</span><span class="sc4">/</span><span class="sc2">3</span><span class="sc0">
                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">gen_note</span><span class="sc0">
</span><span class="sc5">__skip1</span><span class="sc4">:</span><span class="sc0">

</span><span class="sc1">;                       mov     esi, WAVE_AMP*1/3</span><span class="sc0">
</span><span class="sc1">;                       mov     ebx, 3300</span><span class="sc0">
</span><span class="sc1">;                       call    gen_note</span><span class="sc0">

                        </span><span class="sc6">lea</span><span class="sc0">     </span><span class="sc8">edi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">+</span><span class="sc8">ecx</span><span class="sc4">*</span><span class="sc2">4</span><span class="sc4">]</span><span class="sc0">

                        </span><span class="sc6">inc</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc0">
                        </span><span class="sc6">cmp</span><span class="sc0">     </span><span class="sc8">dl</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_notes</span><span class="sc0">
                        </span><span class="sc6">jb</span><span class="sc0">      </span><span class="sc5">__cycle</span><span class="sc0">

                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc5">snd_index</span><span class="sc0">               </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">byte</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">07h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">72h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">62h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">41h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">52h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">11h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">11h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">22h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">21h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">42h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">41h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">62h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">93h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc2">0A2h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">91h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">92h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">82h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">72h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">62h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">41h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">52h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">11h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">52h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">02h</span><span class="sc4">,</span><span class="sc2">0A4h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">91h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">93h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">53h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">01h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">89h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">51h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">73h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">31h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">34h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">01h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">     </span><span class="sc2">0B4h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">01h</span><span class="sc4">,</span><span class="sc2">0B9h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">05h</span><span class="sc4">,</span><span class="sc2">0A1h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">91h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">91h</span><span class="sc4">,</span><span class="sc2">0A3h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">84h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">01h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">99h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">81h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">83h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">64h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">01h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">82h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">71h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">61h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">52h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">11h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">11h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">54h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">62h</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">72h</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0Ah</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">84h</span><span class="sc0">
</span><span class="sc5">snd_notes</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">$</span><span class="sc4">-</span><span class="sc5">snd_index</span><span class="sc0">

</span><span class="sc5">snd_freq</span><span class="sc0">                </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">word</span><span class="sc0">

</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">525</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">589</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">661</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">700</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">786</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">882</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">990</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1049</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1178</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1323</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1400</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1572</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1765</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1982</span><span class="sc0">

</span><span class="sc5">snd_delay_mult</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">55</span><span class="sc0">
</span><span class="sc5">snd_delay</span><span class="sc0">               </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">byte</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">12</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">16</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">20</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">14</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc0">

</span><span class="sc9">ENDIF</span><span class="sc0">   </span><span class="sc1">; USE_USSR</span><span class="sc0">
</span><span class="sc9">IFDEF</span><span class="sc0">   </span><span class="sc5">USE_HOLMS</span><span class="sc0">

</span><span class="sc5">gen_wavedata</span><span class="sc4">:</span><span class="sc0">           </span><span class="sc6">xor</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">edx</span><span class="sc0">                </span><span class="sc1">; note#</span><span class="sc0">

</span><span class="sc5">__cycle1</span><span class="sc4">:</span><span class="sc0">               </span><span class="sc5">getofs</span><span class="sc0">  </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_freq</span><span class="sc0">
                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">edx</span><span class="sc4">]</span><span class="sc0"> </span><span class="sc1">; index</span><span class="sc0">
                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ebx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">word</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">ebx</span><span class="sc4">*</span><span class="sc2">2</span><span class="sc4">+</span><span class="sc5">snd_freq_table</span><span class="sc4">-</span><span class="sc5">snd_freq</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">movzx</span><span class="sc0">   </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0"> </span><span class="sc9">ptr</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">esi</span><span class="sc4">+</span><span class="sc8">edx</span><span class="sc4">+</span><span class="sc5">snd_delay</span><span class="sc4">-</span><span class="sc5">snd_freq</span><span class="sc4">]</span><span class="sc0">
                        </span><span class="sc6">imul</span><span class="sc0">    </span><span class="sc8">ecx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_delay_mult</span><span class="sc4">*</span><span class="sc5">WAVE_FREQ</span><span class="sc4">/</span><span class="sc2">1000</span><span class="sc0">
                        </span><span class="sc6">or</span><span class="sc0">      </span><span class="sc8">bl</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">bl</span><span class="sc0">
                        </span><span class="sc6">jz</span><span class="sc0">      </span><span class="sc5">__skip1</span><span class="sc0">
                        </span><span class="sc6">inc</span><span class="sc0">     </span><span class="sc8">ebp</span><span class="sc0">                     </span><span class="sc1">; non-zero note#</span><span class="sc0">

                        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">esi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">WAVE_AMP</span><span class="sc0">
                        </span><span class="sc6">call</span><span class="sc0">    </span><span class="sc5">gen_note</span><span class="sc0">
</span><span class="sc5">__skip1</span><span class="sc4">:</span><span class="sc0">

</span><span class="sc1">;                       mov     esi, WAVE_AMP*1/3</span><span class="sc0">
</span><span class="sc1">;                       mov     ebx, 3300</span><span class="sc0">
</span><span class="sc1">;                       call    gen_note</span><span class="sc0">

                        </span><span class="sc6">lea</span><span class="sc0">     </span><span class="sc8">edi</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">[</span><span class="sc8">edi</span><span class="sc4">+</span><span class="sc8">ecx</span><span class="sc4">*</span><span class="sc2">4</span><span class="sc4">]</span><span class="sc0">

                        </span><span class="sc6">inc</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc0">
                        </span><span class="sc6">cmp</span><span class="sc0">     </span><span class="sc8">edx</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">snd_notes</span><span class="sc0">
                        </span><span class="sc6">jb</span><span class="sc0">      </span><span class="sc5">__cycle1</span><span class="sc0">
                        </span><span class="sc6">retn</span><span class="sc0">

</span><span class="sc5">snd_notes</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">110</span><span class="sc0">

</span><span class="sc5">snd_freq</span><span class="sc0">                </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">byte</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">6</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">4</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">3</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">9</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">8</span><span class="sc0">

</span><span class="sc5">snd_freq_table</span><span class="sc0">          </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">word</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">        </span><span class="sc2">0</span><span class="sc0">     </span><span class="sc1">; 0</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">262</span><span class="sc0">     </span><span class="sc1">; 1</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">350</span><span class="sc0">     </span><span class="sc1">; 2</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">440</span><span class="sc0">     </span><span class="sc1">; 3</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">466</span><span class="sc0">     </span><span class="sc1">; 4</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">524</span><span class="sc0">     </span><span class="sc1">; 5</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">584</span><span class="sc0">     </span><span class="sc1">; 6</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">660</span><span class="sc0">     </span><span class="sc1">; 7</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">700</span><span class="sc0">     </span><span class="sc1">; 8</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">784</span><span class="sc0">     </span><span class="sc1">; 9</span><span class="sc0">
</span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">880</span><span class="sc0">     </span><span class="sc1">; 10</span><span class="sc0">

</span><span class="sc5">snd_delay_mult</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">55</span><span class="sc0">

</span><span class="sc5">snd_delay</span><span class="sc0">               </span><span class="sc9">label</span><span class="sc0">   </span><span class="sc10">byte</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc9">db</span><span class="sc0">       </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc2">10</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">5</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">2</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">7</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc4">,</span><span class="sc2">20</span><span class="sc0">

</span><span class="sc9">ENDIF</span><span class="sc0">   </span><span class="sc1">; USE_HOLMS</span><span class="sc0">

                        </span><span class="sc5">PLUGIN_END</span><span class="sc0">
</span></div></body>
</html>
