<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc2 {
	color: #FF8000;
}
.sc4 {
	font-weight: bold;
	color: #000080;
}
.sc5 {
}
.sc9 {
	color: #0080FF;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc0">
</span><span class="sc5">IFSMgr_Device_ID</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000040h</span><span class="sc0"> </span><span class="sc1">; Installable File System Manager</span><span class="sc0">
</span><span class="sc5">IFSMgr_Init_Order</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010000h</span><span class="sc0"> </span><span class="sc4">+</span><span class="sc0"> </span><span class="sc5">V86MMGR_Init_Order</span><span class="sc0">
</span><span class="sc5">FSD_Init_Order</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000100h</span><span class="sc0"> </span><span class="sc4">+</span><span class="sc0"> </span><span class="sc5">IFSMgr_Init_Order</span><span class="sc0">


</span><span class="sc5">ubuffer_t</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">pos_t</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">uid_t</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">db</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">sfn_t</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dw</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">$F</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">

</span><span class="sc5">path_t</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">string_t</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">pid_t</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">rh_t</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">fh_t</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">vfunc_t</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">$P</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">$I</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc9">dd</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">fsdwork</span><span class="sc0"> </span><span class="sc9">struc</span><span class="sc0">
        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc2">16</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">fsdwork</span><span class="sc0"> </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc5">IFS_VERSION</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0030Ah</span><span class="sc0">
</span><span class="sc5">IFS_REVISION</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">


</span><span class="sc1">;*      Maximum path length - excluding nul</span><span class="sc0">
</span><span class="sc5">MAX_PATH</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">260</span><span class="sc0">     </span><span class="sc1">; Maximum path length - including nul</span><span class="sc0">

</span><span class="sc1">; Maximum length for a LFN name element - excluding nul</span><span class="sc0">
</span><span class="sc5">LFNMAXNAMELEN</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">255</span><span class="sc0">


</span><span class="sc5">MAXIMUM_USERID</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; max. # of users that can be logged</span><span class="sc0">
                                        </span><span class="sc1">; on at the same time.  Ir_user must</span><span class="sc0">
                                        </span><span class="sc1">; always be less than MAXIMUM_USERID.</span><span class="sc0">
</span><span class="sc5">NULL_USER_ID</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; special user id for operations when</span><span class="sc0">
                                        </span><span class="sc1">; not logged on.</span><span class="sc0">

</span><span class="sc1">; Status indications returned as errors:</span><span class="sc0">
</span><span class="sc5">STATUS_PENDING</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">-</span><span class="sc2">1</span><span class="sc0">      </span><span class="sc1">; request is pending</span><span class="sc0">
</span><span class="sc5">STATUS_RAWLOCK</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">-</span><span class="sc2">2</span><span class="sc0">      </span><span class="sc1">; rawlock active on session</span><span class="sc0">
                                        </span><span class="sc1">; (only returned for async requests,</span><span class="sc0">
                                        </span><span class="sc1">;  sync requests will wait for the raw</span><span class="sc0">
                                        </span><span class="sc1">;  lock to be released)</span><span class="sc0">
</span><span class="sc5">STATUS_BUSY</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">-</span><span class="sc2">3</span><span class="sc0">      </span><span class="sc1">; request can't be started because of</span><span class="sc0">
                                        </span><span class="sc1">; serialization.</span><span class="sc0">

</span><span class="sc1">;*      ANYPROID - Any Provider ID</span><span class="sc0">
</span><span class="sc5">ANYPROID</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">-</span><span class="sc2">1</span><span class="sc0">


</span><span class="sc1">;*      Common function defintions for NetFunction</span><span class="sc0">
</span><span class="sc5">NF_PROCEXIT</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0111Dh</span><span class="sc0">  </span><span class="sc1">; Process Exit sent (ID = ANYPROID)</span><span class="sc0">
</span><span class="sc5">NF_DRIVEUSE</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00001h</span><span class="sc0">  </span><span class="sc1">; Drive Use Created (ID = ID of owner FSD)</span><span class="sc0">
</span><span class="sc5">NF_DRIVEUNUSE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00002h</span><span class="sc0">  </span><span class="sc1">; Drive Use Broken (ID = ID of owner FSD)</span><span class="sc0">
</span><span class="sc5">NF_GETPRINTJOBID</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00003h</span><span class="sc0">  </span><span class="sc1">; Get Print Job ID</span><span class="sc0">
                                          </span><span class="sc1">; ir_fh - ptr to master file info</span><span class="sc0">
                                          </span><span class="sc1">; ir_data - ptr to data buffer</span><span class="sc0">
                                          </span><span class="sc1">; ir_length - IN: buffer size</span><span class="sc0">
                                          </span><span class="sc1">;             OUT: amount transfered</span><span class="sc0">
                                          </span><span class="sc1">; ir_SFN - SFN of file handle</span><span class="sc0">
</span><span class="sc5">NF_PRINTERUSE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00004h</span><span class="sc0">  </span><span class="sc1">; Printer Use Created (ID = ID of owner FSD)</span><span class="sc0">
</span><span class="sc5">NF_PRINTERUNUSE</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00005h</span><span class="sc0">  </span><span class="sc1">; Printer Use Broken (ID = ID of owner FSD)</span><span class="sc0">
</span><span class="sc5">NF_NetSetUserName</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">01181h</span><span class="sc0">

</span><span class="sc1">;* Flags passed to NetFunction</span><span class="sc0">
</span><span class="sc5">WIN32_CALLFLAG</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; call is Win32 api</span><span class="sc0">


</span><span class="sc1">;* dos_time - DOS time &amp; date format</span><span class="sc0">
</span><span class="sc1">;typedef struct dos_time dos_time;</span><span class="sc0">
</span><span class="sc5">dos_time</span><span class="sc0">        </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">dt_time</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">dt_date</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">dos_time</span><span class="sc0">        </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc5">aux_data</span><span class="sc0"> </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">aux_dword</span><span class="sc0">     </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">aux_data</span><span class="sc0"> </span><span class="sc9">ends</span><span class="sc0">
</span><span class="sc5">aux_ul</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_ui</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_vf</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_hf</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_ptr</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_str</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_pp</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_buf</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">
</span><span class="sc5">aux_dt</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">aux_dword</span><span class="sc0">


</span><span class="sc5">ioreq</span><span class="sc0">   </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_length</span><span class="sc0">   </span><span class="sc5">$I</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; length of user buffer (eCX)</span><span class="sc0">
  </span><span class="sc5">ir_flags</span><span class="sc0">      </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; misc. status flags (AL)</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_user</span><span class="sc0">     </span><span class="sc5">uid_t</span><span class="sc0">   </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; user ID for this request</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_sfn</span><span class="sc0">      </span><span class="sc5">sfn_t</span><span class="sc0">   </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; System File Number of file handle</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_pid</span><span class="sc0">      </span><span class="sc5">pid_t</span><span class="sc0">   </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; process ID of requesting task</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_ppath</span><span class="sc0">    </span><span class="sc5">path_t</span><span class="sc0">  </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; unicode pathname</span><span class="sc0">
  </span><span class="sc5">ir_aux1</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; secondary user data buffer (CurDTA)</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_data</span><span class="sc0">   </span><span class="sc5">ubuffer_t</span><span class="sc0"> </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; ptr to user data buffer (DS:eDX)</span><span class="sc0">
  </span><span class="sc5">ir_options</span><span class="sc0">    </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; request handling options</span><span class="sc0">
  </span><span class="sc5">ir_error</span><span class="sc0">      </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; error code (0 if OK)</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_rh</span><span class="sc0">       </span><span class="sc5">rh_t</span><span class="sc0">    </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; resource handle</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_fh</span><span class="sc0">       </span><span class="sc5">fh_t</span><span class="sc0">    </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; file (or find) handle</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_pos</span><span class="sc0">      </span><span class="sc5">pos_t</span><span class="sc0">   </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; file position for request</span><span class="sc0">
  </span><span class="sc5">ir_aux2</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; misc. extra API parameters</span><span class="sc0">
  </span><span class="sc5">ir_aux3</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; misc. extra API parameters</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">ir_pev</span><span class="sc0">      </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; ptr to IFSMgr event for async requests</span><span class="sc0">
  </span><span class="sc5">ir_fsd</span><span class="sc0">        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">fsdwork</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">  </span><span class="sc1">; Provider work space</span><span class="sc0">
</span><span class="sc5">ioreq</span><span class="sc0">   </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">; misc. fields overlayed with other ioreq members:</span><span class="sc0">
</span><span class="sc5">ir_size</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_pos</span><span class="sc0">
</span><span class="sc5">ir_conflags</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_pos</span><span class="sc0">  </span><span class="sc1">; flags for connect</span><span class="sc0">
</span><span class="sc5">ir_attr2</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_pos</span><span class="sc0">  </span><span class="sc1">; destination attributes for Rename</span><span class="sc0">
</span><span class="sc5">ir_attr</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_length</span><span class="sc0"> </span><span class="sc1">; DOS file attribute info</span><span class="sc0">
</span><span class="sc5">ir_pathSkip</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_length</span><span class="sc0"> </span><span class="sc1">; # of path elements consumed by Connect</span><span class="sc0">
</span><span class="sc5">ir_lananum</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_sfn</span><span class="sc0">  </span><span class="sc1">; LanA to Connect on (0xFF for any net)</span><span class="sc0">
</span><span class="sc5">ir_tuna</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_sfn</span><span class="sc0">  </span><span class="sc1">; Mount: FSD authorises IFSMGR tunneling</span><span class="sc0">
</span><span class="sc5">ir_ptuninfo</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_data</span><span class="sc0"> </span><span class="sc1">; Rename/Create: advisory tunneling info ptr</span><span class="sc0">

</span><span class="sc1">; Fields overlayed with ir_options:</span><span class="sc0">
</span><span class="sc5">ir_namelen</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_options</span><span class="sc0">
</span><span class="sc5">ir_sectors</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_options</span><span class="sc0">      </span><span class="sc1">; sectors per cluster</span><span class="sc0">
</span><span class="sc5">ir_status</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_options</span><span class="sc0">      </span><span class="sc1">; named pipe status</span><span class="sc0">

</span><span class="sc1">; Fields overlayed with ir_aux1:</span><span class="sc0">
</span><span class="sc5">ir_data2</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux1.aux_buf</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; secondary data buffer</span><span class="sc0">
</span><span class="sc5">ir_vfunc</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux1.aux_vf</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; volume function vector</span><span class="sc0">
</span><span class="sc5">ir_hfunc</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux1.aux_hf</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; file handle function vector</span><span class="sc0">
</span><span class="sc5">ir_ppath2</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux1.aux_pp</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; second pathname for Rename</span><span class="sc0">
</span><span class="sc5">ir_volh</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux1.aux_ul</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; VRP address for Mount</span><span class="sc0">

</span><span class="sc1">; Fields overlayed with ir_aux2:</span><span class="sc0">
</span><span class="sc5">ir_numfree</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ul</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; number of free clusters</span><span class="sc0">
</span><span class="sc5">ir_locklen</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ul</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; length of lock region</span><span class="sc0">
</span><span class="sc5">ir_msglen</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ui</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; length of current message (peek pipe)</span><span class="sc0">
                                                        </span><span class="sc1">; next msg length for mailslots</span><span class="sc0">
</span><span class="sc5">ir_dostime</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_dt</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; DOS file date &amp; time stamp</span><span class="sc0">
</span><span class="sc5">ir_timeout</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ul</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; timeout value in milliseconds</span><span class="sc0">
</span><span class="sc5">ir_password</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ptr</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; password for Connect</span><span class="sc0">
</span><span class="sc5">ir_drvh</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ptr</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; drive handle for Mount</span><span class="sc0">
</span><span class="sc5">ir_prtlen</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_dt.dt_time</span><span class="sc4">&gt;</span><span class="sc1">; length of printer setup string</span><span class="sc0">
</span><span class="sc5">ir_prtflag</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_dt.dt_date</span><span class="sc4">&gt;</span><span class="sc1">; printer flags</span><span class="sc0">
</span><span class="sc5">ir_firstclus</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ui</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; First cluster of file</span><span class="sc0">
</span><span class="sc5">ir_mntdrv</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ul</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">; driveletter for Mount</span><span class="sc0">
</span><span class="sc5">ir_cregptr</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_ptr</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; pointer to client registers</span><span class="sc0">
</span><span class="sc5">ir_uFName</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux2.aux_str</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; case preserved filename</span><span class="sc0">

</span><span class="sc1">; Fields overlayed with ir_aux3:</span><span class="sc0">
</span><span class="sc5">ir_upath</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux3.aux_str</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; pointer to unparsed pathname</span><span class="sc0">
</span><span class="sc5">ir_scratch</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;</span><span class="sc5">ir_aux3.aux_ptr</span><span class="sc4">&gt;</span><span class="sc0">       </span><span class="sc1">; scratch buffer for NetFunction calls</span><span class="sc0">

</span><span class="sc1">; Fields overlayed with ir_user:</span><span class="sc0">
</span><span class="sc5">ir_drivenum</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">ir_user</span><span class="sc0">         </span><span class="sc1">; Logical drive # (when mounting)</span><span class="sc0">


</span><span class="sc1">;* hndlfunc - I/O functions for file handles</span><span class="sc0">
</span><span class="sc5">NUM_HNDLMISC</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">8</span><span class="sc0">

</span><span class="sc1">;typedef struct hndlmisc hndlmisc;</span><span class="sc0">
</span><span class="sc5">hndlfunc</span><span class="sc0">        </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">hf_read</span><span class="sc0">     </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; file read handler function</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">hf_write</span><span class="sc0">    </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; file write handler function</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">hf_misc</span><span class="sc0">     </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; ptr to misc. function vector</span><span class="sc0">
</span><span class="sc5">hndlfunc</span><span class="sc0">        </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc5">hndlmisc</span><span class="sc0">        </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">hm_version</span><span class="sc0">    </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; IFS version #</span><span class="sc0">
  </span><span class="sc5">hm_revision</span><span class="sc0">   </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; IFS interface revision #</span><span class="sc0">
  </span><span class="sc5">hm_size</span><span class="sc0">       </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; # of entries in table</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">hm_func</span><span class="sc0">     </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc5">NUM_HNDLMISC</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">hndlmisc</span><span class="sc0">        </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc5">HM_SEEK</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; Seek file handle</span><span class="sc0">
</span><span class="sc5">HM_CLOSE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; close handle</span><span class="sc0">
</span><span class="sc5">HM_COMMIT</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; commit buffered data for handle</span><span class="sc0">
</span><span class="sc5">HM_FILELOCKS</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">       </span><span class="sc1">; lock/unlock byte range</span><span class="sc0">
</span><span class="sc5">HM_FILETIMES</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">       </span><span class="sc1">; get/set file modification time</span><span class="sc0">
</span><span class="sc5">HM_PIPEREQUEST</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">5</span><span class="sc0">       </span><span class="sc1">; named pipe operations</span><span class="sc0">
</span><span class="sc5">HM_HANDLEINFO</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">6</span><span class="sc0">       </span><span class="sc1">; get/set file information</span><span class="sc0">
</span><span class="sc5">HM_ENUMHANDLE</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">7</span><span class="sc0">       </span><span class="sc1">; enum filename from handle, lock info</span><span class="sc0">


</span><span class="sc1">;*      volfunc - volume based api fucntions</span><span class="sc0">
</span><span class="sc5">NUM_VOLFUNC</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">15</span><span class="sc0">

</span><span class="sc5">volfunc</span><span class="sc0">         </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">vfn_version</span><span class="sc0">   </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; IFS version #</span><span class="sc0">
  </span><span class="sc5">vfn_revision</span><span class="sc0">  </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; IFS interface revision #</span><span class="sc0">
  </span><span class="sc5">vfn_size</span><span class="sc0">      </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; # of entries in table</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">vfn_func</span><span class="sc0">    </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc5">NUM_VOLFUNC</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">     </span><span class="sc1">; volume base function handlers</span><span class="sc0">
</span><span class="sc5">volfunc</span><span class="sc0"> </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc5">VFN_DELETE</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; file delete</span><span class="sc0">
</span><span class="sc5">VFN_DIR</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; directory manipulation</span><span class="sc0">
</span><span class="sc5">VFN_FILEATTRIB</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; DOS file attribute manipulation</span><span class="sc0">
</span><span class="sc5">VFN_FLUSH</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">               </span><span class="sc1">; flush volume</span><span class="sc0">
</span><span class="sc5">VFN_GETDISKINFO</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">               </span><span class="sc1">; query volume free space</span><span class="sc0">
</span><span class="sc5">VFN_OPEN</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">5</span><span class="sc0">               </span><span class="sc1">; open file</span><span class="sc0">
</span><span class="sc5">VFN_RENAME</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">6</span><span class="sc0">               </span><span class="sc1">; rename path</span><span class="sc0">
</span><span class="sc5">VFN_SEARCH</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">7</span><span class="sc0">               </span><span class="sc1">; search for names</span><span class="sc0">
</span><span class="sc5">VFN_QUERY</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">8</span><span class="sc0">               </span><span class="sc1">; query resource info (network only)</span><span class="sc0">
</span><span class="sc5">VFN_DISCONNECT</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">9</span><span class="sc0">               </span><span class="sc1">; disconnect from resource (net only)</span><span class="sc0">
</span><span class="sc5">VFN_UNCPIPEREQ</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">10</span><span class="sc0">              </span><span class="sc1">; UNC path based named pipe operations</span><span class="sc0">
</span><span class="sc5">VFN_IOCTL16DRIVE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">11</span><span class="sc0">              </span><span class="sc1">; drive based 16 bit IOCTL requests</span><span class="sc0">
</span><span class="sc5">VFN_GETDISKPARMS</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">12</span><span class="sc0">              </span><span class="sc1">; get DPB</span><span class="sc0">
</span><span class="sc5">VFN_FINDOPEN</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">13</span><span class="sc0">              </span><span class="sc1">; open  an LFN file search</span><span class="sc0">
</span><span class="sc5">VFN_DASDIO</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">14</span><span class="sc0">              </span><span class="sc1">; direct volume access</span><span class="sc0">


</span><span class="sc1">;* IFS Function IDs passed to IFSMgr_CallProvider</span><span class="sc0">
</span><span class="sc5">IFSFN_READ</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; read a file</span><span class="sc0">
</span><span class="sc5">IFSFN_WRITE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; write a file</span><span class="sc0">
</span><span class="sc5">IFSFN_FINDNEXT</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; LFN handle based Find Next</span><span class="sc0">
</span><span class="sc5">IFSFN_FCNNEXT</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">               </span><span class="sc1">; Find Next Change Notify</span><span class="sc0">
</span><span class="sc5">IFSFN_SEEK</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">10</span><span class="sc0">              </span><span class="sc1">; Seek file handle</span><span class="sc0">
</span><span class="sc5">IFSFN_CLOSE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">11</span><span class="sc0">              </span><span class="sc1">; close handle</span><span class="sc0">
</span><span class="sc5">IFSFN_COMMIT</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">12</span><span class="sc0">              </span><span class="sc1">; commit buffered data for handle</span><span class="sc0">
</span><span class="sc5">IFSFN_FILELOCKS</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">13</span><span class="sc0">              </span><span class="sc1">; lock/unlock byte range</span><span class="sc0">
</span><span class="sc5">IFSFN_FILETIMES</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">14</span><span class="sc0">              </span><span class="sc1">; get/set file modification time</span><span class="sc0">
</span><span class="sc5">IFSFN_PIPEREQUEST</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">   </span><span class="sc2">15</span><span class="sc0">              </span><span class="sc1">; named pipe operations</span><span class="sc0">
</span><span class="sc5">IFSFN_HANDLEINFO</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">16</span><span class="sc0">              </span><span class="sc1">; get/set file information</span><span class="sc0">
</span><span class="sc5">IFSFN_ENUMHANDLE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">17</span><span class="sc0">              </span><span class="sc1">; enum file handle information</span><span class="sc0">
</span><span class="sc5">IFSFN_FINDCLOSE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">18</span><span class="sc0">              </span><span class="sc1">; LFN find close</span><span class="sc0">
</span><span class="sc5">IFSFN_FCNCLOSE</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">19</span><span class="sc0">              </span><span class="sc1">; Find Change Notify Close</span><span class="sc0">
</span><span class="sc5">IFSFN_CONNECT</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">30</span><span class="sc0">              </span><span class="sc1">; connect or mount a resource</span><span class="sc0">
</span><span class="sc5">IFSFN_DELETE</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">31</span><span class="sc0">              </span><span class="sc1">; file delete</span><span class="sc0">
</span><span class="sc5">IFSFN_DIR</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">32</span><span class="sc0">              </span><span class="sc1">; directory manipulation</span><span class="sc0">
</span><span class="sc5">IFSFN_FILEATTRIB</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">33</span><span class="sc0">              </span><span class="sc1">; DOS file attribute manipulation</span><span class="sc0">
</span><span class="sc5">IFSFN_FLUSH</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">34</span><span class="sc0">              </span><span class="sc1">; flush volume</span><span class="sc0">
</span><span class="sc5">IFSFN_GETDISKINFO</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">   </span><span class="sc2">35</span><span class="sc0">              </span><span class="sc1">; query volume free space</span><span class="sc0">
</span><span class="sc5">IFSFN_OPEN</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">36</span><span class="sc0">              </span><span class="sc1">; open file</span><span class="sc0">
</span><span class="sc5">IFSFN_RENAME</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">37</span><span class="sc0">              </span><span class="sc1">; rename path</span><span class="sc0">
</span><span class="sc5">IFSFN_SEARCH</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">38</span><span class="sc0">              </span><span class="sc1">; search for names</span><span class="sc0">
</span><span class="sc5">IFSFN_QUERY</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">39</span><span class="sc0">              </span><span class="sc1">; query resource info (network only)</span><span class="sc0">
</span><span class="sc5">IFSFN_DISCONNECT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">40</span><span class="sc0">              </span><span class="sc1">; disconnect from resource (net only)</span><span class="sc0">
</span><span class="sc5">IFSFN_UNCPIPEREQ</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">41</span><span class="sc0">              </span><span class="sc1">; UNC path based named pipe operations</span><span class="sc0">
</span><span class="sc5">IFSFN_IOCTL16DRIVE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">  </span><span class="sc2">42</span><span class="sc0">              </span><span class="sc1">; drive based 16 bit IOCTL requests</span><span class="sc0">
</span><span class="sc5">IFSFN_GETDISKPARMS</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">  </span><span class="sc2">43</span><span class="sc0">              </span><span class="sc1">; get DPB</span><span class="sc0">
</span><span class="sc5">IFSFN_FINDOPEN</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">44</span><span class="sc0">              </span><span class="sc1">; open  an LFN file search</span><span class="sc0">
</span><span class="sc5">IFSFN_DASDIO</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">45</span><span class="sc0">              </span><span class="sc1">; direct volume access</span><span class="sc0">


</span><span class="sc1">;*      Resource types passed in on the File Hook:</span><span class="sc0">
</span><span class="sc5">IFSFH_RES_UNC</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; UNC resource</span><span class="sc0">
</span><span class="sc5">IFSFH_RES_NETWORK</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">    </span><span class="sc1">; Network drive connection</span><span class="sc0">
</span><span class="sc5">IFSFH_RES_LOCAL</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; Local drive</span><span class="sc0">
</span><span class="sc5">IFSFH_RES_CFSD</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080h</span><span class="sc0">    </span><span class="sc1">; Character FSD</span><span class="sc0">


</span><span class="sc1">;* values for ir_options to Connect:</span><span class="sc0">
</span><span class="sc1">; Note that only one of RESOPT_UNC_REQUEST, RESOPT_DEV_ATTACH, and</span><span class="sc0">
</span><span class="sc1">; RESOPT_UNC_CONNECT may be set at once.</span><span class="sc0">
</span><span class="sc5">RESOPT_UNC_REQUEST</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; UNC-style path based request</span><span class="sc0">
</span><span class="sc5">RESOPT_DEV_ATTACH</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; explicit redirection of a device</span><span class="sc0">
</span><span class="sc5">RESOPT_UNC_CONNECT</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; explicit UNC-style use</span><span class="sc0">
</span><span class="sc5">RESOPT_DISCONNECTED</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">    </span><span class="sc1">; Set up connection disconnected</span><span class="sc0">
                                                </span><span class="sc1">; (Don't touch net)</span><span class="sc0">
</span><span class="sc5">RESOPT_NO_CREATE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; don't create a new resource</span><span class="sc0">
</span><span class="sc5">RESOPT_STATIC</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020h</span><span class="sc0">    </span><span class="sc1">; don't allow ui to remove</span><span class="sc0">


</span><span class="sc1">;* values for ir_flags to Connect:</span><span class="sc0">
</span><span class="sc5">RESTYPE_WILD</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; wild card service type</span><span class="sc0">
</span><span class="sc5">RESTYPE_DISK</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; disk resource</span><span class="sc0">
</span><span class="sc5">RESTYPE_SPOOL</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; spooled printer</span><span class="sc0">
</span><span class="sc5">RESTYPE_CHARDEV</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">               </span><span class="sc1">; character device</span><span class="sc0">
</span><span class="sc5">RESTYPE_IPC</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">               </span><span class="sc1">; interprocess communication</span><span class="sc0">
</span><span class="sc5">FIRST_RESTYPE</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">RESTYPE_DISK</span><span class="sc0">
</span><span class="sc5">LAST_RESTYPE</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">RESTYPE_IPC</span><span class="sc0">


</span><span class="sc1">;* values for ir_options to Close *</span><span class="sc0">
</span><span class="sc5">RESOPT_NO_IO</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; no I/O allowed during the operation</span><span class="sc0">


</span><span class="sc1">;* values for ir_flags for FSD operations</span><span class="sc0">
</span><span class="sc5">IR_FSD_MOUNT</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; mount volume</span><span class="sc0">
</span><span class="sc5">IR_FSD_DISMOUNT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; dismount volume</span><span class="sc0">
</span><span class="sc5">IR_FSD_VERIFY</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; verify volume</span><span class="sc0">
</span><span class="sc5">IR_FSD_UNLOAD</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">               </span><span class="sc1">; unload volume</span><span class="sc0">
</span><span class="sc5">IR_FSD_MOUNT_CHILD</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">  </span><span class="sc2">4</span><span class="sc0">               </span><span class="sc1">; mount child volume</span><span class="sc0">
</span><span class="sc5">IR_FSD_MAP_DRIVE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">5</span><span class="sc0">               </span><span class="sc1">; change drive mapping</span><span class="sc0">
</span><span class="sc5">IR_FSD_UNMAP_DRIVE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">  </span><span class="sc2">6</span><span class="sc0">               </span><span class="sc1">; reset drive mapping</span><span class="sc0">


</span><span class="sc1">;* Value for ir_error from IR_FSD_MOUNT if volume exists *</span><span class="sc0">
</span><span class="sc5">ERROR_IFSVOL_EXISTS</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">284</span><span class="sc0">     </span><span class="sc1">; mounted volume already exists</span><span class="sc0">


</span><span class="sc1">;* Values returned in ir_tuna from IR_FSD_MOUNT (default IR_TUNA_NOTUNNEL)</span><span class="sc0">
</span><span class="sc5">IR_TUNA_NOTUNNEL</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; Disable IFSMGR tunneling on volume</span><span class="sc0">
</span><span class="sc5">IR_TUNA_FSDTUNNEL</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; FSD implements tunneling itself</span><span class="sc0">
</span><span class="sc5">IR_TUNA_IFSTUNNEL</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; FSD requests IFSMGR tunneling support</span><span class="sc0">


</span><span class="sc1">;* Values for IFSMgr_PNPVolumeEvent</span><span class="sc0">
</span><span class="sc5">PNPE_SUCCESS</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">
</span><span class="sc5">PNPE_QUERY_ACCEPTED</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">
</span><span class="sc5">PNPE_QUERY_REFUSED</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">
</span><span class="sc5">PNPE_BAD_ARGS</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">
</span><span class="sc5">PNPE_UNDEFINED</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0FFh</span><span class="sc0">


</span><span class="sc1">;* Type values for IFSMgr_PNPEvent</span><span class="sc0">
</span><span class="sc5">PNPT_VOLUME</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010000000h</span><span class="sc0">
</span><span class="sc5">PNPT_NET</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020000000h</span><span class="sc0">
</span><span class="sc5">PNPT_MASK</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0F0000000h</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options returned from QueryResource:</span><span class="sc0">
</span><span class="sc5">RESSTAT_OK</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; connection to resource is valid</span><span class="sc0">
</span><span class="sc5">RESSTAT_PAUSED</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; paused by workstation</span><span class="sc0">
</span><span class="sc5">RESSTAT_DISCONN</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; disconnected</span><span class="sc0">
</span><span class="sc5">RESSTAT_ERROR</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">               </span><span class="sc1">; cannot be reconnected</span><span class="sc0">
</span><span class="sc5">RESSTAT_CONN</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">               </span><span class="sc1">; first connection in progress</span><span class="sc0">
</span><span class="sc5">RESSTAT_RECONN</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">5</span><span class="sc0">               </span><span class="sc1">; reconnection in progress</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags to HM_CLOSE:</span><span class="sc0">
</span><span class="sc5">CLOSE_HANDLE</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; only closing a handle</span><span class="sc0">
</span><span class="sc5">CLOSE_FOR_PROCESS</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">   </span><span class="sc2">1</span><span class="sc0">               </span><span class="sc1">; last close of SFN for this process</span><span class="sc0">
</span><span class="sc5">CLOSE_FINAL</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; final close of SFN for system</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options to HM_CLOSE, HM_COMMIT, hf_read, hf_write:</span><span class="sc0">
</span><span class="sc5">FILE_NO_LAST_ACCESS_DATE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; do not update last access date</span><span class="sc0">
</span><span class="sc5">FILE_CLOSE_FOR_LEVEL4_LOCK</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">  </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; special close on a level 4 lock</span><span class="sc0">
</span><span class="sc5">FILE_COMMIT_ASYNC</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; commit async instead of sync</span><span class="sc0">
</span><span class="sc5">FILE_FIND_RESTART</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">040h</span><span class="sc0">    </span><span class="sc1">; set for findnext w/key</span><span class="sc0">
</span><span class="sc5">IOOPT_PRT_SPEC</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080h</span><span class="sc0">    </span><span class="sc1">; ir_options flag for int17 writes</span><span class="sc0">


</span><span class="sc1">;*      Values for ir_flags to VFN_DIR:</span><span class="sc0">
</span><span class="sc5">CREATE_DIR</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc5">DELETE_DIR</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">
</span><span class="sc5">CHECK_DIR</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc5">QUERY83_DIR</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">
</span><span class="sc5">QUERYLONG_DIR</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">


</span><span class="sc1">;*      ir_flags values for HM_FILELOCKS:</span><span class="sc0">
</span><span class="sc5">LOCK_REGION</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">                       </span><span class="sc1">; lock specified file region</span><span class="sc0">
</span><span class="sc5">UNLOCK_REGION</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">                       </span><span class="sc1">; unlock region</span><span class="sc0">

</span><span class="sc1">; Note: these values are also used by the sharing services</span><span class="sc0">
</span><span class="sc1">;* ir_options values for HM_FILELOCKS:</span><span class="sc0">
</span><span class="sc5">LOCKF_MASK_RDWR</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; Read / write lock flag</span><span class="sc0">
</span><span class="sc5">LOCKF_WR</span><span class="sc0">                </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; bit 0 clear - write lock</span><span class="sc0">
</span><span class="sc5">LOCKF_RD</span><span class="sc0">                </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; bit 0 set - read lock(NW only)</span><span class="sc0">
</span><span class="sc5">LOCKF_MASK_DOS_NW</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; DOS/Netware style lock flag</span><span class="sc0">
</span><span class="sc5">LOCKF_DOS</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; bit 1 clear - DOS-style lock</span><span class="sc0">
</span><span class="sc5">LOCKF_NW</span><span class="sc0">                </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; bit 1 set - Netware-style lock</span><span class="sc0">

</span><span class="sc1">;* These values are used internally by the IFS manager only:</span><span class="sc0">
</span><span class="sc5">LOCKF_MASK_INACTIVE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080h</span><span class="sc0">    </span><span class="sc1">; lock active/inactive flag</span><span class="sc0">
</span><span class="sc5">LOCKF_ACTIVE</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; bit 7 clear - lock active</span><span class="sc0">
</span><span class="sc5">LOCKF_INACTIVE</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080h</span><span class="sc0">    </span><span class="sc1">; bit 7 set - lock inactive</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags to VFN_PIPEREQUEST and HM_PIPEREQUEST:</span><span class="sc0">
</span><span class="sc1">;       (NOTE: these values have been chosen to agree with the opcodes used</span><span class="sc0">
</span><span class="sc1">;       by the TRANSACTION SMB for the matching operation.)</span><span class="sc0">
</span><span class="sc5">PIPE_QHandState</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">021h</span><span class="sc0">
</span><span class="sc5">PIPE_SetHandState</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">
</span><span class="sc5">PIPE_QInfo</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">022h</span><span class="sc0">
</span><span class="sc5">PIPE_Peek</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">023h</span><span class="sc0">
</span><span class="sc5">PIPE_RawRead</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">011h</span><span class="sc0">
</span><span class="sc5">PIPE_RawWrite</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">031h</span><span class="sc0">
</span><span class="sc5">PIPE_Wait</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">053h</span><span class="sc0">
</span><span class="sc5">PIPE_Call</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">054h</span><span class="sc0">
</span><span class="sc5">PIPE_Transact</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">026h</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for HM_HANDLEINFO call:</span><span class="sc0">
</span><span class="sc5">HINFO_GET</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; retrieve current buffering info</span><span class="sc0">
</span><span class="sc5">HINFO_SETALL</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; set info (all parms)</span><span class="sc0">
</span><span class="sc5">HINFO_SETCHARTIME</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; set handle buffer timeout</span><span class="sc0">
</span><span class="sc5">HINFO_SETCHARCOUNT</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">       </span><span class="sc1">; set handle max buffer count</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for HM_ENUMHANDLE call:</span><span class="sc0">
</span><span class="sc5">ENUMH_GETFILEINFO</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; get fileinfo by handle</span><span class="sc0">
</span><span class="sc5">ENUMH_GETFILENAME</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; get filename associated with handle</span><span class="sc0">
</span><span class="sc5">ENUMH_GETFINDINFO</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; get info for resuming</span><span class="sc0">
</span><span class="sc5">ENUMH_RESUMEFIND</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">       </span><span class="sc1">; resume find operation</span><span class="sc0">
</span><span class="sc5">ENUMH_RESYNCFILEDIR</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">       </span><span class="sc1">; resync dir entry info for file</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options for the ENUMH_RESYNCFILEDIR call:</span><span class="sc0">
</span><span class="sc5">RESYNC_INVALIDATEMETACACHE</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; invalidate meta cache on resync</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_FILEATTRIB:</span><span class="sc0">
</span><span class="sc1">;*</span><span class="sc0">
</span><span class="sc1">;*      Note: All functions that modify the volume MUST be odd.</span><span class="sc0">
</span><span class="sc1">;*       Callers rely on this &amp; test the low order bit.</span><span class="sc0">
</span><span class="sc5">GET_ATTRIBUTES</span><span class="sc0">                  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0"> </span><span class="sc1">; get attributes of file/dir</span><span class="sc0">
</span><span class="sc5">SET_ATTRIBUTES</span><span class="sc0">                  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0"> </span><span class="sc1">; set attributes of file/dir</span><span class="sc0">
</span><span class="sc5">GET_ATTRIB_COMP_FILESIZE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0"> </span><span class="sc1">; get compressed size of file</span><span class="sc0">
</span><span class="sc5">SET_ATTRIB_MODIFY_DATETIME</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0"> </span><span class="sc1">; set date last written of file/dir</span><span class="sc0">
</span><span class="sc5">GET_ATTRIB_MODIFY_DATETIME</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0"> </span><span class="sc1">; get date last written of file/dir</span><span class="sc0">
</span><span class="sc5">SET_ATTRIB_LAST_ACCESS_DATETIME</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">5</span><span class="sc0"> </span><span class="sc1">; set date last accessed of file/dir</span><span class="sc0">
</span><span class="sc5">GET_ATTRIB_LAST_ACCESS_DATETIME</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">6</span><span class="sc0"> </span><span class="sc1">; get date last accessed of file/dir</span><span class="sc0">
</span><span class="sc5">SET_ATTRIB_CREATION_DATETIME</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">7</span><span class="sc0"> </span><span class="sc1">; set create date of file/dir</span><span class="sc0">
</span><span class="sc5">GET_ATTRIB_CREATION_DATETIME</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">8</span><span class="sc0"> </span><span class="sc1">; get create date of file/dir</span><span class="sc0">
</span><span class="sc5">GET_ATTRIB_FIRST_CLUST</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">9</span><span class="sc0"> </span><span class="sc1">; get first cluster of a file</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_FLUSH:</span><span class="sc0">
</span><span class="sc5">GDF_NORMAL</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; walk disk, if needed, to get free space</span><span class="sc0">
</span><span class="sc5">GDF_NO_DISK_HIT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; return current "hint", don't walk disk</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for HM_FILETIMES:</span><span class="sc0">
</span><span class="sc5">GET_MODIFY_DATETIME</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; get last modification date/time</span><span class="sc0">
</span><span class="sc5">SET_MODIFY_DATETIME</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; set last modification date/time</span><span class="sc0">
</span><span class="sc5">GET_LAST_ACCESS_DATETIME</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">4</span><span class="sc0">       </span><span class="sc1">; get last access date/time</span><span class="sc0">
</span><span class="sc5">SET_LAST_ACCESS_DATETIME</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">5</span><span class="sc0">       </span><span class="sc1">; set last access date/time</span><span class="sc0">
</span><span class="sc5">GET_CREATION_DATETIME</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">6</span><span class="sc0">       </span><span class="sc1">; get creation date/time</span><span class="sc0">
</span><span class="sc5">SET_CREATION_DATETIME</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">7</span><span class="sc0">       </span><span class="sc1">; set creation date/time</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for HM_SEEK:</span><span class="sc0">
</span><span class="sc5">FILE_BEGIN</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">               </span><span class="sc1">; absolute posn from file beginning</span><span class="sc0">
</span><span class="sc5">FILE_END</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">               </span><span class="sc1">; signed posn from file end</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_OPEN:</span><span class="sc0">
</span><span class="sc5">ACCESS_MODE_MASK</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00007h</span><span class="sc0">  </span><span class="sc1">; Mask for access mode bits</span><span class="sc0">
</span><span class="sc5">ACCESS_READONLY</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00000h</span><span class="sc0">  </span><span class="sc1">; open for read-only access</span><span class="sc0">
</span><span class="sc5">ACCESS_WRITEONLY</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00001h</span><span class="sc0">  </span><span class="sc1">; open for write-only access</span><span class="sc0">
</span><span class="sc5">ACCESS_READWRITE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00002h</span><span class="sc0">  </span><span class="sc1">; open for read and write access</span><span class="sc0">
</span><span class="sc5">ACCESS_EXECUTE</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00003h</span><span class="sc0">  </span><span class="sc1">; open for execute access</span><span class="sc0">
</span><span class="sc5">SHARE_MODE_MASK</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00070h</span><span class="sc0">  </span><span class="sc1">; Mask for share mode bits</span><span class="sc0">
</span><span class="sc5">SHARE_COMPATIBILITY</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00000h</span><span class="sc0">  </span><span class="sc1">; open in compatability mode</span><span class="sc0">
</span><span class="sc5">SHARE_DENYREADWRITE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00010h</span><span class="sc0">  </span><span class="sc1">; open for exclusive access</span><span class="sc0">
</span><span class="sc5">SHARE_DENYWRITE</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00020h</span><span class="sc0">  </span><span class="sc1">; open allowing read-only access</span><span class="sc0">
</span><span class="sc5">SHARE_DENYREAD</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00030h</span><span class="sc0">  </span><span class="sc1">; open allowing write-only access</span><span class="sc0">
</span><span class="sc5">SHARE_DENYNONE</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00040h</span><span class="sc0">  </span><span class="sc1">; open allowing other processes access</span><span class="sc0">
</span><span class="sc5">SHARE_FCB</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00070h</span><span class="sc0">  </span><span class="sc1">; FCB mode open</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options for VFN_OPEN:</span><span class="sc0">
</span><span class="sc5">ACTION_MASK</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0ffh</span><span class="sc0">    </span><span class="sc1">; Open Actions Mask</span><span class="sc0">
</span><span class="sc5">ACTION_OPENEXISTING</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; open an existing file</span><span class="sc0">
</span><span class="sc5">ACTION_REPLACEEXISTING</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; open existing file and set length</span><span class="sc0">
</span><span class="sc5">ACTION_CREATENEW</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; create a new file, fail if exists</span><span class="sc0">
</span><span class="sc5">ACTION_OPENALWAYS</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">011h</span><span class="sc0">    </span><span class="sc1">; open file, create if does not exist</span><span class="sc0">
</span><span class="sc5">ACTION_CREATEALWAYS</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">012h</span><span class="sc0">    </span><span class="sc1">; create a new file, even if it exists</span><span class="sc0">

</span><span class="sc1">;* Alternate method: bit assignments for the above values:</span><span class="sc0">
</span><span class="sc5">ACTION_EXISTS_OPEN</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; BIT: If file exists, open file</span><span class="sc0">
</span><span class="sc5">ACTION_TRUNCATE</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; BIT: Truncate file</span><span class="sc0">
</span><span class="sc5">ACTION_NEXISTS_CREATE</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; BIT: If file does not exist, create</span><span class="sc0">

</span><span class="sc1">; these mode flags are passed in via ifs_options to VFN_OPEN</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_NOINHERIT</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00080h</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_NO_CACHE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">R0_NO_CACHE</span><span class="sc0"> </span><span class="sc1">; 0x0100</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_NO_COMPRESS</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00200h</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_ALIAS_HINT</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00400h</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_NOCRITERR</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">02000h</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_COMMIT</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">04000h</span><span class="sc0">
</span><span class="sc5">OPEN_FLAGS_REOPEN</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00800h</span><span class="sc0">  </span><span class="sc1">; file is being reopened on vol lock</span><span class="sc0">

</span><span class="sc1">;* Values returned by VFN_OPEN for action taken:</span><span class="sc0">
</span><span class="sc5">ACTION_OPENED</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; existing file has been opened</span><span class="sc0">
</span><span class="sc5">ACTION_CREATED</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; new file has been created</span><span class="sc0">
</span><span class="sc5">ACTION_REPLACED</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">3</span><span class="sc0">       </span><span class="sc1">; existing file has been replaced</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_SEARCH:</span><span class="sc0">
</span><span class="sc5">SEARCH_FIRST</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; findfirst operation</span><span class="sc0">
</span><span class="sc5">SEARCH_NEXT</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; findnext operation</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_DISCONNECT:</span><span class="sc0">
</span><span class="sc5">DISCONNECT_NORMAL</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; normal disconnect</span><span class="sc0">
</span><span class="sc5">DISCONNECT_NO_IO</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; no i/o can happen at this time</span><span class="sc0">
</span><span class="sc5">DISCONNECT_SINGLE</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; disconnect this drive only</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options for VFN_FLUSH:</span><span class="sc0">
</span><span class="sc5">VOL_DISCARD_CACHE</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">
</span><span class="sc5">VOL_REMOUNT</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">


</span><span class="sc1">;* Values for ir_options for VFN_IOCTL16DRIVE:</span><span class="sc0">
</span><span class="sc5">IOCTL_PKT_V86_ADDRESS</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; V86 pkt address in user DS:DX</span><span class="sc0">
</span><span class="sc5">IOCTL_PKT_LINEAR_ADDRESS</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; Linear address to packet in ir_data</span><span class="sc0">


</span><span class="sc1">;* Values for ir_flags for VFN_DASDIO:</span><span class="sc0">
</span><span class="sc5">DIO_ABS_READ_SECTORS</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; Absolute disk read</span><span class="sc0">
</span><span class="sc5">DIO_ABS_WRITE_SECTORS</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; Absolute disk write</span><span class="sc0">
</span><span class="sc5">DIO_SET_LOCK_CACHE_STATE</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; Set cache state during volume lock</span><span class="sc0">


</span><span class="sc1">;*      Values for ir_options for DIO_SET_LOCK_CACHE_STATE:</span><span class="sc0">
</span><span class="sc5">DLC_LEVEL4LOCK_TAKEN</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; cache writethru, discard name cache</span><span class="sc0">
</span><span class="sc5">DLC_LEVEL4LOCK_RELEASED</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; revert to normal cache state</span><span class="sc0">
</span><span class="sc5">DLC_LEVEL1LOCK_TAKEN</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; cache writethru, discard name cache</span><span class="sc0">
</span><span class="sc5">DLC_LEVEL1LOCK_RELEASED</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">    </span><span class="sc1">; revert to normal cache state</span><span class="sc0">


</span><span class="sc1">; These values for ir_options are used only on ring 0 apis</span><span class="sc0">
</span><span class="sc5">R0_NO_CACHE</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00100h</span><span class="sc0">  </span><span class="sc1">; must not cache reads/writes</span><span class="sc0">
</span><span class="sc5">R0_SWAPPER_CALL</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">01000h</span><span class="sc0">  </span><span class="sc1">; called by the swapper</span><span class="sc0">
</span><span class="sc5">R0_MM_READ_WRITE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">08000h</span><span class="sc0">  </span><span class="sc1">; indicates this is a MMF R0 i/o</span><span class="sc0">
</span><span class="sc5">R0_SPLOPT_MASK</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0FF00h</span><span class="sc0">  </span><span class="sc1">; mask for ring 0 special options</span><span class="sc0">


</span><span class="sc1">;* Values for ir_attr for different file attributes:</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_READONLY</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; read-only file</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_HIDDEN</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; hidden file</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_SYSTEM</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; system file</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_LABEL</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">    </span><span class="sc1">; volume label</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_DIRECTORY</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; subdirectory</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_ARCHIVE</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020h</span><span class="sc0">    </span><span class="sc1">; archived file/directory</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_DEVICE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">040h</span><span class="sc0">    </span><span class="sc1">; device</span><span class="sc0">

</span><span class="sc1">; The second byte of ir_attr is a mask of attributes which "must match"</span><span class="sc0">
</span><span class="sc1">; on a SEARCH or FINDOPEN call.  If an attribute bit is set in the</span><span class="sc0">
</span><span class="sc1">; "must match" mask, then the file must also have that attribute set</span><span class="sc0">
</span><span class="sc1">; to match the search/find.</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_MUSTMATCH</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000003F00h</span><span class="sc0">      </span><span class="sc1">; 00ADVSHR Must Match</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_EVERYTHING</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00000003Fh</span><span class="sc0">      </span><span class="sc1">; 00ADVSHR Find Everything</span><span class="sc0">
</span><span class="sc5">FILE_ATTRIBUTE_INTERESTING</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00000001Eh</span><span class="sc0">      </span><span class="sc1">; 000DVSH0 Search bits</span><span class="sc0">


</span><span class="sc1">;   Auto-generation flags returned from CreateBasis()</span><span class="sc0">
</span><span class="sc5">BASIS_TRUNC</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; original name was truncated</span><span class="sc0">
</span><span class="sc5">BASIS_LOSS</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; char translation loss occurred</span><span class="sc0">
</span><span class="sc5">BASIS_UPCASE</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">    </span><span class="sc1">; char in basis was upcased</span><span class="sc0">
</span><span class="sc5">BASIS_EXT</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020h</span><span class="sc0">    </span><span class="sc1">; char in basis is extended ASCII</span><span class="sc0">

</span><span class="sc1">;   Flags that SHOULD associated with detecting 'collisions' in the basis name</span><span class="sc0">
</span><span class="sc1">;   and the numeric tail of a basis name.  They are defined here so that routines</span><span class="sc0">
</span><span class="sc1">;   who need to flag these conditions use these values in a way that does not</span><span class="sc0">
</span><span class="sc1">;   conflict with the previous three 'basis' flags.</span><span class="sc0">
</span><span class="sc5">BASIS_NAME_COLL</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">    </span><span class="sc1">; collision in the basis name component</span><span class="sc0">
</span><span class="sc5">BASIS_NUM_TAIL_COLL</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">    </span><span class="sc1">; collision in the numeric-tail component</span><span class="sc0">


</span><span class="sc1">;       Flags returned by long-name FindOpen/Findnext calls.  The flags</span><span class="sc0">
</span><span class="sc1">;       indicate whether a mapping from UNICODE to BCS of the primary and</span><span class="sc0">
</span><span class="sc1">;       altername names in the find buffer have lost information.  This</span><span class="sc0">
</span><span class="sc1">;       occurs whenever a UNICODE char cannot be mapped into an OEM/ANSI</span><span class="sc0">
</span><span class="sc1">;       char in the codepage specified.</span><span class="sc0">
</span><span class="sc5">FIND_FLAG_PRI_NAME_LOSS</span><span class="sc0">                 </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00001h</span><span class="sc0">
</span><span class="sc5">FIND_FLAG_ALT_NAME_LOSS</span><span class="sc0">                 </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00002h</span><span class="sc0">


</span><span class="sc1">;       Flags returned by UNIToBCS, BCSToUni, UniToBCSPath, MapUniToBCS</span><span class="sc0">
</span><span class="sc1">;  MapBCSToUni.  The flags indicate whether a mapping from UNICODE</span><span class="sc0">
</span><span class="sc1">;  to BCS, or BCS to UNICODE have lost information.  This occurs</span><span class="sc0">
</span><span class="sc1">;       whenever a char cannot be mapped.</span><span class="sc0">
</span><span class="sc5">MAP_FLAG_LOSS</span><span class="sc0">                                   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00001h</span><span class="sc0">
</span><span class="sc5">MAP_FLAG_TRUNCATE</span><span class="sc0">                               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00002h</span><span class="sc0">


</span><span class="sc1">; These bits are also set in ir_attr for specific properties of the</span><span class="sc0">
</span><span class="sc1">; pathname/filename.</span><span class="sc0">
</span><span class="sc1">;</span><span class="sc0">
</span><span class="sc1">; A filename is 8.3 compatible if it contains at most 8 characters before</span><span class="sc0">
</span><span class="sc1">; a DOT or the end of the name, at most 3 chars after a DOT, at most one</span><span class="sc0">
</span><span class="sc1">; DOT, and no new LFN only characters.  The new LFN characters are:</span><span class="sc0">
</span><span class="sc1">; , + = [ ] ;</span><span class="sc0">
</span><span class="sc1">;</span><span class="sc0">
</span><span class="sc1">; If a name does not meet all of the 8.3 rules above then it is considered</span><span class="sc0">
</span><span class="sc1">; to be a "long file name", LFN.</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_WILDCARDS</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080000000h</span><span class="sc0">      </span><span class="sc1">; set if wildcards in name</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_HAS_STAR</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">040000000h</span><span class="sc0">      </span><span class="sc1">; set if *'s in name (PARSE_WILD also set)</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_LONG_PATH</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020000000h</span><span class="sc0">      </span><span class="sc1">; set if any path element is not 8.3</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_KEEP_CASE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010000000h</span><span class="sc0">      </span><span class="sc1">; set if FSD should use ir_uFName</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_HAS_DOT</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008000000h</span><span class="sc0">      </span><span class="sc1">; set if last path element contains .'s</span><span class="sc0">
</span><span class="sc5">FILE_FLAG_IS_LFN</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004000000h</span><span class="sc0">      </span><span class="sc1">; set if last element is LFN</span><span class="sc0">


</span><span class="sc1">; Function definitions on the ring 0 apis function list:</span><span class="sc0">
</span><span class="sc1">; NOTE: Most functions are context independent unless explicitly stated</span><span class="sc0">
</span><span class="sc1">; i.e. they do not use the current thread context. R0_LOCKFILE is the only</span><span class="sc0">
</span><span class="sc1">; exception - it always uses the current thread context.</span><span class="sc0">
</span><span class="sc5">R0_OPENCREATFILE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D500h</span><span class="sc0">  </span><span class="sc1">; Open/Create a file</span><span class="sc0">
</span><span class="sc5">R0_OPENCREAT_IN_CONTEXT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D501h</span><span class="sc0">  </span><span class="sc1">; Open/Create file in current context</span><span class="sc0">
</span><span class="sc5">R0_READFILE</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D600h</span><span class="sc0">  </span><span class="sc1">; Read a file, no context</span><span class="sc0">
</span><span class="sc5">R0_WRITEFILE</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D601h</span><span class="sc0">  </span><span class="sc1">; Write to a file, no context</span><span class="sc0">
</span><span class="sc5">R0_READFILE_IN_CONTEXT</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D602h</span><span class="sc0">  </span><span class="sc1">; Read a file, in thread context</span><span class="sc0">
</span><span class="sc5">R0_WRITEFILE_IN_CONTEXT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D603h</span><span class="sc0">  </span><span class="sc1">; Write to a file, in thread context</span><span class="sc0">
</span><span class="sc5">R0_CLOSEFILE</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D700h</span><span class="sc0">  </span><span class="sc1">; Close a file</span><span class="sc0">
</span><span class="sc5">R0_GETFILESIZE</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0D800h</span><span class="sc0">  </span><span class="sc1">; Get size of a file</span><span class="sc0">
</span><span class="sc5">R0_FINDFIRSTFILE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">04E00h</span><span class="sc0">  </span><span class="sc1">; Do a LFN FindFirst operation</span><span class="sc0">
</span><span class="sc5">R0_FINDNEXTFILE</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">04F00h</span><span class="sc0">  </span><span class="sc1">; Do a LFN FindNext operation</span><span class="sc0">
</span><span class="sc5">R0_FINDCLOSEFILE</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0DC00h</span><span class="sc0">  </span><span class="sc1">; Do a LFN FindClose operation</span><span class="sc0">
</span><span class="sc5">R0_FILEATTRIBUTES</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">04300h</span><span class="sc0">  </span><span class="sc1">; Get/Set Attributes of a file</span><span class="sc0">
</span><span class="sc5">R0_RENAMEFILE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">05600h</span><span class="sc0">  </span><span class="sc1">; Rename a file</span><span class="sc0">
</span><span class="sc5">R0_DELETEFILE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">04100h</span><span class="sc0">  </span><span class="sc1">; Delete a file</span><span class="sc0">
</span><span class="sc5">R0_LOCKFILE</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">05C00h</span><span class="sc0">  </span><span class="sc1">; Lock/Unlock a region in a file</span><span class="sc0">
</span><span class="sc5">R0_GETDISKFREESPACE</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">03600h</span><span class="sc0">  </span><span class="sc1">; Get disk free space</span><span class="sc0">
</span><span class="sc5">R0_READABSOLUTEDISK</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0DD00h</span><span class="sc0">  </span><span class="sc1">; Absolute disk read</span><span class="sc0">
</span><span class="sc5">R0_WRITEABSOLUTEDISK</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0DE00h</span><span class="sc0">  </span><span class="sc1">; Absolute disk write</span><span class="sc0">


</span><span class="sc1">; Special definitions for ring 0 apis for drive information flags</span><span class="sc0">
</span><span class="sc5">IFS_DRV_RMM</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00001h</span><span class="sc0">  </span><span class="sc1">; drive is managed by RMM</span><span class="sc0">
</span><span class="sc5">IFS_DRV_DOS_DISK_INFO</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">00002h</span><span class="sc0">  </span><span class="sc1">; drive needs DOS</span><span class="sc0">


</span><span class="sc1">;* search - Search record structure</span><span class="sc0">
</span><span class="sc1">;</span><span class="sc0">
</span><span class="sc1">; This strucure defines the result buffer format for search returns</span><span class="sc0">
</span><span class="sc1">; for int21h based file searches: 11H/12H FCB Find First/Next</span><span class="sc0">
</span><span class="sc1">;       and 4eH/4fH path based Find First/Next</span><span class="sc0">
</span><span class="sc1">;</span><span class="sc0">
</span><span class="sc1">; There are two areas in the search_record reserved for use by file system</span><span class="sc0">
</span><span class="sc1">; drivers. One is to be used by local file systems such as FAT or CDROM</span><span class="sc0">
</span><span class="sc1">; and the other is to be used by network file systems such as an SMB or</span><span class="sc0">
</span><span class="sc1">; NCP client. The reason for the split is because many network file</span><span class="sc0">
</span><span class="sc1">; systems send and receive the search key directly on the net.</span><span class="sc0">

</span><span class="sc1">;typedef struct srch_key srch_key;</span><span class="sc0">
</span><span class="sc5">srch_key</span><span class="sc0">        </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">sk_drive</span><span class="sc0">      </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; Drive specifier (set by IFS MGR)</span><span class="sc0">
  </span><span class="sc5">sk_pattern</span><span class="sc0">    </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">11</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">      </span><span class="sc1">; Reserved (pattern sought)</span><span class="sc0">
  </span><span class="sc5">sk_attr</span><span class="sc0">       </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; Reserved (attribute sought)</span><span class="sc0">
  </span><span class="sc5">sk_localFSD</span><span class="sc0">   </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">4</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">       </span><span class="sc1">; available for use local FSDs</span><span class="sc0">
  </span><span class="sc5">sk_netFSD</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">2</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">       </span><span class="sc1">; available for use by network FSDs</span><span class="sc0">
  </span><span class="sc5">sk_ifsmgr</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">2</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">       </span><span class="sc1">; reserved for use by IFS MGR</span><span class="sc0">
</span><span class="sc5">srch_key</span><span class="sc0">        </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc1">;typedef struct srch_entry srch_entry;</span><span class="sc0">
</span><span class="sc5">srch_entry</span><span class="sc0">      </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">se_key</span><span class="sc0">        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">srch_key</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc1">; resume key</span><span class="sc0">
  </span><span class="sc5">se_attrib</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; file attribute</span><span class="sc0">
  </span><span class="sc5">se_time</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; time of last modification to file</span><span class="sc0">
  </span><span class="sc5">se_date</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; date of last modification to file</span><span class="sc0">
  </span><span class="sc5">se_size</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; size of file</span><span class="sc0">
  </span><span class="sc5">se_name</span><span class="sc0">       </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">13</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">      </span><span class="sc1">; ASCIIZ name with dot included</span><span class="sc0">
</span><span class="sc5">srch_entry</span><span class="sc0">      </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">;* Win32 Date Time structure</span><span class="sc0">
</span><span class="sc1">; This structure defines the new Win32 format structure for returning the</span><span class="sc0">
</span><span class="sc1">; date and time</span><span class="sc0">
</span><span class="sc1">;typedef struct _FILETIME _FILETIME;</span><span class="sc0">
</span><span class="sc5">_FILETIME</span><span class="sc0">       </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">dwLowDateTime</span><span class="sc0"> </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">dwHighDateTime</span><span class="sc0"> </span><span class="sc9">dd</span><span class="sc0">     </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_FILETIME</span><span class="sc0">       </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">;* Win32 Find Structure</span><span class="sc0">
</span><span class="sc1">;  This structure defines the contents of the result buffer on a</span><span class="sc0">
</span><span class="sc1">; Win32 FindFirst / FindNext. These calls are accessed by the new</span><span class="sc0">
</span><span class="sc1">; LFN find apis</span><span class="sc0">
</span><span class="sc1">;typedef struct _WIN32_FIND_DATA _WIN32_FIND_DATA;</span><span class="sc0">
</span><span class="sc5">_WIN32_FIND_DATA</span><span class="sc0">        </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">dwFileAttributes</span><span class="sc0">      </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">ftCreationTime</span><span class="sc0">        </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">ftLastAccessTime</span><span class="sc0">      </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">ftLastWriteTime</span><span class="sc0">       </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">nFileSizeHigh</span><span class="sc0">         </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">nFileSizeLow</span><span class="sc0">          </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">dwReserved0</span><span class="sc0">           </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">dwReserved1</span><span class="sc0">           </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">cFileName</span><span class="sc0">             </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc5">MAX_PATH</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">        </span><span class="sc1">; includes NUL</span><span class="sc0">
  </span><span class="sc5">cAlternateFileName</span><span class="sc0">    </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">14</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">              </span><span class="sc1">; includes NUL</span><span class="sc0">
</span><span class="sc5">_WIN32_FIND_DATA</span><span class="sc0">        </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">;* Win32 File Info By Handle Structure</span><span class="sc0">
</span><span class="sc1">;  This structure defines the contents of the result buffer on a</span><span class="sc0">
</span><span class="sc1">;  Win32 FileInfoByHandle. These calls are accessed by the new</span><span class="sc0">
</span><span class="sc1">;  LFN find apis</span><span class="sc0">
</span><span class="sc1">;typedef struct _BY_HANDLE_FILE_INFORMATION _BY_HANDLE_FILE_INFORMATION;</span><span class="sc0">
</span><span class="sc5">_BY_HANDLE_FILE_INFORMATION</span><span class="sc0">     </span><span class="sc9">struc</span><span class="sc0">   </span><span class="sc1">; bhfi</span><span class="sc0">
  </span><span class="sc5">bhfi_dwFileAttributes</span><span class="sc0">         </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_ftCreationTime</span><span class="sc0">           </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">bhfi_ftLastAccessTime</span><span class="sc0">         </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">bhfi_ftLastWriteTime</span><span class="sc0">          </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">bhfi_dwVolumeSerialNumber</span><span class="sc0">     </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_nFileSizeHigh</span><span class="sc0">            </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_nFileSizeLow</span><span class="sc0">             </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_nNumberOfLinks</span><span class="sc0">           </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_nFileIndexHigh</span><span class="sc0">           </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">bhfi_nFileIndexLow</span><span class="sc0">            </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_BY_HANDLE_FILE_INFORMATION</span><span class="sc0">     </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">; these are win32 defined flags for GetVolInfo</span><span class="sc0">
</span><span class="sc5">FS_CASE_IS_PRESERVED</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000000002h</span><span class="sc0">
</span><span class="sc5">FS_UNICODE_STORED_ON_DISK</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000000004h</span><span class="sc0">

</span><span class="sc1">; these flags for GetVolInfo are NOT defined</span><span class="sc0">
</span><span class="sc5">FS_VOL_IS_COMPRESSED</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000008000h</span><span class="sc0">
</span><span class="sc5">FS_VOL_SUPPORTS_LONG_NAMES</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000004000h</span><span class="sc0">


</span><span class="sc1">; these flags are returned by IFSMgr_Get_Drive_Info</span><span class="sc0">
</span><span class="sc5">FDRV_INT13</span><span class="sc0">              </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">
</span><span class="sc5">FDRV_FASTDISK</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">
</span><span class="sc5">FDRV_COMP</span><span class="sc0">               </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">
</span><span class="sc5">FDRV_RMM</span><span class="sc0">                </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">008h</span><span class="sc0">
</span><span class="sc5">FDRV_DOS</span><span class="sc0">                </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">010h</span><span class="sc0">
</span><span class="sc5">FDRV_USE_RMM</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">020h</span><span class="sc0">
</span><span class="sc5">FDRV_COMPHOST</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">040h</span><span class="sc0">
</span><span class="sc5">FDRV_NO_LAZY</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">080h</span><span class="sc0">


</span><span class="sc1">;* TUNINFO - Tunneling Information</span><span class="sc0">
</span><span class="sc1">;       This structure defines the information passed into the FSD on</span><span class="sc0">
</span><span class="sc1">;       a Create or Rename operation if tunneling was detected.  This</span><span class="sc0">
</span><span class="sc1">;       gives a set of advisory information to create the new file with.</span><span class="sc0">
</span><span class="sc1">;       if ir_ptuninfo is NULL on Create or Rename, none of this information</span><span class="sc0">
</span><span class="sc1">;       is available.  All of this information is advisory.  tuni_bfContents</span><span class="sc0">
</span><span class="sc1">;       defines what pieces of tunneling information are available.</span><span class="sc0">
</span><span class="sc1">;typedef struct TUNINFO         TUNINFO;</span><span class="sc0">
</span><span class="sc5">TUNINFO</span><span class="sc0">         </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">tuni_bfContents</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">tuni_pAltName</span><span class="sc0">       </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">tuni_ftCreationTime</span><span class="sc0">   </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">tuni_ftLastAccessTime</span><span class="sc0"> </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">tuni_ftLastWriteTime</span><span class="sc0">  </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">_FILETIME</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">TUNINFO</span><span class="sc0"> </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc5">TUNI_CONTAINS_ALTNAME</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000000001h</span><span class="sc0">      </span><span class="sc1">; pAltName available</span><span class="sc0">
</span><span class="sc5">TUNI_CONTAINS_CREATIONT</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000000002h</span><span class="sc0">      </span><span class="sc1">; ftCreationTime available</span><span class="sc0">
</span><span class="sc5">TUNI_CONTAINS_LASTACCESST</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">   </span><span class="sc2">000000004h</span><span class="sc0">      </span><span class="sc1">; ftLastAccessTime available</span><span class="sc0">
</span><span class="sc5">TUNI_CONTAINS_LASTWRITET</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc2">000000008h</span><span class="sc0">      </span><span class="sc1">; ftLastWriteTime available</span><span class="sc0">


</span><span class="sc1">;* _QWORD - 64-bit data type</span><span class="sc0">
</span><span class="sc1">;  A struct used to return 64-bit data types to C callers</span><span class="sc0">
</span><span class="sc1">;  from the qwUniToBCS &amp; qwUniToBCS rotuines.  These</span><span class="sc0">
</span><span class="sc1">;  'routines' are just alias' for UntoToBCS &amp; UniToBCSPath</span><span class="sc0">
</span><span class="sc1">;  routines and do not exist as separate entities.  Both</span><span class="sc0">
</span><span class="sc1">;  routines always return a 64-bit result.  The lower</span><span class="sc0">
</span><span class="sc1">;  32-bits are a length.  The upper 32-bits are flags.</span><span class="sc0">
</span><span class="sc1">;  Typically, the flag returned indicates whether a mapping</span><span class="sc0">
</span><span class="sc1">;  resulted in a loss on information in the UNICODE to BCS</span><span class="sc0">
</span><span class="sc1">;  translation (i.e. a unicode char was converted to an '_').</span><span class="sc0">
</span><span class="sc1">;typedef struct _QWORD _QWORD;</span><span class="sc0">
</span><span class="sc5">_QWORD</span><span class="sc0">  </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">ddLower</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">ddUpper</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_QWORD</span><span class="sc0">  </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">;* ParsedPath - structure of an IFSMgr parsed pathname</span><span class="sc0">
</span><span class="sc5">PathElement</span><span class="sc0">     </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">pe_length</span><span class="sc0">     </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">pe_unichars</span><span class="sc0">   </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc2">1</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">PathElement</span><span class="sc0">     </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc5">ParsedPath</span><span class="sc0">      </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">pp_totalLength</span><span class="sc0"> </span><span class="sc9">dw</span><span class="sc0">     </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">pp_prefixLength</span><span class="sc0"> </span><span class="sc9">dw</span><span class="sc0">    </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">pp_elements</span><span class="sc0">   </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc2">1</span><span class="sc4">*</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">PathElement</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">ParsedPath</span><span class="sc0">      </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">; Values for charSet passed to character conversion routines</span><span class="sc0">
</span><span class="sc5">BCS_WANSI</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; use Windows ANSI set</span><span class="sc0">
</span><span class="sc5">BCS_OEM</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; use current OEM character set</span><span class="sc0">
</span><span class="sc5">BCS_UNI</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">       </span><span class="sc1">; use UNICODE character set</span><span class="sc0">


</span><span class="sc1">;   Matching semantics flags passed to MetaMatchUni()</span><span class="sc0">
</span><span class="sc5">UFLG_META</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">
</span><span class="sc5">UFLG_NT</span><span class="sc0">         </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">
</span><span class="sc5">UFLG_NT_DOS</span><span class="sc0">     </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">004h</span><span class="sc0">
</span><span class="sc5">UFLG_DOS</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">


</span><span class="sc1">; define the utb and btu ptr table structures</span><span class="sc0">
</span><span class="sc1">;typedef struct CPPtrs CPPtrs;</span><span class="sc0">
</span><span class="sc5">CPPtrs</span><span class="sc0">  </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">AnsiPtr</span><span class="sc0">       </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">OEMPtr</span><span class="sc0">        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">CPPtrs</span><span class="sc0">  </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc1">;typedef struct UnitoUpperTab UnitoUpperTab;</span><span class="sc0">
</span><span class="sc5">UnitoUpperTab</span><span class="sc0">   </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">delta</span><span class="sc0">         </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">TabPtr</span><span class="sc0">        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">UnitoUpperTab</span><span class="sc0">   </span><span class="sc9">ends</span><span class="sc0">

</span><span class="sc1">;typedef struct CPTablePtrs CPTablePtrs;</span><span class="sc0">
</span><span class="sc5">CPTablePtrs</span><span class="sc0">     </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">CPT_Length</span><span class="sc0">    </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
  </span><span class="sc5">utbPtrTab</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">CPPtrs</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">btuPtrTab</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">CPPtrs</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
  </span><span class="sc5">UnitoUpperPtr</span><span class="sc0"> </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc4">(</span><span class="sc9">size</span><span class="sc0"> </span><span class="sc5">UnitoUpperTab</span><span class="sc4">)</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">
</span><span class="sc5">CPTablePtrs</span><span class="sc0">     </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc5">fmode_t</span><span class="sc0">         </span><span class="sc9">struc</span><span class="sc0">           </span><span class="sc1">; File mode information</span><span class="sc0">
  </span><span class="sc5">fm_uid</span><span class="sc0">        </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; User ID</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">fm_cookie0</span><span class="sc0">  </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; Caller-supplied cookie</span><span class="sc0">
  </span><span class="sc5">%</span><span class="sc0"> </span><span class="sc5">fm_cookie1</span><span class="sc0">  </span><span class="sc5">$P</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; Caller-supplied cookie</span><span class="sc0">
  </span><span class="sc5">fm_mode</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; File sharing mode and access</span><span class="sc0">
  </span><span class="sc5">fm_attr</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">       </span><span class="sc1">; File attributes</span><span class="sc0">
</span><span class="sc5">fmode_t</span><span class="sc0"> </span><span class="sc9">ends</span><span class="sc0">


</span><span class="sc1">; These flags are used on the Win32 service to duplicate an extended handle</span><span class="sc0">
</span><span class="sc5">DUP_NORMAL_HANDLE</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; dup handle for normal file io</span><span class="sc0">
</span><span class="sc5">DUP_MEMORY_MAPPED</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; dup handle for memory-mapping</span><span class="sc0">
</span><span class="sc5">DUP_MEM_MAPPED_WRITE</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; mem mapping is for write if set,</span><span class="sc0">
                                        </span><span class="sc1">; is for read if clear.</span><span class="sc0">


</span><span class="sc1">; These constants for the different subfunctions on NameTrans (7160h)</span><span class="sc0">
</span><span class="sc5">NAMTRN_NORMALQUERY</span><span class="sc0">      </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; normal LFN NameTrans operation</span><span class="sc0">
</span><span class="sc5">NAMTRN_DO83QUERY</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; NameTrans to return full 8.3 name</span><span class="sc0">
</span><span class="sc5">NAMTRN_DOLFNQUERY</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">002h</span><span class="sc0">    </span><span class="sc1">; NameTrans to return full LFN name</span><span class="sc0">


</span><span class="sc1">; These constants are used for the different subfunctions on Get List Of</span><span class="sc0">
</span><span class="sc1">; Open Files (440dh, 086Dh)</span><span class="sc0">
</span><span class="sc5">ENUM_ALL_FILES</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">000h</span><span class="sc0">    </span><span class="sc1">; enumerate all open files</span><span class="sc0">
</span><span class="sc5">ENUM_UNMOVEABLE_FILES</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">001h</span><span class="sc0">    </span><span class="sc1">; enumerate only unmoveable files</span><span class="sc0">


</span><span class="sc1">;* Structure for the open file information from DOS to take over open files.</span><span class="sc0">
</span><span class="sc1">;typedef struct SFTOpenInfo SFTOpenInfo;</span><span class="sc0">
</span><span class="sc1">;typedef struct SFTOpenInfo *pSFTOpenInfo;</span><span class="sc0">
</span><span class="sc5">SFTOpenInfo</span><span class="sc0">     </span><span class="sc9">struc</span><span class="sc0">
  </span><span class="sc5">soi_dirclus</span><span class="sc0">   </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; cluster # for directory</span><span class="sc0">
  </span><span class="sc5">soi_dirind</span><span class="sc0">    </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; directory index of dir entry</span><span class="sc0">
  </span><span class="sc5">soi_dirname</span><span class="sc0">   </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc2">11</span><span class="sc0"> </span><span class="sc9">dup</span><span class="sc0"> </span><span class="sc4">(</span><span class="sc10">?</span><span class="sc4">)</span><span class="sc0">      </span><span class="sc1">; directory entry name</span><span class="sc0">
  </span><span class="sc5">soi_pad</span><span class="sc0">       </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">               </span><span class="sc1">; pad out for dword boundary</span><span class="sc0">
</span><span class="sc5">SFTOpenInfo</span><span class="sc0">     </span><span class="sc9">ends</span><span class="sc0">

</span></div></body>
</html>
