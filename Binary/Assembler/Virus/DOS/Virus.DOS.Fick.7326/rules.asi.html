<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Virus.DOS.Fick.7326 - rules.asi.html</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc2 {
	color: #FF8000;
}
.sc4 {
	font-weight: bold;
	color: #000080;
}
.sc5 {
}
.sc6 {
	font-weight: bold;
	color: #0000FF;
}
.sc8 {
	font-weight: bold;
	color: #8080FF;
}
.sc9 {
	color: #0080FF;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc12 {
	color: #808000;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc1">;[]-----------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|      RULES.ASI  --  Rules &amp; Structures for assembler              |</span><span class="sc0">
</span><span class="sc1">;|                                                                   |</span><span class="sc0">
</span><span class="sc1">;|      C/C++ Run Time Library   Version 4.0                         |</span><span class="sc0">
</span><span class="sc1">;|                                                                   |</span><span class="sc0">
</span><span class="sc1">;|      Copyright (c) 1987, 1991 by Borland International Inc.       |</span><span class="sc0">
</span><span class="sc1">;|      All Rights Reserved.                                         |</span><span class="sc0">
</span><span class="sc1">;[]-----------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc1">;*** First we begin with a few of the major constants of C.</span><span class="sc0">

</span><span class="sc5">false</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       </span><span class="sc1">; Beware !  For incoming parameters, non-false = true.</span><span class="sc0">
</span><span class="sc5">true</span><span class="sc0">    </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; For results, we generate the proper numbers.</span><span class="sc0">

</span><span class="sc5">lesser</span><span class="sc0">  </span><span class="sc9">equ</span><span class="sc0">    </span><span class="sc4">-</span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; Incoming, lesser &lt; 0</span><span class="sc0">
</span><span class="sc5">equal</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc5">greater</span><span class="sc0"> </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">       </span><span class="sc1">; Incoming, greater &gt; 0</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Conditional Assembly Directives                         |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc1">;memory model aliases, for the convenience of building the library</span><span class="sc0">

</span><span class="sc1">;bit masks to extract default pointer types from MMODEL (at run-time)</span><span class="sc0">
</span><span class="sc5">FCODE</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">8000h</span><span class="sc0">
</span><span class="sc5">FDATA</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4000h</span><span class="sc0">

</span><span class="sc9">IFDEF</span><span class="sc0">   </span><span class="sc5">__TINY__</span><span class="sc0">                </span><span class="sc1">; Small Code - Small Data</span><span class="sc0">
        </span><span class="sc5">LPROG</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">false</span><span class="sc0">
        </span><span class="sc5">LDATA</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">false</span><span class="sc0">
        </span><span class="sc5">MMODEL</span><span class="sc0">          </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">0</span><span class="sc0">       
        </span><span class="sc5">_DSSTACK_</span><span class="sc0">       </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc4">&lt;&gt;</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

</span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">LPROG</span><span class="sc0">
        </span><span class="sc5">DIST</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">FAR</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
        </span><span class="sc5">DIST</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">NEAR</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Segment Declarations Macros                             |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc5">Code_Seg@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a Code Segment</span><span class="sc0">
</span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__WINDOWS__</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CODE'</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CODE'</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ASSUME</span><span class="sc0">  </span><span class="sc8">CS</span><span class="sc4">:</span><span class="sc5">_TEXT</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Code_EndS@</span><span class="sc0">      </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a Code Segment</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Data_Seg@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a Data Segment  (initialized)</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Data_EndS@</span><span class="sc0">      </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a Data Segment (initialized)</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc9">IFNDEF</span><span class="sc0"> </span><span class="sc5">__HUGE__</span><span class="sc0">
    </span><span class="sc5">BSS_Seg@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">       </span><span class="sc1">;; Open a Data Segment  (un-initialized)</span><span class="sc0">
    </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'BSS'</span><span class="sc0">
            </span><span class="sc9">ENDM</span><span class="sc0">

    </span><span class="sc5">BSS_EndS@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">       </span><span class="sc1">;; Close a Data Segment (un-initialized)</span><span class="sc0">
    </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">ENDS</span><span class="sc0">
                    </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

</span><span class="sc5">FarData_Seg@</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a FAR Data Segment</span><span class="sc0">
</span><span class="sc5">_FARDATA</span><span class="sc0">        </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">PARA</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'FAR_DATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">FarData_EndS@</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a FAR Data Segment</span><span class="sc0">
</span><span class="sc5">_FARDATA</span><span class="sc0">        </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">FarBSS_Seg@</span><span class="sc0">     </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a FAR BSS Segment</span><span class="sc0">
</span><span class="sc5">_FARBSS</span><span class="sc0">         </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">PARA</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'FAR_BSS'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">FarBSS_EndS@</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a FAR BSS Segment</span><span class="sc0">
</span><span class="sc5">_FARBSS</span><span class="sc0">         </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Const_Seg@</span><span class="sc0">      </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a CONST Segment</span><span class="sc0">
</span><span class="sc5">_CONST</span><span class="sc0">  </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CONST'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Const_EndS@</span><span class="sc0">     </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a CONST Segment</span><span class="sc0">
</span><span class="sc5">_CONST</span><span class="sc0">  </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Init_Seg@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a INIT Segment</span><span class="sc0">
</span><span class="sc5">_INIT_</span><span class="sc0">  </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'INITDATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Init_EndS@</span><span class="sc0">      </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a INIT Segment</span><span class="sc0">
</span><span class="sc5">_INIT_</span><span class="sc0">  </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Exit_Seg@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a EXIT Segment</span><span class="sc0">
</span><span class="sc5">_EXIT_</span><span class="sc0">  </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'EXITDATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Exit_EndS@</span><span class="sc0">      </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a EXIT Segment</span><span class="sc0">
</span><span class="sc5">_EXIT_</span><span class="sc0">  </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">CVT_Seg@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">_CVTSEG</span><span class="sc0"> </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">CVT_EndS@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">_CVTSEG</span><span class="sc0"> </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">SCN_Seg@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">_SCNSEG</span><span class="sc0"> </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">SCN_EndS@</span><span class="sc0">       </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">_SCNSEG</span><span class="sc0"> </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Header@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">Code_Seg@</span><span class="sc0">
</span><span class="sc5">Code_EndS@</span><span class="sc0">
</span><span class="sc5">Data_Seg@</span><span class="sc0">
</span><span class="sc5">Data_EndS@</span><span class="sc0">
</span><span class="sc5">BSS_Seg@</span><span class="sc0">
</span><span class="sc5">BSS_EndS@</span><span class="sc0">
        </span><span class="sc9">ASSUME</span><span class="sc0">  </span><span class="sc8">CS</span><span class="sc4">:</span><span class="sc5">_TEXT</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">DS</span><span class="sc4">:</span><span class="sc5">DGROUP</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Segment Definitions                                     |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__C0__</span><span class="sc0">

</span><span class="sc5">_TEXT</span><span class="sc0">           </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CODE'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_FARDATA</span><span class="sc0">        </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">PARA</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'FAR_DATA'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_FARBSS</span><span class="sc0">         </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">PARA</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'FAR_BSS'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_DATA</span><span class="sc0">           </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">PARA</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_CONST</span><span class="sc0">          </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CONST'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_CVTSEG</span><span class="sc0">         </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_SCNSEG</span><span class="sc0">         </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_INIT_</span><span class="sc0">          </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'INITDATA'</span><span class="sc0">
</span><span class="sc5">InitStart</span><span class="sc0">       </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc5">_INITEND_</span><span class="sc0">       </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'INITDATA'</span><span class="sc0">
</span><span class="sc5">InitEnd</span><span class="sc0">         </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_EXIT_</span><span class="sc0">          </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'EXITDATA'</span><span class="sc0">
</span><span class="sc5">ExitStart</span><span class="sc0">       </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc5">_EXITEND_</span><span class="sc0">       </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'EXITDATA'</span><span class="sc0">
</span><span class="sc5">ExitEnd</span><span class="sc0">         </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
                </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc9">IFNDEF</span><span class="sc0"> </span><span class="sc5">__HUGE__</span><span class="sc0">
</span><span class="sc5">_BSS</span><span class="sc0">          </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'BSS'</span><span class="sc0">
</span><span class="sc5">BeginBSS</span><span class="sc0">      </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
              </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc5">_BSSEND</span><span class="sc0">       </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'BSSEND'</span><span class="sc0">
</span><span class="sc5">EndBSS</span><span class="sc0">        </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">byte</span><span class="sc0">
              </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">


</span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__WINDOWS__</span><span class="sc0">

  </span><span class="sc9">IFDEF</span><span class="sc0">  </span><span class="sc5">__HUGE__</span><span class="sc0">
  </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">NULL</span><span class="sc4">,</span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_FPSEG</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc0">
  </span><span class="sc9">ELSE</span><span class="sc0">
  </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">NULL</span><span class="sc4">,</span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_FPSEG</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
  </span><span class="sc9">ENDIF</span><span class="sc0">

</span><span class="sc9">ELSE</span><span class="sc0">

</span><span class="sc9">IFNDEF</span><span class="sc0"> </span><span class="sc5">__NOFLOAT__</span><span class="sc0">
  </span><span class="sc9">IF</span><span class="sc0"> </span><span class="sc5">LDATA</span><span class="sc0">
    </span><span class="sc9">IFDEF</span><span class="sc0">  </span><span class="sc5">__HUGE__</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
  </span><span class="sc9">ELSE</span><span class="sc0">
    </span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__TINY__</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_TEXT</span><span class="sc4">,</span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
  </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
  </span><span class="sc9">IF</span><span class="sc0"> </span><span class="sc5">LDATA</span><span class="sc0">
    </span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__HUGE__</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
  </span><span class="sc9">ELSE</span><span class="sc0">
    </span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__TINY__</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_TEXT</span><span class="sc4">,</span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
      </span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc4">,</span><span class="sc5">_CONST</span><span class="sc4">,</span><span class="sc5">_CVTSEG</span><span class="sc4">,</span><span class="sc5">_SCNSEG</span><span class="sc4">,</span><span class="sc5">_INIT_</span><span class="sc4">,</span><span class="sc5">_INITEND_</span><span class="sc4">,</span><span class="sc5">_EXIT_</span><span class="sc4">,</span><span class="sc5">_EXITEND_</span><span class="sc4">,</span><span class="sc5">_BSS</span><span class="sc4">,</span><span class="sc5">_BSSEND</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
  </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0"> </span><span class="sc1">; __NOFLOAT__</span><span class="sc0">

</span><span class="sc9">ENDIF</span><span class="sc0"> </span><span class="sc1">; __WINDOWS__</span><span class="sc0">

</span><span class="sc9">ELSE</span><span class="sc0">

</span><span class="sc5">Code_Seg@</span><span class="sc0">
</span><span class="sc5">Code_EndS@</span><span class="sc0">
</span><span class="sc5">Data_Seg@</span><span class="sc0">
</span><span class="sc5">Data_EndS@</span><span class="sc0">
</span><span class="sc5">DGROUP</span><span class="sc0"> </span><span class="sc9">GROUP</span><span class="sc0"> </span><span class="sc5">_DATA</span><span class="sc0">

</span><span class="sc9">ENDIF</span><span class="sc0"> </span><span class="sc1">; __C0__</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Old Segment Declarations Macros                         |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">


</span><span class="sc5">CSeg@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a Code Segment</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CODE'</span><span class="sc0">
        </span><span class="sc9">ASSUME</span><span class="sc0">  </span><span class="sc8">CS</span><span class="sc4">:</span><span class="sc5">_TEXT</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">CSegEnd@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a Code Segment</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">DSeg@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a Data Segment  (initialized)</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">DSegEnd@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a Data Segment (initialized)</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__BSS__</span><span class="sc0">
    </span><span class="sc9">IFNDEF</span><span class="sc0"> </span><span class="sc5">__HUGE__</span><span class="sc0">
        </span><span class="sc5">BSeg@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Open a Data Segment  (un-initialized)</span><span class="sc0">
        </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'BSS'</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

        </span><span class="sc5">BSegEnd@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">           </span><span class="sc1">;; Close a Data Segment (un-initialized)</span><span class="sc0">
        </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">ENDS</span><span class="sc0">
                        </span><span class="sc9">ENDM</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

</span><span class="sc5">Header@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">BYTE</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'CODE'</span><span class="sc0">
</span><span class="sc5">_TEXT</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'DATA'</span><span class="sc0">
</span><span class="sc5">_DATA</span><span class="sc0">   </span><span class="sc9">ENDS</span><span class="sc0">
</span><span class="sc9">IFDEF</span><span class="sc0"> </span><span class="sc5">__BSS__</span><span class="sc0">
    </span><span class="sc9">IFNDEF</span><span class="sc0">  </span><span class="sc5">__HUGE__</span><span class="sc0">
        </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">SEGMENT</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PUBLIC</span><span class="sc0"> </span><span class="sc12">'BSS'</span><span class="sc0">
        </span><span class="sc5">_BSS</span><span class="sc0">    </span><span class="sc9">ENDS</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

        </span><span class="sc9">ASSUME</span><span class="sc0">  </span><span class="sc8">CS</span><span class="sc4">:</span><span class="sc5">_TEXT</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">DS</span><span class="sc4">:</span><span class="sc5">DGROUP</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      C Naming Convention Macros                              |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc5">UNDERSCORE</span><span class="sc0">      </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc2">1</span><span class="sc0">

</span><span class="sc5">ExtSym@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sType</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;</span><span class="sc0">
        </span><span class="sc9">IFIDN</span><span class="sc0">   </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc5">__PASCAL__</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc2">0</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc5">UNDERSCORE</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">NAMING</span><span class="sc0">
        </span><span class="sc9">EXTRN</span><span class="sc0">   </span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0"> </span><span class="sc4">:</span><span class="sc0"> </span><span class="sc5">sType</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
        </span><span class="sc9">EXTRN</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc0"> </span><span class="sc4">:</span><span class="sc0"> </span><span class="sc5">sType</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">PubSym@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">Definition</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;</span><span class="sc0">
        </span><span class="sc9">IFIDN</span><span class="sc0">   </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc5">__PASCAL__</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc2">0</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc5">UNDERSCORE</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">NAMING</span><span class="sc0">
        </span><span class="sc9">PUBLIC</span><span class="sc0">  </span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">
</span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">   </span><span class="sc5">Definition</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
        </span><span class="sc9">PUBLIC</span><span class="sc0">  </span><span class="sc5">Sym</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc0">     </span><span class="sc5">Definition</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">Static@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">Definition</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;</span><span class="sc0">
        </span><span class="sc9">IFIDN</span><span class="sc0">   </span><span class="sc4">&lt;</span><span class="sc5">sName</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc5">__PASCAL__</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc2">0</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">NAMING</span><span class="sc0">      </span><span class="sc4">=</span><span class="sc0">       </span><span class="sc5">UNDERSCORE</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">NAMING</span><span class="sc0">
</span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">   </span><span class="sc5">Definition</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">_</span><span class="sc4">&amp;</span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc0">     </span><span class="sc5">Definition</span><span class="sc0">
</span><span class="sc5">Sym</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc0">   </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc5">Sym</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Macros which are Data Size Dependent                    |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">LDATA</span><span class="sc0">
</span><span class="sc5">DPTR_</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">DWORD</span><span class="sc0"> </span><span class="sc9">PTR</span><span class="sc0">
</span><span class="sc5">dPtrSize</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">
</span><span class="sc5">LES_</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc6">LES</span><span class="sc0">
</span><span class="sc5">ES_</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc8">ES</span><span class="sc4">:</span><span class="sc0">
</span><span class="sc5">SS_</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc8">SS</span><span class="sc4">:</span><span class="sc0">
</span><span class="sc5">LDS_</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc6">LDS</span><span class="sc0">

</span><span class="sc5">pushDS_</span><span class="sc0">         </span><span class="sc9">MACRO</span><span class="sc0">
                </span><span class="sc6">PUSH</span><span class="sc0">    </span><span class="sc8">DS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">popDS_</span><span class="sc0">          </span><span class="sc9">MACRO</span><span class="sc0">
                </span><span class="sc6">POP</span><span class="sc0">    </span><span class="sc8">DS</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">PushPtr</span><span class="sc0">         </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">dPtrOff</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">dPtrSeg</span><span class="sc0">
                </span><span class="sc6">PUSH</span><span class="sc0">    </span><span class="sc5">dPtrSeg</span><span class="sc0">
                </span><span class="sc6">PUSH</span><span class="sc0">    </span><span class="sc5">dPtrOff</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc5">dPtr@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Static Data pointer</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DD</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">dPtrPub@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Global Data Pointer</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DD</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">dPtrExt@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Data Pointer</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">DWORD</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">DPTR_</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PTR</span><span class="sc0">
</span><span class="sc5">dPtrSize</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">
</span><span class="sc5">LES_</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc6">MOV</span><span class="sc0">
</span><span class="sc5">ES_</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc8">DS</span><span class="sc4">:</span><span class="sc0">
</span><span class="sc5">SS_</span><span class="sc0">             </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc8">DS</span><span class="sc4">:</span><span class="sc0">
</span><span class="sc5">LDS_</span><span class="sc0">            </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc6">MOV</span><span class="sc0">

</span><span class="sc5">pushDS_</span><span class="sc0">         </span><span class="sc9">MACRO</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">popDS_</span><span class="sc0">          </span><span class="sc9">MACRO</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">PushPtr</span><span class="sc0">         </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">dPtrOff</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">dPtrSeg</span><span class="sc0">
                </span><span class="sc6">PUSH</span><span class="sc0">    </span><span class="sc5">dPtrOff</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">dPtr@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Static Data pointer</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DW</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">dPtrPub@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Global Data Pointer</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DW</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">dPtrExt@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Data Pointer</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Macros which are Code Size Dependent                    |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc9">IF</span><span class="sc0">      </span><span class="sc5">LPROG</span><span class="sc0">
</span><span class="sc5">CPTR_</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">DWORD</span><span class="sc0"> </span><span class="sc9">PTR</span><span class="sc0">
</span><span class="sc5">cPtrSize</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">4</span><span class="sc0">

</span><span class="sc9">Proc</span><span class="sc5">@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; Open a Static function</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">PROC</span><span class="sc0">      </span><span class="sc10">FAR</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">PubProc@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; Open a Public function</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">PROC</span><span class="sc0">      </span><span class="sc10">FAR</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">ExtProc@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Function</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">FAR</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtr@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Static Function pointer</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DD</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtrPub@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc1">;; Global Function Pointer</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DD</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtrExt@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Function Pointer</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">DWORD</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc9">ELSE</span><span class="sc0">
</span><span class="sc5">CPTR_</span><span class="sc0">           </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc10">WORD</span><span class="sc0"> </span><span class="sc9">PTR</span><span class="sc0">
</span><span class="sc5">cPtrSize</span><span class="sc0">        </span><span class="sc9">equ</span><span class="sc0">     </span><span class="sc2">2</span><span class="sc0">

</span><span class="sc9">Proc</span><span class="sc5">@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; Open a Static function</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">PROC</span><span class="sc0">      </span><span class="sc10">NEAR</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">PubProc@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; Open a Public function</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">PROC</span><span class="sc0">      </span><span class="sc10">NEAR</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">ExtProc@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Function</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">NEAR</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtr@</span><span class="sc0">           </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Static Function pointer</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DW</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtrPub@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">VALUE</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">       </span><span class="sc1">;; Global Function Pointer</span><span class="sc0">
</span><span class="sc5">PubSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc9">DW</span><span class="sc0">        </span><span class="sc5">VALUE</span><span class="sc4">&gt;,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">cPtrExt@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; External Function Pointer</span><span class="sc0">
</span><span class="sc5">ExtSym@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc10">WORD</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc9">ENDIF</span><span class="sc0">

</span><span class="sc5">EndProc@</span><span class="sc0">        </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">      </span><span class="sc1">;; Close a function</span><span class="sc0">
</span><span class="sc5">Static@</span><span class="sc0">         </span><span class="sc5">Sym</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc9">ENDP</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">sName</span><span class="sc0">
                </span><span class="sc9">ENDM</span><span class="sc0">

        </span><span class="sc9">PAGE</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;|      Miscellaneous Definitions                               |</span><span class="sc0">
</span><span class="sc1">;|                                                              |</span><span class="sc0">
</span><span class="sc1">;[]------------------------------------------------------------[]</span><span class="sc0">

</span><span class="sc1">;*** Set up some macros for procedure parameters and export/import</span><span class="sc0">

</span><span class="sc5">nearCall</span><span class="sc0">        </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">nearBP</span><span class="sc0">          </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">nearIP</span><span class="sc0">          </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">nearParam</span><span class="sc0">       </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">nearCall</span><span class="sc0">        </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">farCall</span><span class="sc0">         </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">farBP</span><span class="sc0">           </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">farCSIP</span><span class="sc0">         </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">aParam</span><span class="sc0">          </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">farCall</span><span class="sc0">         </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc1">;*** Next, we define some convenient structures to access the parts</span><span class="sc0">
</span><span class="sc1">;       of larger objects.</span><span class="sc0">

</span><span class="sc5">_twoBytes</span><span class="sc0">       </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">BY0</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">BY1</span><span class="sc0">     </span><span class="sc9">db</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_twoBytes</span><span class="sc0">       </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_fourWords</span><span class="sc0">      </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">W0</span><span class="sc0">      </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">W1</span><span class="sc0">      </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">W2</span><span class="sc0">      </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">W3</span><span class="sc0">      </span><span class="sc9">dw</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_fourWords</span><span class="sc0">      </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_twoDwords</span><span class="sc0">      </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">DD0</span><span class="sc0">     </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">DD1</span><span class="sc0">     </span><span class="sc9">dd</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_twoDwords</span><span class="sc0">      </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc5">_aFloat</span><span class="sc0">         </span><span class="sc9">STRUC</span><span class="sc0">
</span><span class="sc5">double</span><span class="sc0">          </span><span class="sc9">dq</span><span class="sc0">      </span><span class="sc10">?</span><span class="sc0">
</span><span class="sc5">_aFloat</span><span class="sc0">         </span><span class="sc9">ENDS</span><span class="sc0">

</span><span class="sc1">; How to invoke MSDOS.</span><span class="sc0">

</span><span class="sc5">MSDOS@</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">
        </span><span class="sc6">int</span><span class="sc0">     </span><span class="sc2">21h</span><span class="sc0">
        </span><span class="sc9">ENDM</span><span class="sc0">
        </span><span class="sc9">PAGE</span><span class="sc0">

</span><span class="sc1">; The next section concerns the use of registers.  SI and DI are used</span><span class="sc0">
</span><span class="sc1">;       for register variables, and must be conserved.</span><span class="sc0">

</span><span class="sc1">; Registers AX, BX, CX, DX will not be preserved across function calls.</span><span class="sc0">

</span><span class="sc1">; Firstly, the registers to be conserved through function calls, including</span><span class="sc0">
</span><span class="sc1">;       the setup of local variables.</span><span class="sc0">

</span><span class="sc5">link@</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">_si</span><span class="sc4">,</span><span class="sc5">_di</span><span class="sc4">,</span><span class="sc5">_ES</span><span class="sc4">,</span><span class="sc5">locals</span><span class="sc0">
        </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">bp</span><span class="sc0">
        </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">bp</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">sp</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">locals</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">lea</span><span class="sc0">     </span><span class="sc8">sp</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc5">locals</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">_si</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">si</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">_di</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">push</span><span class="sc0">    </span><span class="sc8">di</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">unLink@</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">_si</span><span class="sc4">,</span><span class="sc5">_di</span><span class="sc4">,</span><span class="sc5">_ES</span><span class="sc4">,</span><span class="sc5">locals</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">_di</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">di</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">_si</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">si</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">locals</span><span class="sc4">&gt;</span><span class="sc0">
                </span><span class="sc6">mov</span><span class="sc0">     </span><span class="sc8">sp</span><span class="sc4">,</span><span class="sc0"> </span><span class="sc8">bp</span><span class="sc0">
        </span><span class="sc9">ENDIF</span><span class="sc0">
        </span><span class="sc6">pop</span><span class="sc0">     </span><span class="sc8">bp</span><span class="sc0">
</span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc9">.LIST</span><span class="sc0">
</span></div></body>
</html>
