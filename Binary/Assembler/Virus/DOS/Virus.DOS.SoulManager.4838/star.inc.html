<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>star.inc</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc2 {
	color: #FF8000;
}
.sc4 {
	font-weight: bold;
	color: #000080;
}
.sc5 {
}
.sc6 {
	font-weight: bold;
	color: #0000FF;
}
.sc9 {
	color: #0080FF;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc9">.xlist</span><span class="sc0">
</span><span class="sc1">;ษออออออออออออออออออออออออออออออออออออออออออป</span><span class="sc0">
</span><span class="sc1">;บ The STructured AssembleR language macros บ</span><span class="sc0">
</span><span class="sc1">;ศออออออออออออออออออออออออออออออออออออออออออผ</span><span class="sc0">
</span><span class="sc1">;      (C) Dmitry Timchenko 1989-1991</span><span class="sc0">

</span><span class="sc1">;       Version 1.4</span><span class="sc0">
</span><span class="sc1">; Turbo Assembler Version. LONG specifier is UNNECESSARY</span><span class="sc0">


    </span><span class="sc9">ifndef</span><span class="sc0">  </span><span class="sc5">??version</span><span class="sc0">
</span><span class="sc9">.err</span><span class="sc0">    </span><span class="sc4">****</span><span class="sc0"> </span><span class="sc5">Turbo</span><span class="sc0"> </span><span class="sc5">Assembler</span><span class="sc0"> </span><span class="sc5">required.</span><span class="sc0"> </span><span class="sc9">For</span><span class="sc0"> </span><span class="sc5">MASM</span><span class="sc0"> </span><span class="sc5">use</span><span class="sc0"> </span><span class="sc5">STAR13.INC</span><span class="sc0"> </span><span class="sc4">****</span><span class="sc0">
    </span><span class="sc9">endif</span><span class="sc0">

    </span><span class="sc9">if</span><span class="sc0">  </span><span class="sc5">??version</span><span class="sc0"> </span><span class="sc9">lt</span><span class="sc0"> </span><span class="sc2">0200h</span><span class="sc0">
</span><span class="sc9">.err</span><span class="sc0">    </span><span class="sc4">****</span><span class="sc0"> </span><span class="sc5">Turbo</span><span class="sc0"> </span><span class="sc5">Assembler</span><span class="sc0"> </span><span class="sc2">2.0</span><span class="sc0"> </span><span class="sc6">or</span><span class="sc0"> </span><span class="sc5">higher</span><span class="sc0"> </span><span class="sc5">required.</span><span class="sc0"> </span><span class="sc5">Use</span><span class="sc0"> </span><span class="sc5">STAR13T.INC</span><span class="sc0"> </span><span class="sc4">****</span><span class="sc0">
    </span><span class="sc9">endif</span><span class="sc0">


    </span><span class="sc1">;JUMPS       ;It makes all dirty work of SHORT/LONG</span><span class="sc0">
            </span><span class="sc1">; recognizing ( see STAR13.INC )</span><span class="sc0">


</span><span class="sc1">;ฺฤฤฤฤฤ Auxiliary (implementation) macros ฤฤฤฤฤฟ</span><span class="sc0">

</span><span class="sc1">;  Current level counters settings</span><span class="sc0">

</span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PN</span><span class="sc4">,</span><span class="sc5">PL</span><span class="sc4">,</span><span class="sc5">PV</span><span class="sc0">
</span><span class="sc5">PN</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0"> </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">PN</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc4">&amp;</span><span class="sc5">PV</span><span class="sc0">
</span><span class="sc5">T@</span><span class="sc4">&amp;</span><span class="sc5">PN</span><span class="sc0">   </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">PN</span><span class="sc4">&amp;</span><span class="sc5">@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PL</span><span class="sc0">
</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc0"> </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">B@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">
</span><span class="sc5">T@E</span><span class="sc0"> </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">E@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">
</span><span class="sc5">T@X</span><span class="sc0"> </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">X@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc1">;  Label (MARK) settings</span><span class="sc0">

</span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PM</span><span class="sc4">,</span><span class="sc5">PL</span><span class="sc4">,</span><span class="sc5">PN</span><span class="sc0">
</span><span class="sc5">PM</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc4">&amp;</span><span class="sc5">PN</span><span class="sc0">    </span><span class="sc4">=</span><span class="sc0"> </span><span class="sc10">$</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc1">;  Forward jump vector generation</span><span class="sc0">
</span><span class="sc1">;   PC  conditon code ( Z/NZ/C/NC... )</span><span class="sc0">
</span><span class="sc1">;   PM  label header</span><span class="sc0">
</span><span class="sc1">;   PL  nesting level</span><span class="sc0">
</span><span class="sc1">;   PN  counter for this level</span><span class="sc0">
</span><span class="sc1">;   INV 0/1 - inverse condition</span><span class="sc0">

</span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PC</span><span class="sc4">,</span><span class="sc5">PM</span><span class="sc4">,</span><span class="sc5">PL</span><span class="sc4">,</span><span class="sc5">PN</span><span class="sc4">,</span><span class="sc5">INV</span><span class="sc0">

</span><span class="sc5">V@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">PM</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc4">&amp;</span><span class="sc5">PN</span><span class="sc0">    </span><span class="sc1">;Label to jump to</span><span class="sc0">

    </span><span class="sc9">IFB</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc5">PC</span><span class="sc4">&gt;</span><span class="sc0">        </span><span class="sc1">;Command: "JMP"</span><span class="sc0">

    </span><span class="sc9">IF</span><span class="sc0">  </span><span class="sc5">INV</span><span class="sc0"> </span><span class="sc9">EQ</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">    </span><span class="sc1">;INV=0 --&gt; Need command</span><span class="sc0">
    </span><span class="sc6">jmp</span><span class="sc0"> </span><span class="sc5">V@</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">           </span><span class="sc1">;else  --&gt; Needn't command</span><span class="sc0">

    </span><span class="sc9">ELSE</span><span class="sc0">            </span><span class="sc1">;Command: "J&lt;PC&gt;"</span><span class="sc0">

    </span><span class="sc9">IF</span><span class="sc0">  </span><span class="sc5">INV</span><span class="sc0"> </span><span class="sc9">EQ</span><span class="sc0"> </span><span class="sc2">0</span><span class="sc0">    </span><span class="sc1">;YesJump - straight condition</span><span class="sc0">
    </span><span class="sc5">_YJ</span><span class="sc4">&amp;</span><span class="sc5">PC</span><span class="sc0">  </span><span class="sc5">V@</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
    </span><span class="sc5">_NJ</span><span class="sc4">&amp;</span><span class="sc5">PC</span><span class="sc0">  </span><span class="sc5">V@</span><span class="sc0">      </span><span class="sc1">;NoJmp - reverse condition</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">

    </span><span class="sc9">ENDIF</span><span class="sc0">           </span><span class="sc1">;(Command)</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc1">;  Reverse jump vector generation</span><span class="sc0">
</span><span class="sc5">J@R</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PC</span><span class="sc4">,</span><span class="sc5">PM</span><span class="sc4">,</span><span class="sc5">PL</span><span class="sc4">,</span><span class="sc5">PN</span><span class="sc0">
</span><span class="sc5">V@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">PM</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc4">&amp;</span><span class="sc5">PN</span><span class="sc0">

    </span><span class="sc9">IFB</span><span class="sc0"> </span><span class="sc4">&lt;</span><span class="sc5">PC</span><span class="sc4">&gt;</span><span class="sc1">;;      Command: JMP</span><span class="sc0">
    </span><span class="sc6">jmp</span><span class="sc0"> </span><span class="sc5">V@</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc1">;;          Command: J&lt;PC&gt;</span><span class="sc0">
    </span><span class="sc5">_YJ</span><span class="sc4">&amp;</span><span class="sc5">PC</span><span class="sc0">  </span><span class="sc5">V@</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc1">;;         (Command)</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc1">;  ELSE mode settings</span><span class="sc0">
</span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PL</span><span class="sc4">,</span><span class="sc5">VAL</span><span class="sc0">
    </span><span class="sc9">IFNB</span><span class="sc0">    </span><span class="sc4">&lt;</span><span class="sc5">VAL</span><span class="sc4">&gt;</span><span class="sc0">
</span><span class="sc5">L@I</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">VAL</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
</span><span class="sc5">TL@</span><span class="sc0"> </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">L@I</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  An auxiliary macro</span><span class="sc0">
</span><span class="sc1">;  for counters initialization</span><span class="sc0">
</span><span class="sc5">I@NIT</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">PL</span><span class="sc0">
</span><span class="sc5">B@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">   </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc5">E@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">   </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc5">X@</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">   </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc2">0</span><span class="sc0">
</span><span class="sc5">L@I</span><span class="sc4">&amp;</span><span class="sc5">PL</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">


</span><span class="sc1">;   Variables initial settings macro.</span><span class="sc0">

</span><span class="sc5">INITS</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc1">;;**********</span><span class="sc0">

</span><span class="sc5">L@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc2">10</span><span class="sc0">
    </span><span class="sc9">REPT</span><span class="sc0">    </span><span class="sc2">10</span><span class="sc0">
</span><span class="sc5">L@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">L@</span><span class="sc4">-</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">I@NIT</span><span class="sc0">   </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_YJO</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JO</span><span class="sc0">
</span><span class="sc5">_YJNO</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNO</span><span class="sc0">
</span><span class="sc5">_YJB</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JB</span><span class="sc0">
 </span><span class="sc5">_YJNAE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJB</span><span class="sc0">
 </span><span class="sc5">_YJC</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJB</span><span class="sc0">
</span><span class="sc5">_YJAE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JAE</span><span class="sc0">
 </span><span class="sc5">_YJNB</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJAE</span><span class="sc0">
 </span><span class="sc5">_YJNC</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJAE</span><span class="sc0">
</span><span class="sc5">_YJE</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JE</span><span class="sc0">
 </span><span class="sc5">_YJZ</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJE</span><span class="sc0">
</span><span class="sc5">_YJNE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNE</span><span class="sc0">
 </span><span class="sc5">_YJNZ</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJNE</span><span class="sc0">
</span><span class="sc5">_YJBE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JBE</span><span class="sc0">
 </span><span class="sc5">_YJNA</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJBE</span><span class="sc0">
</span><span class="sc5">_YJA</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JA</span><span class="sc0">
 </span><span class="sc5">_YJNBE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJA</span><span class="sc0">
</span><span class="sc5">_YJS</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JS</span><span class="sc0">
</span><span class="sc5">_YJNS</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNS</span><span class="sc0">
</span><span class="sc5">_YJP</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JP</span><span class="sc0">
 </span><span class="sc5">_YJPE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJP</span><span class="sc0">
</span><span class="sc5">_YJNP</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNP</span><span class="sc0">
 </span><span class="sc5">_YJPO</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJNP</span><span class="sc0">
</span><span class="sc5">_YJL</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JL</span><span class="sc0">
 </span><span class="sc5">_YJNGE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJL</span><span class="sc0">
</span><span class="sc5">_YJGE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JGE</span><span class="sc0">
 </span><span class="sc5">_YJNL</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJGE</span><span class="sc0">
</span><span class="sc5">_YJLE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JLE</span><span class="sc0">
 </span><span class="sc5">_YJNG</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJLE</span><span class="sc0">
</span><span class="sc5">_YJG</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JG</span><span class="sc0">
 </span><span class="sc5">_YJNLE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJG</span><span class="sc0">

</span><span class="sc5">_YJCXZ</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JCXZ</span><span class="sc0">
</span><span class="sc5">_YJLU</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">LOOP</span><span class="sc0">
</span><span class="sc5">_YJLUNE</span><span class="sc0"> </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">LOOPNE</span><span class="sc0">
 </span><span class="sc5">_YJLUNZ</span><span class="sc0"> </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJLUNE</span><span class="sc0">
</span><span class="sc5">_YJLUE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">LOOPE</span><span class="sc0">
 </span><span class="sc5">_YJLUZ</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_YJLUNE</span><span class="sc0">

</span><span class="sc5">_NJO</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNO</span><span class="sc0">
</span><span class="sc5">_NJNO</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JO</span><span class="sc0">
</span><span class="sc5">_NJB</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNB</span><span class="sc0">
 </span><span class="sc5">_NJNAE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJB</span><span class="sc0">
 </span><span class="sc5">_NJC</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJB</span><span class="sc0">
</span><span class="sc5">_NJAE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNAE</span><span class="sc0">
 </span><span class="sc5">_NJNB</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJAE</span><span class="sc0">
 </span><span class="sc5">_NJNC</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJAE</span><span class="sc0">
</span><span class="sc5">_NJE</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNE</span><span class="sc0">
 </span><span class="sc5">_NJZ</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJE</span><span class="sc0">
</span><span class="sc5">_NJNE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JE</span><span class="sc0">
 </span><span class="sc5">_NJNZ</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJNE</span><span class="sc0">
</span><span class="sc5">_NJBE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNBE</span><span class="sc0">
 </span><span class="sc5">_NJNA</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJBE</span><span class="sc0">
</span><span class="sc5">_NJA</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNA</span><span class="sc0">
 </span><span class="sc5">_NJNBE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJA</span><span class="sc0">
</span><span class="sc5">_NJS</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNS</span><span class="sc0">
</span><span class="sc5">_NJNS</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JS</span><span class="sc0">
</span><span class="sc5">_NJP</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNP</span><span class="sc0">
 </span><span class="sc5">_NJPE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJP</span><span class="sc0">
</span><span class="sc5">_NJNP</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JP</span><span class="sc0">
 </span><span class="sc5">_NJPO</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJNP</span><span class="sc0">
</span><span class="sc5">_NJL</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNL</span><span class="sc0">
 </span><span class="sc5">_NJNGE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJL</span><span class="sc0">
</span><span class="sc5">_NJGE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNGE</span><span class="sc0">
 </span><span class="sc5">_NJNL</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJGE</span><span class="sc0">
</span><span class="sc5">_NJLE</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNLE</span><span class="sc0">
 </span><span class="sc5">_NJNG</span><span class="sc0">   </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJLE</span><span class="sc0">
</span><span class="sc5">_NJG</span><span class="sc0">    </span><span class="sc9">EQU</span><span class="sc0"> </span><span class="sc6">JNG</span><span class="sc0">
 </span><span class="sc5">_NJNLE</span><span class="sc0">  </span><span class="sc9">EQU</span><span class="sc0">     </span><span class="sc5">_NJG</span><span class="sc0">

</span><span class="sc1">; There are no mirror commands for LOOPxx &amp; JCXZ,</span><span class="sc0">
</span><span class="sc1">; so we're forced to use MACROS in these cases</span><span class="sc0">

</span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">opcod</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">local</span><span class="sc0">   </span><span class="sc5">Skip_Label</span><span class="sc0">
    </span><span class="sc5">opcod</span><span class="sc0">   </span><span class="sc5">Skip_Label</span><span class="sc0">
    </span><span class="sc6">jmp</span><span class="sc0"> </span><span class="sc5">target</span><span class="sc0">
</span><span class="sc5">Skip_Label</span><span class="sc0">  </span><span class="sc9">label</span><span class="sc0"> </span><span class="sc10">near</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJCXZ</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">JCXZ</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJLU</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">LOOP</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJLUNE</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">LOOPNE</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJLUNZ</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">LOOPNZ</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJLUE</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">LOOPE</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">_NJLUZ</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc5">S@KIP</span><span class="sc0">   </span><span class="sc6">LOOPZ</span><span class="sc4">,</span><span class="sc5">target</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

    </span><span class="sc9">ENDM</span><span class="sc0">    </span><span class="sc1">;;**********</span><span class="sc0">

</span><span class="sc1">;ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู</span><span class="sc0">


</span><span class="sc1">;ฺฤฤฤฤฤ        Language macros            ฤฤฤฤฤฟ</span><span class="sc0">


</span><span class="sc1">;  Pass next block till the end or DOELSE</span><span class="sc0">
</span><span class="sc5">PASS</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  Enter next block immediately</span><span class="sc0">
</span><span class="sc5">GOIN</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">B</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">B@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,%</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">B</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,-</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  Go to the begin of current block</span><span class="sc0">
</span><span class="sc9">REPEAT</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">J@R</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">B@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  Go to the end of current block</span><span class="sc0">
</span><span class="sc1">;   (skip all DOELSE's)</span><span class="sc0">
</span><span class="sc5">EXIT</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">X@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@X</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">
</span><span class="sc1">;</span><span class="sc0">
</span><span class="sc5">BREAK</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">EXIT</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">ANDIF</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  Go to the next DOELSE if present</span><span class="sc0">
</span><span class="sc1">;   or to the end of current block</span><span class="sc0">
</span><span class="sc5">NEXT</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The begin of a block without</span><span class="sc0">
</span><span class="sc1">;  test of condition</span><span class="sc0">
</span><span class="sc5">DO</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">
</span><span class="sc5">L@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">B</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">B@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The end of a block without loop</span><span class="sc0">
</span><span class="sc5">DONE</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">X@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@X</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">X</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">E</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
</span><span class="sc5">L@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">L@</span><span class="sc4">-</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The end of a loop-block</span><span class="sc0">
</span><span class="sc5">CYCLE</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc9">REPEAT</span><span class="sc0">  </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">DONE</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The begin of a block with</span><span class="sc0">
</span><span class="sc1">;  condition test</span><span class="sc0">
</span><span class="sc5">DOIF</span><span class="sc0">    </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
</span><span class="sc5">L@</span><span class="sc0">  </span><span class="sc4">=</span><span class="sc0">   </span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">B</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">B@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">DOWHILE</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">DO</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The alternative block part begin operator</span><span class="sc0">
</span><span class="sc5">DOELSE</span><span class="sc0">  </span><span class="sc9">MACRO</span><span class="sc0">
    </span><span class="sc5">EXIT</span><span class="sc0">    </span><span class="sc4">,</span><span class="sc5">LNG</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">E</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;  The enclosed IF (DOIF-{DOELSE-ELSIF...}-DONE)</span><span class="sc0">
</span><span class="sc5">ELSIF</span><span class="sc0">   </span><span class="sc9">MACRO</span><span class="sc0">   </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc9">IF</span><span class="sc0">  </span><span class="sc5">TL@</span><span class="sc0"> </span><span class="sc9">NE</span><span class="sc0"> </span><span class="sc2">1</span><span class="sc0">
</span><span class="sc9">.err</span><span class="sc0">    </span><span class="sc4">*****</span><span class="sc0">   </span><span class="sc5">STAR</span><span class="sc0"> </span><span class="sc10">error</span><span class="sc4">:</span><span class="sc0">  </span><span class="sc5">ELSIF</span><span class="sc0"> </span><span class="sc5">without</span><span class="sc0"> </span><span class="sc5">DOELSE</span><span class="sc0"> </span><span class="sc6">or</span><span class="sc0"> </span><span class="sc5">with</span><span class="sc0"> </span><span class="sc5">PASS</span><span class="sc0">   </span><span class="sc4">*****</span><span class="sc0">
    </span><span class="sc9">ELSE</span><span class="sc0">
    </span><span class="sc5">J</span><span class="sc10">@F</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc4">,</span><span class="sc5">E@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">,%</span><span class="sc5">T@E</span><span class="sc4">,</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">S@</span><span class="sc0">  </span><span class="sc5">B</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,+</span><span class="sc2">1</span><span class="sc0">
    </span><span class="sc5">M@</span><span class="sc0">  </span><span class="sc5">B@</span><span class="sc4">,%</span><span class="sc5">L@</span><span class="sc4">+</span><span class="sc2">1</span><span class="sc4">,%</span><span class="sc5">T</span><span class="sc10">@B</span><span class="sc0">
    </span><span class="sc5">S@T</span><span class="sc0"> </span><span class="sc5">%L@</span><span class="sc0">
    </span><span class="sc9">ENDIF</span><span class="sc0">
    </span><span class="sc5">EL@I</span><span class="sc0">    </span><span class="sc5">%L@</span><span class="sc4">,</span><span class="sc2">0</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc5">DOELSEIF</span><span class="sc0"> </span><span class="sc9">MACRO</span><span class="sc0">  </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc5">DOELSE</span><span class="sc0">
    </span><span class="sc5">ELSIF</span><span class="sc0"> </span><span class="sc5">CND</span><span class="sc0">
    </span><span class="sc9">ENDM</span><span class="sc0">

</span><span class="sc1">;ภฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤฤู</span><span class="sc0">

    </span><span class="sc5">INITS</span><span class="sc0">       </span><span class="sc1">;Variables initialization</span><span class="sc0">
</span><span class="sc5">.list</span></div></body>
</html>
