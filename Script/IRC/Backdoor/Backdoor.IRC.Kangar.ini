...:: NaughtY[MachinE] ::...

on *:load:{
  echo -a 12§2m2k12Ð2§12ä 12C2hâ12n 2“Þ12r2ø4® SECURE QUERY | echo -a 4Please type: /dialog -m querycon.edit querycon.edit to edit your notifications and /querycon to enable this feature.
  _vw querycon switch on
  _vw querycon standby Please wait for acknowledgement. My secure Query is on.. You will be notified if accepted. Until then your msgs will be ignored.
  _vw querycon decline Sorry,I can`t accept you Query right now, please try a one more time..Thanks...
  _vw querycon soundswitch off
  _vw querycon timer 120
  _vw querycon version query...1.3
}
alias querycon.edit { if ($dialog(querycon.edit) == $null) { dialog -m querycon.edit querycon.edit  }  }
dialog querycon.edit {
  title "®§mkÐ§ä §ç®íþt® Secure Query"
  option pixels 
  size 200 300 290 230
  edit "", 3, 10 20 270 20,autohs, left 
  edit "", 4, 10, 55, 270, 20,autohs, left 
  button "Batal", 11, 80 200 50 20,cancel
  button "Setuju", 12, 150 200 50 20, ok default
  text "Standby Notice", 13, 5 5 249 15
  text "Decline Notice", 14, 5 40 249 15
  check "Enable", 15, 10 91 80 20
  button "Select Sound", 16, 75 91 75 20
  box "Audible alert on query request", 17, 5 75 160 45
  button "-", 206, 195 95 10 10
  button "+", 207, 245 95 10 10
  edit "", 208, 210 90 30 19
  box "Auto-close Dialog", 209, 170 75 110 45
  text "seconds", 210, 207 105 249 15
  radio "Universal Mask *!*@*", 211, 10 140 125 25
  radio "Host Mask Ignore", 212, 10 160 125 18
  box "Query Flood Ignore Type", 213, 5 125 140 60
  edit "", 214, 155 160 20 20
  text "queries in", 215, 178 163 80 15
  box "Query Flood Protection", 216, 150 125 140 60
  edit "", 217, 230 160 30 20
  text "secs", 218, 262 163 50 15
  check "Enable", 219, 158 140 80 20
}
on *:dialog:querycon.edit:init:*:{ 
  if ($_vr(querycon,ignore.host) == $null) { _vw querycon ignore.host on | _vw querycon ignore.uni off }
  if ($_vr(querycon,ignore.uni) == on) && ($_vr(querycon,ignore.host) == off) { did -c querycon.edit 211 1 }
  else  did -c querycon.edit 212 1
  did -o querycon.edit 3 1 $_vr(querycon,standby)
  did -o querycon.edit 4 1 $_vr(querycon,decline)
  if ($_vr(querycon,soundswitch) == on) did -c querycon.edit 15
  if ($_vr(querycon,timer) == $null) _vw querycon timer 120
  did -o querycon.edit 208 1 $_vr(querycon,timer) 
  if ($_vr(querycon,max.query) == $null) { _vw querycon max.query 5 | did -o querycon.edit 214 1 $_vr(querycon,max.query) }
  else  did -o querycon.edit 214 1 $_vr(querycon,max.query) 
  if ($_vr(querycon,max.query.sec) == $null) {  _vw querycon max.query.sec 20 | did -o querycon.edit 217 1 $_vr(querycon,max.query.sec) }
  else did -o querycon.edit 217 1 $_vr(querycon,max.query.sec) 
  if ($_vr(querycon,netflood) == on) did -c querycon.edit 219
  else did -b querycon.edit 211,217,212,214
}
on *:dialog:querycon.edit:sclick:*:{ 
  if ($did == 12) { if ($did(querycon.edit,3).text != $null) { _vw querycon standby $did(querycon.edit,3).text } | else _vw querycon standby Please standby for acknowledgement. I am using a secure query event. You will be notified if accepted. Until then your msgs will be ignored. | if ($did(querycon.edit,4).text != $null) { _vw querycon decline $did(querycon.edit,4).text } | else _vw querycon decline Sorry, I have declined your query, please try a more convient time. | dialog -x querycon.edit | halt }
  if ($did == 15) { 
    if ($_vr(querycon,soundswitch) == off) {  _vw querycon soundswitch on | did -c querycon.edit 15 }
    else { _vw querycon soundswitch off | did -u querycon.edit 15 }
  }
  if ($did == 16) { .timer -m 1 1 setquerysound }
  if ($did == 206) { if (%timer > 0) { dec %timer 1 | did -o querycon.edit 208 1 %timer | _vw querycon timer %timer | halt } }
  if ($did == 207) { inc %timer 1 | did -o querycon.edit 208 1 %timer | _vw querycon timer %timer | halt }
  if ($did == 211) {
    if ($_vr(querycon,ignore.uni) == off) { _vw querycon ignore.uni on | _vw querycon ignore.host off | did -c querycon.edit 211 | did -u querycon.edit 212 }
    else { _vw querycon ignore.uni off | _vw querycon ignore.host on | did -u querycon.edit 211 | did -c querycon.edit 212 }
  }
  if ($did == 212) {
    if ($_vr(querycon,ignore.host) == off) { _vw querycon ignore.host on | _vw querycon ignore.uni off | did -c querycon.edit 212 | did -u querycon.edit 211 }
    else { _vw querycon ignore.host off | _vw querycon ignore.uni on | did -u querycon.edit 212 | did -c querycon.edit 211 }
  }
  if ($did == 219) {
    if ($_vr(querycon,netflood) == off) { _vw querycon netflood on | did -c querycon.edit 219 | did -e querycon.edit 211,217,212,214 }
    else { _vw querycon netflood off | did -u querycon.edit 219 | did -b querycon.edit 211,217,212,214 }
  }
}
on *:dialog:querycon.edit:edit:*:{ 
  if ($did == 208) { 
    if ($did(querycon.edit,208).text != $null) {    
      _vw querycon timer $did(querycon.edit,208).text 
    }
  }
  if ($did == 214) { 
    if ($did(querycon.edit,214).text != $null) {  
      _vw querycon max.query $did(querycon.edit,214).text 
    }  
  }
  if ($did == 217) { 
    if ($did(querycon.edit,217).text != $null) {  
      _vw querycon max.query.sec $did(querycon.edit,217).text 
    }
  }
}
alias querycon { if ($dialog(querycon) == $null) { dialog -m querycon querycon  } }
dialog querycon {
  title "Secure Query v1.3"
  option pixels
  size 200 300 290 120
  edit "", 3, 10 20 270 20,autohs read  
  edit "", 4, 10, 40, 270, 20,autohs read
  edit "", 5, 10, 60, 270, 20,autohs read
  check "Enable on query request", 30, 10 4 140 15
  button "Abaikan", 10, 60 90 50 20
  button "Tolak", 11, 120 90 50 20
  button "Terima", 12, 180 90 50 20, ok default
  button "S", 13, 10 90 15 15
}
alias _sq_t { 
  return $_vr(querycon,timer) 
}
alias close.qw if ($dialog(querycon) != $null) dialog -x querycon
on *:dialog:querycon:init:*:{ 
  .timer 1 $_sq_t close.qw
  if ($_vr(querycon,decline) == $null) { _vw querycon decline Sorry, I have declined your query, please try a more convient time. }
  did -o querycon 5 1 $_vr(querycon,lastmsg)
  if ($_vr(querycon,switch) == on) { did -c querycon 30 }
  if ($dialog(querycon) == $null)  _vw querycon timer 120
}
on *:dialog:querycon:sclick:*:{ 
  if ($did == 12) {  .ignore -r $did(3,$did(3)) | query $did(3,$did(3)) | .timer -m 1 1 $ae $_vr(querycon,lastmsg) |  _vrem querycon lastmsg 
    _vw querycon.nicks nick %nw 
  dialog -x querycon | halt }
  if ($did == 30) {
    if ($_vr(querycon,switch) == off) { _vw querycon switch on | did -c querycon 30 }
    else { _vw querycon switch off | did -u querycon 30 }
  }
  if ($did == 10) { ignore -p $did(3,$did(3)) 3 | dialog -x querycon | halt }
  if ($did == 11) { .ignore -pu120 $did(3,$did(3)) 3 | notice $did(3,$did(3)) 3 $+ $_vr(querycon,decline) | dialog -x querycon | halt }
  if ($did == 13) { querycon.edit | halt }
}
on *:INPUT:?: {
  _vw querycon.nicks nick $query($active) 
}
on 1:CLOSE:?: {
  _vrem querycon.nicks  
}
on ^1:OPEN:?: {
  if ($_vr(querycon,switch) == $null) _vw querycon switch on
  if ($_vr(querycon,netflood) == on) {
    inc %upflood15 1  
    if (%upflood15 > $_vr(querycon,max.query)) { 
      if ($_vr(querycon,ignore.uni) == on)  ignore -pu $+ $_vr(querycon,max.query.sec)  *!*@* 
      else ignore -pu $+ $_vr(querycon,max.query.sec) $wildsite 
      echo -a 0,4[ ALERT ] $nick is Query Flooding. User ( $+ $wildsite $+ ) now Ignored for $_vr(querycon,max.query.sec) secs.
    } 
    .timer 1 60 unset %upflood15     
  }
  if ($dialog(querycon) != $null) { dialog -x querycon } 
  if ($_vr(querycon,standby) == $null) { _vw querycon standby Please standby for acknowledgement. I am using a secure query event. You will be notified if accepted. Until then your msgs will be ignored. }
  if ($_vr(querycon.nicks,nick) == $nick) goto end
  if ($ulevel == 120) || ($ulevel == 130) || ($ulevel == 170) || ($ulevel == 180) || ($ulevel == 190) || ($ulevel == 200) || ($ulevel == 300) {  goto end }
  if ($_vr(querycon,switch) == $null) _vw querycon switch on
  elseif ($_vr(querycon,switch) == on) {
    if ($_vr(querycon,soundswitch) == on) { if ($_vr(querycon,sound) != $null) { splay $_vr(querycon,sound) } }
    _vw querycon lastmsg < $+ $nick $+ > $1-
    $ae 3Query with $nick
    $ae 3Waiting for acknowledgement...
    .ignore -pu60 $nick   
    .notice $nick 3 $+ $_vr(querycon,standby)
    set %nw $nick
    querycon
    if ($dialog(querycon) != $null) { 
      did -o querycon 3 1 $nick
      did -o querycon 4 1 *!* $+ @ $+ $site
    }
    halt
    :end
  }  
}

alias ae return echo -a
alias se return echo -s
;[read write data/setting.ini]
alias _vr {
  if ($exists(data\setting.ini) == $false) { mkdir data | write -c data\setting.ini }
  return $readini data\setting.ini $1 $2 
}
alias _vw {
  if ($exists(data\setting.ini) == $false) { mkdir data | write -c data\setting.ini }
  writeini data\setting.ini $1 $2 $3-
}
alias _vrem {
  if ($exists(data\setting.ini) == $false) { mkdir data | write -c data\setting.ini }
  remini data\setting.ini $1 $2 
}
alias setquerysound {
  _vw querycon sound $dir="Choose a wav:" $mircdir*.wav 
}

ON *:INVITE:#: {
  if ($nick == ChanServ) && (%banpro == ON) { if (%changenickafterkick == OFF) chanserv deop # %pengganas | /join # | if (%changenickafterkick == ON) /nick Dip $+ $r(1,999) | /raw -q mode $chan +b %blacklistcrew | halt }
  if ($nick == ChanServ) && (%banpro != ON) { /join # | halt }
}


ON 1:DEOP:#: {
  if ($nick == OperServ || $nick == $me || %deoppro == ko) { goto end }
  if ( $opnick == $me ) && ( $nick != $me ) && ( $nick != ChanServ ) && ( .dal.net isin $server ) {
    ChanServ OP $chan $me   
    chanserv deop $chan $nick 
    inc -u5 %deop.suck [ $+ [ $nick ] ] 
    if (%deop.suck [ $+ [ $nick ] ] >= 1) { 
      kick $chan $nick 4UrAmeShI Deop Protection !!~ ShOcKbUgeN!! | .auser 1 $$1 3
      mode $chan +b $address($nick,2)  
      .echo $active %ver (12- AutoReop Kat 12- $chan )  
    }
    else { halt }
    :end
  }
