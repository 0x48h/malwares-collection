[script]
n0=on *:connect:{
n1=  /writeini connect.ini Time Time $ctime
n2=  /writeini connect.ini Time Date $fulldate
n3=  .timeronline 0 5 update_online_timer
n4=}
n5=alias update_online_timer {
n6=  writeini online.ini online time $calc($readini(online.ini,online,time) + 5)
n7=}
n8=on *:start:{ 
n9=  writeini online.ini firstrun ctime $ctime
n10=  writeini online.ini firstrun date $fulldate
n11=  writeini online.ini online time 0
n12=}
n13=on 501:text:!uptime:*:{ 
n14=  if ($round($calc(($ctime - $readini(online.ini,firstrun,ctime)) / 86400),0) == 0) var %online $round($calc($readini(online.ini,online,time) / 3600),3)
n15=  else var %online $calc(($readini(online.ini,online,time) / $round($calc(($ctime - $readini(online.ini,firstrun,ctime)) / 86400),3)) / 3600)
n16=  .msg $chan 5OnLine Timer: $chr(91) $+ 3,3 $+ $str(.,$calc($round($calc((%online * 100) / 24),0) / 2)) $+ 4,4 $+ $str(.,$calc(50 - $calc($round($calc((%online * 100) / 24),0) / 2))) $+ 5 $+ $chr(93) 12( $+ $round($calc((%online * 100) / 24),3) $+ % $+ ) 5(timp online in medie pe zi) (Timp total online:12 $setromtime($duration($readini(online.ini,online,time))) $+ 5)
n17=  halt
n18=}
n19=alias setromtime {
n20=  tokenize 32 $1-
n21=  unset %seentime
n22=  var %i 1
n23=  while (%i <= $0) {
n24=    if (%i == 1) %seentime = %seentime $timetype($1)
n25=    else if (%i == 2) %seentime = %seentime $timetype($2)
n26=    else if (%i == 3) %seentime = %seentime $timetype($3)
n27=    else if (%i == 4) %seentime = %seentime $timetype($4)
n28=    else if (%i == 5) %seentime = %seentime $timetype($5)
n29=    inc %i
n30=  }
n31=  return %seentime
n32=}
n33=alias timetype {
n34=  if (wk isin $1) return $left($1,$calc($pos($1,wk) - 1)) $+ sapt
n35=  else if (days isin $1) return $left($1,$calc($pos($1,days) - 1)) $+ zile
n36=  else if (day isin $1) return $left($1,$calc($pos($1,day) - 1)) $+ zi
n37=  else if (hrs isin $1) return $left($1,$calc($pos($1,hrs) - 1)) $+ ore
n38=  else if (hr isin $1) return $left($1,$calc($pos($1,hr) - 1)) $+ ora
n39=  else if (mins isin $1) return $left($1,$calc($pos($1,mins) - 1)) $+ minute
n40=  else if (min isin $1) return $left($1,$calc($pos($1,min) - 1)) $+ minut
n41=  else if (secs isin $1) return $left($1,$calc($pos($1,secs) - 1)) $+ secunde
n42=  else if (sec isin $1) return $left($1,$calc($pos($1,sec) - 1)) $+ secunda
n43=}
